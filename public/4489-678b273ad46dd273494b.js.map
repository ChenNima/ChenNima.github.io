{"version":3,"file":"4489-678b273ad46dd273494b.js","mappings":"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f,IAAIrvC,GAAS,EAEb,OAASA,EAAQmvC,EAAO/wC,QACtBixC,EAAO/pC,KAAK6pC,EAAOnvC,GAAOF,QAAQkvC,GAAkB,SAGtD,OAAO,IAAI1wC,OAAO,MAAQ+wC,EAAOzpC,KAAK,KAAO,IAAK,IACpD,CArBa0pC,CAAuBH,GAChCF,GAAmBttC,IAAIwtC,EAAQC,IAGjC,OAAOA,CACT,CAjEQG,CAA6Bh5B,EAAQ44B,QACrCN,GACJW,GAGEj5B,EAAQ44B,QAAU54B,EAAQk5B,WACrBruC,EAIPA,EAEGtB,QAAQgvC,GAWb,SAAmBY,EAAM1vC,EAAO2vC,GAC9B,OAAOp5B,EAAQwvB,OACmB,MAA/B2J,EAAKE,WAAW,GAAK,OACpBF,EAAKE,WAAW,GAChB,MACA,MACFD,EAAIC,WAAW5vC,EAAQ,GACvBuW,EAEJ,GAjBKzW,QAAQivC,GAAwBS,GAwBrC,SAASA,EAAMK,EAAW7vC,EAAO2vC,GAC/B,OAAOp5B,EAAQwvB,OACb8J,EAAUD,WAAW,GACrBD,EAAIC,WAAW5vC,EAAQ,GACvBuW,EAEJ,CACF,CCjFA,MAAMu5B,GAAmB,aCAzB,MAAMC,GAAe,KCKd,MAAMC,GAA0B,CACrC,QACA,MACA,SACA,QACA,SACA,QACA,SACA,OACA,OACA,SACA,MACA,SACA,QACA,SACA,OACA,KACA,SACA,QACA,SACA,OACA,KACA,SACA,SACA,QACA,SACA,SACA,SACA,OACA,OACA,MACA,QACA,SACA,QACA,SACA,OACA,SACA,SACA,QACA,QACA,QACA,SACA,MACA,QACA,SACA,OACA,SACA,SACA,QACA,OACA,OACA,SACA,MACA,SACA,SACA,QACA,SACA,MACA,OACA,SACA,SACA,SACA,KACA,SACA,QACA,QACA,SACA,SACA,OACA,QACA,KACA,OACA,QACA,SACA,OACA,MACA,SACA,SACA,QACA,SACA,OACA,OACA,SACA,SACA,OACA,OACA,SACA,QACA,OACA,QACA,MACA,OACA,MACA,OACA,OACA,OACA,QACA,QACA,QACA,SACA,QACA,SACA,MACA,OACA,SACA,MACA,QC1GWC,G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","sources":["webpack://tee-break-blog/./node_modules/@shikijs/types/dist/index.mjs","webpack://tee-break-blog/./node_modules/@shikijs/vscode-textmate/dist/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/html-void-elements/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/schema.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/merge.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/normalize.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/info.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/types.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/defined-info.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/create.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/aria.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/case-sensitive-transform.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/util/case-insensitive-transform.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/html.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/svg.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/xlink.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/xmlns.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/xml.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/zwitch/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/stringify-entities/lib/core.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/stringify-entities/lib/util/to-hexadecimal.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/stringify-entities/lib/util/to-decimal.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/character-entities-legacy/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/character-entities-html4/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/stringify-entities/lib/constant/dangerous.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/stringify-entities/lib/util/to-named.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/stringify-entities/lib/util/format-smart.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/stringify-entities/lib/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/handle/comment.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/ccount/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/comma-separated-tokens/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/property-information/lib/find.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/space-separated-tokens/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-whitespace/lib/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/omission/util/siblings.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/omission/omission.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/omission/closing.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/omission/opening.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/handle/element.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/handle/text.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/handle/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/handle/doctype.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/handle/raw.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/handle/root.js","webpack://tee-break-blog/./node_modules/@shikijs/core/node_modules/hast-util-to-html/lib/index.js","webpack://tee-break-blog/./node_modules/@shikijs/core/dist/index.mjs","webpack://tee-break-blog/./node_modules/shiki/dist/themes.mjs","webpack://tee-break-blog/./node_modules/@shikijs/engine-oniguruma/dist/index.mjs","webpack://tee-break-blog/./node_modules/shiki/dist/bundle-web.mjs"],"sourcesContent":["class ShikiError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"ShikiError\";\n  }\n}\n\nexport { ShikiError };\n","// src/utils.ts\nfunction clone(something) {\n  return doClone(something);\n}\nfunction doClone(something) {\n  if (Array.isArray(something)) {\n    return cloneArray(something);\n  }\n  if (something instanceof RegExp) {\n    return something;\n  }\n  if (typeof something === \"object\") {\n    return cloneObj(something);\n  }\n  return something;\n}\nfunction cloneArray(arr) {\n  let r = [];\n  for (let i = 0, len = arr.length; i < len; i++) {\n    r[i] = doClone(arr[i]);\n  }\n  return r;\n}\nfunction cloneObj(obj) {\n  let r = {};\n  for (let key in obj) {\n    r[key] = doClone(obj[key]);\n  }\n  return r;\n}\nfunction mergeObjects(target, ...sources) {\n  sources.forEach((source) => {\n    for (let key in source) {\n      target[key] = source[key];\n    }\n  });\n  return target;\n}\nfunction basename(path) {\n  const idx = ~path.lastIndexOf(\"/\") || ~path.lastIndexOf(\"\\\\\");\n  if (idx === 0) {\n    return path;\n  } else if (~idx === path.length - 1) {\n    return basename(path.substring(0, path.length - 1));\n  } else {\n    return path.substr(~idx + 1);\n  }\n}\nvar CAPTURING_REGEX_SOURCE = /\\$(\\d+)|\\${(\\d+):\\/(downcase|upcase)}/g;\nvar RegexSource = class {\n  static hasCaptures(regexSource) {\n    if (regexSource === null) {\n      return false;\n    }\n    CAPTURING_REGEX_SOURCE.lastIndex = 0;\n    return CAPTURING_REGEX_SOURCE.test(regexSource);\n  }\n  static replaceCaptures(regexSource, captureSource, captureIndices) {\n    return regexSource.replace(CAPTURING_REGEX_SOURCE, (match, index, commandIndex, command) => {\n      let capture = captureIndices[parseInt(index || commandIndex, 10)];\n      if (capture) {\n        let result = captureSource.substring(capture.start, capture.end);\n        while (result[0] === \".\") {\n          result = result.substring(1);\n        }\n        switch (command) {\n          case \"downcase\":\n            return result.toLowerCase();\n          case \"upcase\":\n            return result.toUpperCase();\n          default:\n            return result;\n        }\n      } else {\n        return match;\n      }\n    });\n  }\n};\nfunction strcmp(a, b) {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n  return 0;\n}\nfunction strArrCmp(a, b) {\n  if (a === null && b === null) {\n    return 0;\n  }\n  if (!a) {\n    return -1;\n  }\n  if (!b) {\n    return 1;\n  }\n  let len1 = a.length;\n  let len2 = b.length;\n  if (len1 === len2) {\n    for (let i = 0; i < len1; i++) {\n      let res = strcmp(a[i], b[i]);\n      if (res !== 0) {\n        return res;\n      }\n    }\n    return 0;\n  }\n  return len1 - len2;\n}\nfunction isValidHexColor(hex) {\n  if (/^#[0-9a-f]{6}$/i.test(hex)) {\n    return true;\n  }\n  if (/^#[0-9a-f]{8}$/i.test(hex)) {\n    return true;\n  }\n  if (/^#[0-9a-f]{3}$/i.test(hex)) {\n    return true;\n  }\n  if (/^#[0-9a-f]{4}$/i.test(hex)) {\n    return true;\n  }\n  return false;\n}\nfunction escapeRegExpCharacters(value) {\n  return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, \"\\\\$&\");\n}\nvar CachedFn = class {\n  constructor(fn) {\n    this.fn = fn;\n  }\n  cache = /* @__PURE__ */ new Map();\n  get(key) {\n    if (this.cache.has(key)) {\n      return this.cache.get(key);\n    }\n    const value = this.fn(key);\n    this.cache.set(key, value);\n    return value;\n  }\n};\n\n// src/theme.ts\nvar Theme = class {\n  constructor(_colorMap, _defaults, _root) {\n    this._colorMap = _colorMap;\n    this._defaults = _defaults;\n    this._root = _root;\n  }\n  static createFromRawTheme(source, colorMap) {\n    return this.createFromParsedTheme(parseTheme(source), colorMap);\n  }\n  static createFromParsedTheme(source, colorMap) {\n    return resolveParsedThemeRules(source, colorMap);\n  }\n  _cachedMatchRoot = new CachedFn(\n    (scopeName) => this._root.match(scopeName)\n  );\n  getColorMap() {\n    return this._colorMap.getColorMap();\n  }\n  getDefaults() {\n    return this._defaults;\n  }\n  match(scopePath) {\n    if (scopePath === null) {\n      return this._defaults;\n    }\n    const scopeName = scopePath.scopeName;\n    const matchingTrieElements = this._cachedMatchRoot.get(scopeName);\n    const effectiveRule = matchingTrieElements.find(\n      (v) => _scopePathMatchesParentScopes(scopePath.parent, v.parentScopes)\n    );\n    if (!effectiveRule) {\n      return null;\n    }\n    return new StyleAttributes(\n      effectiveRule.fontStyle,\n      effectiveRule.foreground,\n      effectiveRule.background\n    );\n  }\n};\nvar ScopeStack = class _ScopeStack {\n  constructor(parent, scopeName) {\n    this.parent = parent;\n    this.scopeName = scopeName;\n  }\n  static push(path, scopeNames) {\n    for (const name of scopeNames) {\n      path = new _ScopeStack(path, name);\n    }\n    return path;\n  }\n  static from(...segments) {\n    let result = null;\n    for (let i = 0; i < segments.length; i++) {\n      result = new _ScopeStack(result, segments[i]);\n    }\n    return result;\n  }\n  push(scopeName) {\n    return new _ScopeStack(this, scopeName);\n  }\n  getSegments() {\n    let item = this;\n    const result = [];\n    while (item) {\n      result.push(item.scopeName);\n      item = item.parent;\n    }\n    result.reverse();\n    return result;\n  }\n  toString() {\n    return this.getSegments().join(\" \");\n  }\n  extends(other) {\n    if (this === other) {\n      return true;\n    }\n    if (this.parent === null) {\n      return false;\n    }\n    return this.parent.extends(other);\n  }\n  getExtensionIfDefined(base) {\n    const result = [];\n    let item = this;\n    while (item && item !== base) {\n      result.push(item.scopeName);\n      item = item.parent;\n    }\n    return item === base ? result.reverse() : void 0;\n  }\n};\nfunction _scopePathMatchesParentScopes(scopePath, parentScopes) {\n  if (parentScopes.length === 0) {\n    return true;\n  }\n  for (let index = 0; index < parentScopes.length; index++) {\n    let scopePattern = parentScopes[index];\n    let scopeMustMatch = false;\n    if (scopePattern === \">\") {\n      if (index === parentScopes.length - 1) {\n        return false;\n      }\n      scopePattern = parentScopes[++index];\n      scopeMustMatch = true;\n    }\n    while (scopePath) {\n      if (_matchesScope(scopePath.scopeName, scopePattern)) {\n        break;\n      }\n      if (scopeMustMatch) {\n        return false;\n      }\n      scopePath = scopePath.parent;\n    }\n    if (!scopePath) {\n      return false;\n    }\n    scopePath = scopePath.parent;\n  }\n  return true;\n}\nfunction _matchesScope(scopeName, scopePattern) {\n  return scopePattern === scopeName || scopeName.startsWith(scopePattern) && scopeName[scopePattern.length] === \".\";\n}\nvar StyleAttributes = class {\n  constructor(fontStyle, foregroundId, backgroundId) {\n    this.fontStyle = fontStyle;\n    this.foregroundId = foregroundId;\n    this.backgroundId = backgroundId;\n  }\n};\nfunction parseTheme(source) {\n  if (!source) {\n    return [];\n  }\n  if (!source.settings || !Array.isArray(source.settings)) {\n    return [];\n  }\n  let settings = source.settings;\n  let result = [], resultLen = 0;\n  for (let i = 0, len = settings.length; i < len; i++) {\n    let entry = settings[i];\n    if (!entry.settings) {\n      continue;\n    }\n    let scopes;\n    if (typeof entry.scope === \"string\") {\n      let _scope = entry.scope;\n      _scope = _scope.replace(/^[,]+/, \"\");\n      _scope = _scope.replace(/[,]+$/, \"\");\n      scopes = _scope.split(\",\");\n    } else if (Array.isArray(entry.scope)) {\n      scopes = entry.scope;\n    } else {\n      scopes = [\"\"];\n    }\n    let fontStyle = -1 /* NotSet */;\n    if (typeof entry.settings.fontStyle === \"string\") {\n      fontStyle = 0 /* None */;\n      let segments = entry.settings.fontStyle.split(\" \");\n      for (let j = 0, lenJ = segments.length; j < lenJ; j++) {\n        let segment = segments[j];\n        switch (segment) {\n          case \"italic\":\n            fontStyle = fontStyle | 1 /* Italic */;\n            break;\n          case \"bold\":\n            fontStyle = fontStyle | 2 /* Bold */;\n            break;\n          case \"underline\":\n            fontStyle = fontStyle | 4 /* Underline */;\n            break;\n          case \"strikethrough\":\n            fontStyle = fontStyle | 8 /* Strikethrough */;\n            break;\n        }\n      }\n    }\n    let foreground = null;\n    if (typeof entry.settings.foreground === \"string\" && isValidHexColor(entry.settings.foreground)) {\n      foreground = entry.settings.foreground;\n    }\n    let background = null;\n    if (typeof entry.settings.background === \"string\" && isValidHexColor(entry.settings.background)) {\n      background = entry.settings.background;\n    }\n    for (let j = 0, lenJ = scopes.length; j < lenJ; j++) {\n      let _scope = scopes[j].trim();\n      let segments = _scope.split(\" \");\n      let scope = segments[segments.length - 1];\n      let parentScopes = null;\n      if (segments.length > 1) {\n        parentScopes = segments.slice(0, segments.length - 1);\n        parentScopes.reverse();\n      }\n      result[resultLen++] = new ParsedThemeRule(\n        scope,\n        parentScopes,\n        i,\n        fontStyle,\n        foreground,\n        background\n      );\n    }\n  }\n  return result;\n}\nvar ParsedThemeRule = class {\n  constructor(scope, parentScopes, index, fontStyle, foreground, background) {\n    this.scope = scope;\n    this.parentScopes = parentScopes;\n    this.index = index;\n    this.fontStyle = fontStyle;\n    this.foreground = foreground;\n    this.background = background;\n  }\n};\nvar FontStyle = /* @__PURE__ */ ((FontStyle2) => {\n  FontStyle2[FontStyle2[\"NotSet\"] = -1] = \"NotSet\";\n  FontStyle2[FontStyle2[\"None\"] = 0] = \"None\";\n  FontStyle2[FontStyle2[\"Italic\"] = 1] = \"Italic\";\n  FontStyle2[FontStyle2[\"Bold\"] = 2] = \"Bold\";\n  FontStyle2[FontStyle2[\"Underline\"] = 4] = \"Underline\";\n  FontStyle2[FontStyle2[\"Strikethrough\"] = 8] = \"Strikethrough\";\n  return FontStyle2;\n})(FontStyle || {});\nfunction resolveParsedThemeRules(parsedThemeRules, _colorMap) {\n  parsedThemeRules.sort((a, b) => {\n    let r = strcmp(a.scope, b.scope);\n    if (r !== 0) {\n      return r;\n    }\n    r = strArrCmp(a.parentScopes, b.parentScopes);\n    if (r !== 0) {\n      return r;\n    }\n    return a.index - b.index;\n  });\n  let defaultFontStyle = 0 /* None */;\n  let defaultForeground = \"#000000\";\n  let defaultBackground = \"#ffffff\";\n  while (parsedThemeRules.length >= 1 && parsedThemeRules[0].scope === \"\") {\n    let incomingDefaults = parsedThemeRules.shift();\n    if (incomingDefaults.fontStyle !== -1 /* NotSet */) {\n      defaultFontStyle = incomingDefaults.fontStyle;\n    }\n    if (incomingDefaults.foreground !== null) {\n      defaultForeground = incomingDefaults.foreground;\n    }\n    if (incomingDefaults.background !== null) {\n      defaultBackground = incomingDefaults.background;\n    }\n  }\n  let colorMap = new ColorMap(_colorMap);\n  let defaults = new StyleAttributes(defaultFontStyle, colorMap.getId(defaultForeground), colorMap.getId(defaultBackground));\n  let root = new ThemeTrieElement(new ThemeTrieElementRule(0, null, -1 /* NotSet */, 0, 0), []);\n  for (let i = 0, len = parsedThemeRules.length; i < len; i++) {\n    let rule = parsedThemeRules[i];\n    root.insert(0, rule.scope, rule.parentScopes, rule.fontStyle, colorMap.getId(rule.foreground), colorMap.getId(rule.background));\n  }\n  return new Theme(colorMap, defaults, root);\n}\nvar ColorMap = class {\n  _isFrozen;\n  _lastColorId;\n  _id2color;\n  _color2id;\n  constructor(_colorMap) {\n    this._lastColorId = 0;\n    this._id2color = [];\n    this._color2id = /* @__PURE__ */ Object.create(null);\n    if (Array.isArray(_colorMap)) {\n      this._isFrozen = true;\n      for (let i = 0, len = _colorMap.length; i < len; i++) {\n        this._color2id[_colorMap[i]] = i;\n        this._id2color[i] = _colorMap[i];\n      }\n    } else {\n      this._isFrozen = false;\n    }\n  }\n  getId(color) {\n    if (color === null) {\n      return 0;\n    }\n    color = color.toUpperCase();\n    let value = this._color2id[color];\n    if (value) {\n      return value;\n    }\n    if (this._isFrozen) {\n      throw new Error(`Missing color in color map - ${color}`);\n    }\n    value = ++this._lastColorId;\n    this._color2id[color] = value;\n    this._id2color[value] = color;\n    return value;\n  }\n  getColorMap() {\n    return this._id2color.slice(0);\n  }\n};\nvar emptyParentScopes = Object.freeze([]);\nvar ThemeTrieElementRule = class _ThemeTrieElementRule {\n  scopeDepth;\n  parentScopes;\n  fontStyle;\n  foreground;\n  background;\n  constructor(scopeDepth, parentScopes, fontStyle, foreground, background) {\n    this.scopeDepth = scopeDepth;\n    this.parentScopes = parentScopes || emptyParentScopes;\n    this.fontStyle = fontStyle;\n    this.foreground = foreground;\n    this.background = background;\n  }\n  clone() {\n    return new _ThemeTrieElementRule(this.scopeDepth, this.parentScopes, this.fontStyle, this.foreground, this.background);\n  }\n  static cloneArr(arr) {\n    let r = [];\n    for (let i = 0, len = arr.length; i < len; i++) {\n      r[i] = arr[i].clone();\n    }\n    return r;\n  }\n  acceptOverwrite(scopeDepth, fontStyle, foreground, background) {\n    if (this.scopeDepth > scopeDepth) {\n      console.log(\"how did this happen?\");\n    } else {\n      this.scopeDepth = scopeDepth;\n    }\n    if (fontStyle !== -1 /* NotSet */) {\n      this.fontStyle = fontStyle;\n    }\n    if (foreground !== 0) {\n      this.foreground = foreground;\n    }\n    if (background !== 0) {\n      this.background = background;\n    }\n  }\n};\nvar ThemeTrieElement = class _ThemeTrieElement {\n  constructor(_mainRule, rulesWithParentScopes = [], _children = {}) {\n    this._mainRule = _mainRule;\n    this._children = _children;\n    this._rulesWithParentScopes = rulesWithParentScopes;\n  }\n  _rulesWithParentScopes;\n  static _cmpBySpecificity(a, b) {\n    if (a.scopeDepth !== b.scopeDepth) {\n      return b.scopeDepth - a.scopeDepth;\n    }\n    let aParentIndex = 0;\n    let bParentIndex = 0;\n    while (true) {\n      if (a.parentScopes[aParentIndex] === \">\") {\n        aParentIndex++;\n      }\n      if (b.parentScopes[bParentIndex] === \">\") {\n        bParentIndex++;\n      }\n      if (aParentIndex >= a.parentScopes.length || bParentIndex >= b.parentScopes.length) {\n        break;\n      }\n      const parentScopeLengthDiff = b.parentScopes[bParentIndex].length - a.parentScopes[aParentIndex].length;\n      if (parentScopeLengthDiff !== 0) {\n        return parentScopeLengthDiff;\n      }\n      aParentIndex++;\n      bParentIndex++;\n    }\n    return b.parentScopes.length - a.parentScopes.length;\n  }\n  match(scope) {\n    if (scope !== \"\") {\n      let dotIndex = scope.indexOf(\".\");\n      let head;\n      let tail;\n      if (dotIndex === -1) {\n        head = scope;\n        tail = \"\";\n      } else {\n        head = scope.substring(0, dotIndex);\n        tail = scope.substring(dotIndex + 1);\n      }\n      if (this._children.hasOwnProperty(head)) {\n        return this._children[head].match(tail);\n      }\n    }\n    const rules = this._rulesWithParentScopes.concat(this._mainRule);\n    rules.sort(_ThemeTrieElement._cmpBySpecificity);\n    return rules;\n  }\n  insert(scopeDepth, scope, parentScopes, fontStyle, foreground, background) {\n    if (scope === \"\") {\n      this._doInsertHere(scopeDepth, parentScopes, fontStyle, foreground, background);\n      return;\n    }\n    let dotIndex = scope.indexOf(\".\");\n    let head;\n    let tail;\n    if (dotIndex === -1) {\n      head = scope;\n      tail = \"\";\n    } else {\n      head = scope.substring(0, dotIndex);\n      tail = scope.substring(dotIndex + 1);\n    }\n    let child;\n    if (this._children.hasOwnProperty(head)) {\n      child = this._children[head];\n    } else {\n      child = new _ThemeTrieElement(this._mainRule.clone(), ThemeTrieElementRule.cloneArr(this._rulesWithParentScopes));\n      this._children[head] = child;\n    }\n    child.insert(scopeDepth + 1, tail, parentScopes, fontStyle, foreground, background);\n  }\n  _doInsertHere(scopeDepth, parentScopes, fontStyle, foreground, background) {\n    if (parentScopes === null) {\n      this._mainRule.acceptOverwrite(scopeDepth, fontStyle, foreground, background);\n      return;\n    }\n    for (let i = 0, len = this._rulesWithParentScopes.length; i < len; i++) {\n      let rule = this._rulesWithParentScopes[i];\n      if (strArrCmp(rule.parentScopes, parentScopes) === 0) {\n        rule.acceptOverwrite(scopeDepth, fontStyle, foreground, background);\n        return;\n      }\n    }\n    if (fontStyle === -1 /* NotSet */) {\n      fontStyle = this._mainRule.fontStyle;\n    }\n    if (foreground === 0) {\n      foreground = this._mainRule.foreground;\n    }\n    if (background === 0) {\n      background = this._mainRule.background;\n    }\n    this._rulesWithParentScopes.push(new ThemeTrieElementRule(scopeDepth, parentScopes, fontStyle, foreground, background));\n  }\n};\n\n// src/encodedTokenAttributes.ts\nvar EncodedTokenMetadata = class _EncodedTokenMetadata {\n  static toBinaryStr(encodedTokenAttributes) {\n    return encodedTokenAttributes.toString(2).padStart(32, \"0\");\n  }\n  static print(encodedTokenAttributes) {\n    const languageId = _EncodedTokenMetadata.getLanguageId(encodedTokenAttributes);\n    const tokenType = _EncodedTokenMetadata.getTokenType(encodedTokenAttributes);\n    const fontStyle = _EncodedTokenMetadata.getFontStyle(encodedTokenAttributes);\n    const foreground = _EncodedTokenMetadata.getForeground(encodedTokenAttributes);\n    const background = _EncodedTokenMetadata.getBackground(encodedTokenAttributes);\n    console.log({\n      languageId,\n      tokenType,\n      fontStyle,\n      foreground,\n      background\n    });\n  }\n  static getLanguageId(encodedTokenAttributes) {\n    return (encodedTokenAttributes & 255 /* LANGUAGEID_MASK */) >>> 0 /* LANGUAGEID_OFFSET */;\n  }\n  static getTokenType(encodedTokenAttributes) {\n    return (encodedTokenAttributes & 768 /* TOKEN_TYPE_MASK */) >>> 8 /* TOKEN_TYPE_OFFSET */;\n  }\n  static containsBalancedBrackets(encodedTokenAttributes) {\n    return (encodedTokenAttributes & 1024 /* BALANCED_BRACKETS_MASK */) !== 0;\n  }\n  static getFontStyle(encodedTokenAttributes) {\n    return (encodedTokenAttributes & 30720 /* FONT_STYLE_MASK */) >>> 11 /* FONT_STYLE_OFFSET */;\n  }\n  static getForeground(encodedTokenAttributes) {\n    return (encodedTokenAttributes & 16744448 /* FOREGROUND_MASK */) >>> 15 /* FOREGROUND_OFFSET */;\n  }\n  static getBackground(encodedTokenAttributes) {\n    return (encodedTokenAttributes & 4278190080 /* BACKGROUND_MASK */) >>> 24 /* BACKGROUND_OFFSET */;\n  }\n  /**\n   * Updates the fields in `metadata`.\n   * A value of `0`, `NotSet` or `null` indicates that the corresponding field should be left as is.\n   */\n  static set(encodedTokenAttributes, languageId, tokenType, containsBalancedBrackets, fontStyle, foreground, background) {\n    let _languageId = _EncodedTokenMetadata.getLanguageId(encodedTokenAttributes);\n    let _tokenType = _EncodedTokenMetadata.getTokenType(encodedTokenAttributes);\n    let _containsBalancedBracketsBit = _EncodedTokenMetadata.containsBalancedBrackets(encodedTokenAttributes) ? 1 : 0;\n    let _fontStyle = _EncodedTokenMetadata.getFontStyle(encodedTokenAttributes);\n    let _foreground = _EncodedTokenMetadata.getForeground(encodedTokenAttributes);\n    let _background = _EncodedTokenMetadata.getBackground(encodedTokenAttributes);\n    if (languageId !== 0) {\n      _languageId = languageId;\n    }\n    if (tokenType !== 8 /* NotSet */) {\n      _tokenType = fromOptionalTokenType(tokenType);\n    }\n    if (containsBalancedBrackets !== null) {\n      _containsBalancedBracketsBit = containsBalancedBrackets ? 1 : 0;\n    }\n    if (fontStyle !== -1 /* NotSet */) {\n      _fontStyle = fontStyle;\n    }\n    if (foreground !== 0) {\n      _foreground = foreground;\n    }\n    if (background !== 0) {\n      _background = background;\n    }\n    return (_languageId << 0 /* LANGUAGEID_OFFSET */ | _tokenType << 8 /* TOKEN_TYPE_OFFSET */ | _containsBalancedBracketsBit << 10 /* BALANCED_BRACKETS_OFFSET */ | _fontStyle << 11 /* FONT_STYLE_OFFSET */ | _foreground << 15 /* FOREGROUND_OFFSET */ | _background << 24 /* BACKGROUND_OFFSET */) >>> 0;\n  }\n};\nfunction toOptionalTokenType(standardType) {\n  return standardType;\n}\nfunction fromOptionalTokenType(standardType) {\n  return standardType;\n}\n\n// src/matcher.ts\nfunction createMatchers(selector, matchesName) {\n  const results = [];\n  const tokenizer = newTokenizer(selector);\n  let token = tokenizer.next();\n  while (token !== null) {\n    let priority = 0;\n    if (token.length === 2 && token.charAt(1) === \":\") {\n      switch (token.charAt(0)) {\n        case \"R\":\n          priority = 1;\n          break;\n        case \"L\":\n          priority = -1;\n          break;\n        default:\n          console.log(`Unknown priority ${token} in scope selector`);\n      }\n      token = tokenizer.next();\n    }\n    let matcher = parseConjunction();\n    results.push({ matcher, priority });\n    if (token !== \",\") {\n      break;\n    }\n    token = tokenizer.next();\n  }\n  return results;\n  function parseOperand() {\n    if (token === \"-\") {\n      token = tokenizer.next();\n      const expressionToNegate = parseOperand();\n      return (matcherInput) => !!expressionToNegate && !expressionToNegate(matcherInput);\n    }\n    if (token === \"(\") {\n      token = tokenizer.next();\n      const expressionInParents = parseInnerExpression();\n      if (token === \")\") {\n        token = tokenizer.next();\n      }\n      return expressionInParents;\n    }\n    if (isIdentifier(token)) {\n      const identifiers = [];\n      do {\n        identifiers.push(token);\n        token = tokenizer.next();\n      } while (isIdentifier(token));\n      return (matcherInput) => matchesName(identifiers, matcherInput);\n    }\n    return null;\n  }\n  function parseConjunction() {\n    const matchers = [];\n    let matcher = parseOperand();\n    while (matcher) {\n      matchers.push(matcher);\n      matcher = parseOperand();\n    }\n    return (matcherInput) => matchers.every((matcher2) => matcher2(matcherInput));\n  }\n  function parseInnerExpression() {\n    const matchers = [];\n    let matcher = parseConjunction();\n    while (matcher) {\n      matchers.push(matcher);\n      if (token === \"|\" || token === \",\") {\n        do {\n          token = tokenizer.next();\n        } while (token === \"|\" || token === \",\");\n      } else {\n        break;\n      }\n      matcher = parseConjunction();\n    }\n    return (matcherInput) => matchers.some((matcher2) => matcher2(matcherInput));\n  }\n}\nfunction isIdentifier(token) {\n  return !!token && !!token.match(/[\\w\\.:]+/);\n}\nfunction newTokenizer(input) {\n  let regex = /([LR]:|[\\w\\.:][\\w\\.:\\-]*|[\\,\\|\\-\\(\\)])/g;\n  let match = regex.exec(input);\n  return {\n    next: () => {\n      if (!match) {\n        return null;\n      }\n      const res = match[0];\n      match = regex.exec(input);\n      return res;\n    }\n  };\n}\n\n// src/onigLib.ts\nvar FindOption = /* @__PURE__ */ ((FindOption2) => {\n  FindOption2[FindOption2[\"None\"] = 0] = \"None\";\n  FindOption2[FindOption2[\"NotBeginString\"] = 1] = \"NotBeginString\";\n  FindOption2[FindOption2[\"NotEndString\"] = 2] = \"NotEndString\";\n  FindOption2[FindOption2[\"NotBeginPosition\"] = 4] = \"NotBeginPosition\";\n  FindOption2[FindOption2[\"DebugCall\"] = 8] = \"DebugCall\";\n  return FindOption2;\n})(FindOption || {});\nfunction disposeOnigString(str) {\n  if (typeof str.dispose === \"function\") {\n    str.dispose();\n  }\n}\n\n// src/grammar/grammarDependencies.ts\nvar TopLevelRuleReference = class {\n  constructor(scopeName) {\n    this.scopeName = scopeName;\n  }\n  toKey() {\n    return this.scopeName;\n  }\n};\nvar TopLevelRepositoryRuleReference = class {\n  constructor(scopeName, ruleName) {\n    this.scopeName = scopeName;\n    this.ruleName = ruleName;\n  }\n  toKey() {\n    return `${this.scopeName}#${this.ruleName}`;\n  }\n};\nvar ExternalReferenceCollector = class {\n  _references = [];\n  _seenReferenceKeys = /* @__PURE__ */ new Set();\n  get references() {\n    return this._references;\n  }\n  visitedRule = /* @__PURE__ */ new Set();\n  add(reference) {\n    const key = reference.toKey();\n    if (this._seenReferenceKeys.has(key)) {\n      return;\n    }\n    this._seenReferenceKeys.add(key);\n    this._references.push(reference);\n  }\n};\nvar ScopeDependencyProcessor = class {\n  constructor(repo, initialScopeName) {\n    this.repo = repo;\n    this.initialScopeName = initialScopeName;\n    this.seenFullScopeRequests.add(this.initialScopeName);\n    this.Q = [new TopLevelRuleReference(this.initialScopeName)];\n  }\n  seenFullScopeRequests = /* @__PURE__ */ new Set();\n  seenPartialScopeRequests = /* @__PURE__ */ new Set();\n  Q;\n  processQueue() {\n    const q = this.Q;\n    this.Q = [];\n    const deps = new ExternalReferenceCollector();\n    for (const dep of q) {\n      collectReferencesOfReference(dep, this.initialScopeName, this.repo, deps);\n    }\n    for (const dep of deps.references) {\n      if (dep instanceof TopLevelRuleReference) {\n        if (this.seenFullScopeRequests.has(dep.scopeName)) {\n          continue;\n        }\n        this.seenFullScopeRequests.add(dep.scopeName);\n        this.Q.push(dep);\n      } else {\n        if (this.seenFullScopeRequests.has(dep.scopeName)) {\n          continue;\n        }\n        if (this.seenPartialScopeRequests.has(dep.toKey())) {\n          continue;\n        }\n        this.seenPartialScopeRequests.add(dep.toKey());\n        this.Q.push(dep);\n      }\n    }\n  }\n};\nfunction collectReferencesOfReference(reference, baseGrammarScopeName, repo, result) {\n  const selfGrammar = repo.lookup(reference.scopeName);\n  if (!selfGrammar) {\n    if (reference.scopeName === baseGrammarScopeName) {\n      throw new Error(`No grammar provided for <${baseGrammarScopeName}>`);\n    }\n    return;\n  }\n  const baseGrammar = repo.lookup(baseGrammarScopeName);\n  if (reference instanceof TopLevelRuleReference) {\n    collectExternalReferencesInTopLevelRule({ baseGrammar, selfGrammar }, result);\n  } else {\n    collectExternalReferencesInTopLevelRepositoryRule(\n      reference.ruleName,\n      { baseGrammar, selfGrammar, repository: selfGrammar.repository },\n      result\n    );\n  }\n  const injections = repo.injections(reference.scopeName);\n  if (injections) {\n    for (const injection of injections) {\n      result.add(new TopLevelRuleReference(injection));\n    }\n  }\n}\nfunction collectExternalReferencesInTopLevelRepositoryRule(ruleName, context, result) {\n  if (context.repository && context.repository[ruleName]) {\n    const rule = context.repository[ruleName];\n    collectExternalReferencesInRules([rule], context, result);\n  }\n}\nfunction collectExternalReferencesInTopLevelRule(context, result) {\n  if (context.selfGrammar.patterns && Array.isArray(context.selfGrammar.patterns)) {\n    collectExternalReferencesInRules(\n      context.selfGrammar.patterns,\n      { ...context, repository: context.selfGrammar.repository },\n      result\n    );\n  }\n  if (context.selfGrammar.injections) {\n    collectExternalReferencesInRules(\n      Object.values(context.selfGrammar.injections),\n      { ...context, repository: context.selfGrammar.repository },\n      result\n    );\n  }\n}\nfunction collectExternalReferencesInRules(rules, context, result) {\n  for (const rule of rules) {\n    if (result.visitedRule.has(rule)) {\n      continue;\n    }\n    result.visitedRule.add(rule);\n    const patternRepository = rule.repository ? mergeObjects({}, context.repository, rule.repository) : context.repository;\n    if (Array.isArray(rule.patterns)) {\n      collectExternalReferencesInRules(rule.patterns, { ...context, repository: patternRepository }, result);\n    }\n    const include = rule.include;\n    if (!include) {\n      continue;\n    }\n    const reference = parseInclude(include);\n    switch (reference.kind) {\n      case 0 /* Base */:\n        collectExternalReferencesInTopLevelRule({ ...context, selfGrammar: context.baseGrammar }, result);\n        break;\n      case 1 /* Self */:\n        collectExternalReferencesInTopLevelRule(context, result);\n        break;\n      case 2 /* RelativeReference */:\n        collectExternalReferencesInTopLevelRepositoryRule(reference.ruleName, { ...context, repository: patternRepository }, result);\n        break;\n      case 3 /* TopLevelReference */:\n      case 4 /* TopLevelRepositoryReference */:\n        const selfGrammar = reference.scopeName === context.selfGrammar.scopeName ? context.selfGrammar : reference.scopeName === context.baseGrammar.scopeName ? context.baseGrammar : void 0;\n        if (selfGrammar) {\n          const newContext = { baseGrammar: context.baseGrammar, selfGrammar, repository: patternRepository };\n          if (reference.kind === 4 /* TopLevelRepositoryReference */) {\n            collectExternalReferencesInTopLevelRepositoryRule(reference.ruleName, newContext, result);\n          } else {\n            collectExternalReferencesInTopLevelRule(newContext, result);\n          }\n        } else {\n          if (reference.kind === 4 /* TopLevelRepositoryReference */) {\n            result.add(new TopLevelRepositoryRuleReference(reference.scopeName, reference.ruleName));\n          } else {\n            result.add(new TopLevelRuleReference(reference.scopeName));\n          }\n        }\n        break;\n    }\n  }\n}\nvar BaseReference = class {\n  kind = 0 /* Base */;\n};\nvar SelfReference = class {\n  kind = 1 /* Self */;\n};\nvar RelativeReference = class {\n  constructor(ruleName) {\n    this.ruleName = ruleName;\n  }\n  kind = 2 /* RelativeReference */;\n};\nvar TopLevelReference = class {\n  constructor(scopeName) {\n    this.scopeName = scopeName;\n  }\n  kind = 3 /* TopLevelReference */;\n};\nvar TopLevelRepositoryReference = class {\n  constructor(scopeName, ruleName) {\n    this.scopeName = scopeName;\n    this.ruleName = ruleName;\n  }\n  kind = 4 /* TopLevelRepositoryReference */;\n};\nfunction parseInclude(include) {\n  if (include === \"$base\") {\n    return new BaseReference();\n  } else if (include === \"$self\") {\n    return new SelfReference();\n  }\n  const indexOfSharp = include.indexOf(\"#\");\n  if (indexOfSharp === -1) {\n    return new TopLevelReference(include);\n  } else if (indexOfSharp === 0) {\n    return new RelativeReference(include.substring(1));\n  } else {\n    const scopeName = include.substring(0, indexOfSharp);\n    const ruleName = include.substring(indexOfSharp + 1);\n    return new TopLevelRepositoryReference(scopeName, ruleName);\n  }\n}\n\n// src/rule.ts\nvar HAS_BACK_REFERENCES = /\\\\(\\d+)/;\nvar BACK_REFERENCING_END = /\\\\(\\d+)/g;\nvar ruleIdSymbol = Symbol(\"RuleId\");\nvar endRuleId = -1;\nvar whileRuleId = -2;\nfunction ruleIdFromNumber(id) {\n  return id;\n}\nfunction ruleIdToNumber(id) {\n  return id;\n}\nvar Rule = class {\n  $location;\n  id;\n  _nameIsCapturing;\n  _name;\n  _contentNameIsCapturing;\n  _contentName;\n  constructor($location, id, name, contentName) {\n    this.$location = $location;\n    this.id = id;\n    this._name = name || null;\n    this._nameIsCapturing = RegexSource.hasCaptures(this._name);\n    this._contentName = contentName || null;\n    this._contentNameIsCapturing = RegexSource.hasCaptures(this._contentName);\n  }\n  get debugName() {\n    const location = this.$location ? `${basename(this.$location.filename)}:${this.$location.line}` : \"unknown\";\n    return `${this.constructor.name}#${this.id} @ ${location}`;\n  }\n  getName(lineText, captureIndices) {\n    if (!this._nameIsCapturing || this._name === null || lineText === null || captureIndices === null) {\n      return this._name;\n    }\n    return RegexSource.replaceCaptures(this._name, lineText, captureIndices);\n  }\n  getContentName(lineText, captureIndices) {\n    if (!this._contentNameIsCapturing || this._contentName === null) {\n      return this._contentName;\n    }\n    return RegexSource.replaceCaptures(this._contentName, lineText, captureIndices);\n  }\n};\nvar CaptureRule = class extends Rule {\n  retokenizeCapturedWithRuleId;\n  constructor($location, id, name, contentName, retokenizeCapturedWithRuleId) {\n    super($location, id, name, contentName);\n    this.retokenizeCapturedWithRuleId = retokenizeCapturedWithRuleId;\n  }\n  dispose() {\n  }\n  collectPatterns(grammar, out) {\n    throw new Error(\"Not supported!\");\n  }\n  compile(grammar, endRegexSource) {\n    throw new Error(\"Not supported!\");\n  }\n  compileAG(grammar, endRegexSource, allowA, allowG) {\n    throw new Error(\"Not supported!\");\n  }\n};\nvar MatchRule = class extends Rule {\n  _match;\n  captures;\n  _cachedCompiledPatterns;\n  constructor($location, id, name, match, captures) {\n    super($location, id, name, null);\n    this._match = new RegExpSource(match, this.id);\n    this.captures = captures;\n    this._cachedCompiledPatterns = null;\n  }\n  dispose() {\n    if (this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns.dispose();\n      this._cachedCompiledPatterns = null;\n    }\n  }\n  get debugMatchRegExp() {\n    return `${this._match.source}`;\n  }\n  collectPatterns(grammar, out) {\n    out.push(this._match);\n  }\n  compile(grammar, endRegexSource) {\n    return this._getCachedCompiledPatterns(grammar).compile(grammar);\n  }\n  compileAG(grammar, endRegexSource, allowA, allowG) {\n    return this._getCachedCompiledPatterns(grammar).compileAG(grammar, allowA, allowG);\n  }\n  _getCachedCompiledPatterns(grammar) {\n    if (!this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns = new RegExpSourceList();\n      this.collectPatterns(grammar, this._cachedCompiledPatterns);\n    }\n    return this._cachedCompiledPatterns;\n  }\n};\nvar IncludeOnlyRule = class extends Rule {\n  hasMissingPatterns;\n  patterns;\n  _cachedCompiledPatterns;\n  constructor($location, id, name, contentName, patterns) {\n    super($location, id, name, contentName);\n    this.patterns = patterns.patterns;\n    this.hasMissingPatterns = patterns.hasMissingPatterns;\n    this._cachedCompiledPatterns = null;\n  }\n  dispose() {\n    if (this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns.dispose();\n      this._cachedCompiledPatterns = null;\n    }\n  }\n  collectPatterns(grammar, out) {\n    for (const pattern of this.patterns) {\n      const rule = grammar.getRule(pattern);\n      rule.collectPatterns(grammar, out);\n    }\n  }\n  compile(grammar, endRegexSource) {\n    return this._getCachedCompiledPatterns(grammar).compile(grammar);\n  }\n  compileAG(grammar, endRegexSource, allowA, allowG) {\n    return this._getCachedCompiledPatterns(grammar).compileAG(grammar, allowA, allowG);\n  }\n  _getCachedCompiledPatterns(grammar) {\n    if (!this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns = new RegExpSourceList();\n      this.collectPatterns(grammar, this._cachedCompiledPatterns);\n    }\n    return this._cachedCompiledPatterns;\n  }\n};\nvar BeginEndRule = class extends Rule {\n  _begin;\n  beginCaptures;\n  _end;\n  endHasBackReferences;\n  endCaptures;\n  applyEndPatternLast;\n  hasMissingPatterns;\n  patterns;\n  _cachedCompiledPatterns;\n  constructor($location, id, name, contentName, begin, beginCaptures, end, endCaptures, applyEndPatternLast, patterns) {\n    super($location, id, name, contentName);\n    this._begin = new RegExpSource(begin, this.id);\n    this.beginCaptures = beginCaptures;\n    this._end = new RegExpSource(end ? end : \"\\uFFFF\", -1);\n    this.endHasBackReferences = this._end.hasBackReferences;\n    this.endCaptures = endCaptures;\n    this.applyEndPatternLast = applyEndPatternLast || false;\n    this.patterns = patterns.patterns;\n    this.hasMissingPatterns = patterns.hasMissingPatterns;\n    this._cachedCompiledPatterns = null;\n  }\n  dispose() {\n    if (this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns.dispose();\n      this._cachedCompiledPatterns = null;\n    }\n  }\n  get debugBeginRegExp() {\n    return `${this._begin.source}`;\n  }\n  get debugEndRegExp() {\n    return `${this._end.source}`;\n  }\n  getEndWithResolvedBackReferences(lineText, captureIndices) {\n    return this._end.resolveBackReferences(lineText, captureIndices);\n  }\n  collectPatterns(grammar, out) {\n    out.push(this._begin);\n  }\n  compile(grammar, endRegexSource) {\n    return this._getCachedCompiledPatterns(grammar, endRegexSource).compile(grammar);\n  }\n  compileAG(grammar, endRegexSource, allowA, allowG) {\n    return this._getCachedCompiledPatterns(grammar, endRegexSource).compileAG(grammar, allowA, allowG);\n  }\n  _getCachedCompiledPatterns(grammar, endRegexSource) {\n    if (!this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns = new RegExpSourceList();\n      for (const pattern of this.patterns) {\n        const rule = grammar.getRule(pattern);\n        rule.collectPatterns(grammar, this._cachedCompiledPatterns);\n      }\n      if (this.applyEndPatternLast) {\n        this._cachedCompiledPatterns.push(this._end.hasBackReferences ? this._end.clone() : this._end);\n      } else {\n        this._cachedCompiledPatterns.unshift(this._end.hasBackReferences ? this._end.clone() : this._end);\n      }\n    }\n    if (this._end.hasBackReferences) {\n      if (this.applyEndPatternLast) {\n        this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length() - 1, endRegexSource);\n      } else {\n        this._cachedCompiledPatterns.setSource(0, endRegexSource);\n      }\n    }\n    return this._cachedCompiledPatterns;\n  }\n};\nvar BeginWhileRule = class extends Rule {\n  _begin;\n  beginCaptures;\n  whileCaptures;\n  _while;\n  whileHasBackReferences;\n  hasMissingPatterns;\n  patterns;\n  _cachedCompiledPatterns;\n  _cachedCompiledWhilePatterns;\n  constructor($location, id, name, contentName, begin, beginCaptures, _while, whileCaptures, patterns) {\n    super($location, id, name, contentName);\n    this._begin = new RegExpSource(begin, this.id);\n    this.beginCaptures = beginCaptures;\n    this.whileCaptures = whileCaptures;\n    this._while = new RegExpSource(_while, whileRuleId);\n    this.whileHasBackReferences = this._while.hasBackReferences;\n    this.patterns = patterns.patterns;\n    this.hasMissingPatterns = patterns.hasMissingPatterns;\n    this._cachedCompiledPatterns = null;\n    this._cachedCompiledWhilePatterns = null;\n  }\n  dispose() {\n    if (this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns.dispose();\n      this._cachedCompiledPatterns = null;\n    }\n    if (this._cachedCompiledWhilePatterns) {\n      this._cachedCompiledWhilePatterns.dispose();\n      this._cachedCompiledWhilePatterns = null;\n    }\n  }\n  get debugBeginRegExp() {\n    return `${this._begin.source}`;\n  }\n  get debugWhileRegExp() {\n    return `${this._while.source}`;\n  }\n  getWhileWithResolvedBackReferences(lineText, captureIndices) {\n    return this._while.resolveBackReferences(lineText, captureIndices);\n  }\n  collectPatterns(grammar, out) {\n    out.push(this._begin);\n  }\n  compile(grammar, endRegexSource) {\n    return this._getCachedCompiledPatterns(grammar).compile(grammar);\n  }\n  compileAG(grammar, endRegexSource, allowA, allowG) {\n    return this._getCachedCompiledPatterns(grammar).compileAG(grammar, allowA, allowG);\n  }\n  _getCachedCompiledPatterns(grammar) {\n    if (!this._cachedCompiledPatterns) {\n      this._cachedCompiledPatterns = new RegExpSourceList();\n      for (const pattern of this.patterns) {\n        const rule = grammar.getRule(pattern);\n        rule.collectPatterns(grammar, this._cachedCompiledPatterns);\n      }\n    }\n    return this._cachedCompiledPatterns;\n  }\n  compileWhile(grammar, endRegexSource) {\n    return this._getCachedCompiledWhilePatterns(grammar, endRegexSource).compile(grammar);\n  }\n  compileWhileAG(grammar, endRegexSource, allowA, allowG) {\n    return this._getCachedCompiledWhilePatterns(grammar, endRegexSource).compileAG(grammar, allowA, allowG);\n  }\n  _getCachedCompiledWhilePatterns(grammar, endRegexSource) {\n    if (!this._cachedCompiledWhilePatterns) {\n      this._cachedCompiledWhilePatterns = new RegExpSourceList();\n      this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences ? this._while.clone() : this._while);\n    }\n    if (this._while.hasBackReferences) {\n      this._cachedCompiledWhilePatterns.setSource(0, endRegexSource ? endRegexSource : \"\\uFFFF\");\n    }\n    return this._cachedCompiledWhilePatterns;\n  }\n};\nvar RuleFactory = class _RuleFactory {\n  static createCaptureRule(helper, $location, name, contentName, retokenizeCapturedWithRuleId) {\n    return helper.registerRule((id) => {\n      return new CaptureRule($location, id, name, contentName, retokenizeCapturedWithRuleId);\n    });\n  }\n  static getCompiledRuleId(desc, helper, repository) {\n    if (!desc.id) {\n      helper.registerRule((id) => {\n        desc.id = id;\n        if (desc.match) {\n          return new MatchRule(\n            desc.$vscodeTextmateLocation,\n            desc.id,\n            desc.name,\n            desc.match,\n            _RuleFactory._compileCaptures(desc.captures, helper, repository)\n          );\n        }\n        if (typeof desc.begin === \"undefined\") {\n          if (desc.repository) {\n            repository = mergeObjects({}, repository, desc.repository);\n          }\n          let patterns = desc.patterns;\n          if (typeof patterns === \"undefined\" && desc.include) {\n            patterns = [{ include: desc.include }];\n          }\n          return new IncludeOnlyRule(\n            desc.$vscodeTextmateLocation,\n            desc.id,\n            desc.name,\n            desc.contentName,\n            _RuleFactory._compilePatterns(patterns, helper, repository)\n          );\n        }\n        if (desc.while) {\n          return new BeginWhileRule(\n            desc.$vscodeTextmateLocation,\n            desc.id,\n            desc.name,\n            desc.contentName,\n            desc.begin,\n            _RuleFactory._compileCaptures(desc.beginCaptures || desc.captures, helper, repository),\n            desc.while,\n            _RuleFactory._compileCaptures(desc.whileCaptures || desc.captures, helper, repository),\n            _RuleFactory._compilePatterns(desc.patterns, helper, repository)\n          );\n        }\n        return new BeginEndRule(\n          desc.$vscodeTextmateLocation,\n          desc.id,\n          desc.name,\n          desc.contentName,\n          desc.begin,\n          _RuleFactory._compileCaptures(desc.beginCaptures || desc.captures, helper, repository),\n          desc.end,\n          _RuleFactory._compileCaptures(desc.endCaptures || desc.captures, helper, repository),\n          desc.applyEndPatternLast,\n          _RuleFactory._compilePatterns(desc.patterns, helper, repository)\n        );\n      });\n    }\n    return desc.id;\n  }\n  static _compileCaptures(captures, helper, repository) {\n    let r = [];\n    if (captures) {\n      let maximumCaptureId = 0;\n      for (const captureId in captures) {\n        if (captureId === \"$vscodeTextmateLocation\") {\n          continue;\n        }\n        const numericCaptureId = parseInt(captureId, 10);\n        if (numericCaptureId > maximumCaptureId) {\n          maximumCaptureId = numericCaptureId;\n        }\n      }\n      for (let i = 0; i <= maximumCaptureId; i++) {\n        r[i] = null;\n      }\n      for (const captureId in captures) {\n        if (captureId === \"$vscodeTextmateLocation\") {\n          continue;\n        }\n        const numericCaptureId = parseInt(captureId, 10);\n        let retokenizeCapturedWithRuleId = 0;\n        if (captures[captureId].patterns) {\n          retokenizeCapturedWithRuleId = _RuleFactory.getCompiledRuleId(captures[captureId], helper, repository);\n        }\n        r[numericCaptureId] = _RuleFactory.createCaptureRule(helper, captures[captureId].$vscodeTextmateLocation, captures[captureId].name, captures[captureId].contentName, retokenizeCapturedWithRuleId);\n      }\n    }\n    return r;\n  }\n  static _compilePatterns(patterns, helper, repository) {\n    let r = [];\n    if (patterns) {\n      for (let i = 0, len = patterns.length; i < len; i++) {\n        const pattern = patterns[i];\n        let ruleId = -1;\n        if (pattern.include) {\n          const reference = parseInclude(pattern.include);\n          switch (reference.kind) {\n            case 0 /* Base */:\n            case 1 /* Self */:\n              ruleId = _RuleFactory.getCompiledRuleId(repository[pattern.include], helper, repository);\n              break;\n            case 2 /* RelativeReference */:\n              let localIncludedRule = repository[reference.ruleName];\n              if (localIncludedRule) {\n                ruleId = _RuleFactory.getCompiledRuleId(localIncludedRule, helper, repository);\n              } else {\n              }\n              break;\n            case 3 /* TopLevelReference */:\n            case 4 /* TopLevelRepositoryReference */:\n              const externalGrammarName = reference.scopeName;\n              const externalGrammarInclude = reference.kind === 4 /* TopLevelRepositoryReference */ ? reference.ruleName : null;\n              const externalGrammar = helper.getExternalGrammar(externalGrammarName, repository);\n              if (externalGrammar) {\n                if (externalGrammarInclude) {\n                  let externalIncludedRule = externalGrammar.repository[externalGrammarInclude];\n                  if (externalIncludedRule) {\n                    ruleId = _RuleFactory.getCompiledRuleId(externalIncludedRule, helper, externalGrammar.repository);\n                  } else {\n                  }\n                } else {\n                  ruleId = _RuleFactory.getCompiledRuleId(externalGrammar.repository.$self, helper, externalGrammar.repository);\n                }\n              } else {\n              }\n              break;\n          }\n        } else {\n          ruleId = _RuleFactory.getCompiledRuleId(pattern, helper, repository);\n        }\n        if (ruleId !== -1) {\n          const rule = helper.getRule(ruleId);\n          let skipRule = false;\n          if (rule instanceof IncludeOnlyRule || rule instanceof BeginEndRule || rule instanceof BeginWhileRule) {\n            if (rule.hasMissingPatterns && rule.patterns.length === 0) {\n              skipRule = true;\n            }\n          }\n          if (skipRule) {\n            continue;\n          }\n          r.push(ruleId);\n        }\n      }\n    }\n    return {\n      patterns: r,\n      hasMissingPatterns: (patterns ? patterns.length : 0) !== r.length\n    };\n  }\n};\nvar RegExpSource = class _RegExpSource {\n  source;\n  ruleId;\n  hasAnchor;\n  hasBackReferences;\n  _anchorCache;\n  constructor(regExpSource, ruleId) {\n    if (regExpSource && typeof regExpSource === \"string\") {\n      const len = regExpSource.length;\n      let lastPushedPos = 0;\n      let output = [];\n      let hasAnchor = false;\n      for (let pos = 0; pos < len; pos++) {\n        const ch = regExpSource.charAt(pos);\n        if (ch === \"\\\\\") {\n          if (pos + 1 < len) {\n            const nextCh = regExpSource.charAt(pos + 1);\n            if (nextCh === \"z\") {\n              output.push(regExpSource.substring(lastPushedPos, pos));\n              output.push(\"$(?!\\\\n)(?<!\\\\n)\");\n              lastPushedPos = pos + 2;\n            } else if (nextCh === \"A\" || nextCh === \"G\") {\n              hasAnchor = true;\n            }\n            pos++;\n          }\n        }\n      }\n      this.hasAnchor = hasAnchor;\n      if (lastPushedPos === 0) {\n        this.source = regExpSource;\n      } else {\n        output.push(regExpSource.substring(lastPushedPos, len));\n        this.source = output.join(\"\");\n      }\n    } else {\n      this.hasAnchor = false;\n      this.source = regExpSource;\n    }\n    if (this.hasAnchor) {\n      this._anchorCache = this._buildAnchorCache();\n    } else {\n      this._anchorCache = null;\n    }\n    this.ruleId = ruleId;\n    if (typeof this.source === \"string\") {\n      this.hasBackReferences = HAS_BACK_REFERENCES.test(this.source);\n    } else {\n      this.hasBackReferences = false;\n    }\n  }\n  clone() {\n    return new _RegExpSource(this.source, this.ruleId);\n  }\n  setSource(newSource) {\n    if (this.source === newSource) {\n      return;\n    }\n    this.source = newSource;\n    if (this.hasAnchor) {\n      this._anchorCache = this._buildAnchorCache();\n    }\n  }\n  resolveBackReferences(lineText, captureIndices) {\n    if (typeof this.source !== \"string\") {\n      throw new Error(\"This method should only be called if the source is a string\");\n    }\n    let capturedValues = captureIndices.map((capture) => {\n      return lineText.substring(capture.start, capture.end);\n    });\n    BACK_REFERENCING_END.lastIndex = 0;\n    return this.source.replace(BACK_REFERENCING_END, (match, g1) => {\n      return escapeRegExpCharacters(capturedValues[parseInt(g1, 10)] || \"\");\n    });\n  }\n  _buildAnchorCache() {\n    if (typeof this.source !== \"string\") {\n      throw new Error(\"This method should only be called if the source is a string\");\n    }\n    let A0_G0_result = [];\n    let A0_G1_result = [];\n    let A1_G0_result = [];\n    let A1_G1_result = [];\n    let pos, len, ch, nextCh;\n    for (pos = 0, len = this.source.length; pos < len; pos++) {\n      ch = this.source.charAt(pos);\n      A0_G0_result[pos] = ch;\n      A0_G1_result[pos] = ch;\n      A1_G0_result[pos] = ch;\n      A1_G1_result[pos] = ch;\n      if (ch === \"\\\\\") {\n        if (pos + 1 < len) {\n          nextCh = this.source.charAt(pos + 1);\n          if (nextCh === \"A\") {\n            A0_G0_result[pos + 1] = \"\\uFFFF\";\n            A0_G1_result[pos + 1] = \"\\uFFFF\";\n            A1_G0_result[pos + 1] = \"A\";\n            A1_G1_result[pos + 1] = \"A\";\n          } else if (nextCh === \"G\") {\n            A0_G0_result[pos + 1] = \"\\uFFFF\";\n            A0_G1_result[pos + 1] = \"G\";\n            A1_G0_result[pos + 1] = \"\\uFFFF\";\n            A1_G1_result[pos + 1] = \"G\";\n          } else {\n            A0_G0_result[pos + 1] = nextCh;\n            A0_G1_result[pos + 1] = nextCh;\n            A1_G0_result[pos + 1] = nextCh;\n            A1_G1_result[pos + 1] = nextCh;\n          }\n          pos++;\n        }\n      }\n    }\n    return {\n      A0_G0: A0_G0_result.join(\"\"),\n      A0_G1: A0_G1_result.join(\"\"),\n      A1_G0: A1_G0_result.join(\"\"),\n      A1_G1: A1_G1_result.join(\"\")\n    };\n  }\n  resolveAnchors(allowA, allowG) {\n    if (!this.hasAnchor || !this._anchorCache || typeof this.source !== \"string\") {\n      return this.source;\n    }\n    if (allowA) {\n      if (allowG) {\n        return this._anchorCache.A1_G1;\n      } else {\n        return this._anchorCache.A1_G0;\n      }\n    } else {\n      if (allowG) {\n        return this._anchorCache.A0_G1;\n      } else {\n        return this._anchorCache.A0_G0;\n      }\n    }\n  }\n};\nvar RegExpSourceList = class {\n  _items;\n  _hasAnchors;\n  _cached;\n  _anchorCache;\n  constructor() {\n    this._items = [];\n    this._hasAnchors = false;\n    this._cached = null;\n    this._anchorCache = {\n      A0_G0: null,\n      A0_G1: null,\n      A1_G0: null,\n      A1_G1: null\n    };\n  }\n  dispose() {\n    this._disposeCaches();\n  }\n  _disposeCaches() {\n    if (this._cached) {\n      this._cached.dispose();\n      this._cached = null;\n    }\n    if (this._anchorCache.A0_G0) {\n      this._anchorCache.A0_G0.dispose();\n      this._anchorCache.A0_G0 = null;\n    }\n    if (this._anchorCache.A0_G1) {\n      this._anchorCache.A0_G1.dispose();\n      this._anchorCache.A0_G1 = null;\n    }\n    if (this._anchorCache.A1_G0) {\n      this._anchorCache.A1_G0.dispose();\n      this._anchorCache.A1_G0 = null;\n    }\n    if (this._anchorCache.A1_G1) {\n      this._anchorCache.A1_G1.dispose();\n      this._anchorCache.A1_G1 = null;\n    }\n  }\n  push(item) {\n    this._items.push(item);\n    this._hasAnchors = this._hasAnchors || item.hasAnchor;\n  }\n  unshift(item) {\n    this._items.unshift(item);\n    this._hasAnchors = this._hasAnchors || item.hasAnchor;\n  }\n  length() {\n    return this._items.length;\n  }\n  setSource(index, newSource) {\n    if (this._items[index].source !== newSource) {\n      this._disposeCaches();\n      this._items[index].setSource(newSource);\n    }\n  }\n  compile(onigLib) {\n    if (!this._cached) {\n      let regExps = this._items.map((e) => e.source);\n      this._cached = new CompiledRule(onigLib, regExps, this._items.map((e) => e.ruleId));\n    }\n    return this._cached;\n  }\n  compileAG(onigLib, allowA, allowG) {\n    if (!this._hasAnchors) {\n      return this.compile(onigLib);\n    } else {\n      if (allowA) {\n        if (allowG) {\n          if (!this._anchorCache.A1_G1) {\n            this._anchorCache.A1_G1 = this._resolveAnchors(onigLib, allowA, allowG);\n          }\n          return this._anchorCache.A1_G1;\n        } else {\n          if (!this._anchorCache.A1_G0) {\n            this._anchorCache.A1_G0 = this._resolveAnchors(onigLib, allowA, allowG);\n          }\n          return this._anchorCache.A1_G0;\n        }\n      } else {\n        if (allowG) {\n          if (!this._anchorCache.A0_G1) {\n            this._anchorCache.A0_G1 = this._resolveAnchors(onigLib, allowA, allowG);\n          }\n          return this._anchorCache.A0_G1;\n        } else {\n          if (!this._anchorCache.A0_G0) {\n            this._anchorCache.A0_G0 = this._resolveAnchors(onigLib, allowA, allowG);\n          }\n          return this._anchorCache.A0_G0;\n        }\n      }\n    }\n  }\n  _resolveAnchors(onigLib, allowA, allowG) {\n    let regExps = this._items.map((e) => e.resolveAnchors(allowA, allowG));\n    return new CompiledRule(onigLib, regExps, this._items.map((e) => e.ruleId));\n  }\n};\nvar CompiledRule = class {\n  constructor(onigLib, regExps, rules) {\n    this.regExps = regExps;\n    this.rules = rules;\n    this.scanner = onigLib.createOnigScanner(regExps);\n  }\n  scanner;\n  dispose() {\n    if (typeof this.scanner.dispose === \"function\") {\n      this.scanner.dispose();\n    }\n  }\n  toString() {\n    const r = [];\n    for (let i = 0, len = this.rules.length; i < len; i++) {\n      r.push(\"   - \" + this.rules[i] + \": \" + this.regExps[i]);\n    }\n    return r.join(\"\\n\");\n  }\n  findNextMatchSync(string, startPosition, options) {\n    const result = this.scanner.findNextMatchSync(string, startPosition, options);\n    if (!result) {\n      return null;\n    }\n    return {\n      ruleId: this.rules[result.index],\n      captureIndices: result.captureIndices\n    };\n  }\n};\n\n// src/grammar/basicScopesAttributeProvider.ts\nvar BasicScopeAttributes = class {\n  constructor(languageId, tokenType) {\n    this.languageId = languageId;\n    this.tokenType = tokenType;\n  }\n};\nvar BasicScopeAttributesProvider = class _BasicScopeAttributesProvider {\n  _defaultAttributes;\n  _embeddedLanguagesMatcher;\n  constructor(initialLanguageId, embeddedLanguages) {\n    this._defaultAttributes = new BasicScopeAttributes(initialLanguageId, 8 /* NotSet */);\n    this._embeddedLanguagesMatcher = new ScopeMatcher(Object.entries(embeddedLanguages || {}));\n  }\n  getDefaultAttributes() {\n    return this._defaultAttributes;\n  }\n  getBasicScopeAttributes(scopeName) {\n    if (scopeName === null) {\n      return _BasicScopeAttributesProvider._NULL_SCOPE_METADATA;\n    }\n    return this._getBasicScopeAttributes.get(scopeName);\n  }\n  static _NULL_SCOPE_METADATA = new BasicScopeAttributes(0, 0);\n  _getBasicScopeAttributes = new CachedFn((scopeName) => {\n    const languageId = this._scopeToLanguage(scopeName);\n    const standardTokenType = this._toStandardTokenType(scopeName);\n    return new BasicScopeAttributes(languageId, standardTokenType);\n  });\n  /**\n   * Given a produced TM scope, return the language that token describes or null if unknown.\n   * e.g. source.html => html, source.css.embedded.html => css, punctuation.definition.tag.html => null\n   */\n  _scopeToLanguage(scope) {\n    return this._embeddedLanguagesMatcher.match(scope) || 0;\n  }\n  _toStandardTokenType(scopeName) {\n    const m = scopeName.match(_BasicScopeAttributesProvider.STANDARD_TOKEN_TYPE_REGEXP);\n    if (!m) {\n      return 8 /* NotSet */;\n    }\n    switch (m[1]) {\n      case \"comment\":\n        return 1 /* Comment */;\n      case \"string\":\n        return 2 /* String */;\n      case \"regex\":\n        return 3 /* RegEx */;\n      case \"meta.embedded\":\n        return 0 /* Other */;\n    }\n    throw new Error(\"Unexpected match for standard token type!\");\n  }\n  static STANDARD_TOKEN_TYPE_REGEXP = /\\b(comment|string|regex|meta\\.embedded)\\b/;\n};\nvar ScopeMatcher = class {\n  values;\n  scopesRegExp;\n  constructor(values) {\n    if (values.length === 0) {\n      this.values = null;\n      this.scopesRegExp = null;\n    } else {\n      this.values = new Map(values);\n      const escapedScopes = values.map(\n        ([scopeName, value]) => escapeRegExpCharacters(scopeName)\n      );\n      escapedScopes.sort();\n      escapedScopes.reverse();\n      this.scopesRegExp = new RegExp(\n        `^((${escapedScopes.join(\")|(\")}))($|\\\\.)`,\n        \"\"\n      );\n    }\n  }\n  match(scope) {\n    if (!this.scopesRegExp) {\n      return void 0;\n    }\n    const m = scope.match(this.scopesRegExp);\n    if (!m) {\n      return void 0;\n    }\n    return this.values.get(m[1]);\n  }\n};\n\n// src/debug.ts\nvar DebugFlags = {\n  InDebugMode: typeof process !== \"undefined\" && !!process.env[\"VSCODE_TEXTMATE_DEBUG\"]\n};\nvar UseOnigurumaFindOptions = false;\n\n// src/grammar/tokenizeString.ts\nvar TokenizeStringResult = class {\n  constructor(stack, stoppedEarly) {\n    this.stack = stack;\n    this.stoppedEarly = stoppedEarly;\n  }\n};\nfunction _tokenizeString(grammar, lineText, isFirstLine, linePos, stack, lineTokens, checkWhileConditions, timeLimit) {\n  const lineLength = lineText.content.length;\n  let STOP = false;\n  let anchorPosition = -1;\n  if (checkWhileConditions) {\n    const whileCheckResult = _checkWhileConditions(\n      grammar,\n      lineText,\n      isFirstLine,\n      linePos,\n      stack,\n      lineTokens\n    );\n    stack = whileCheckResult.stack;\n    linePos = whileCheckResult.linePos;\n    isFirstLine = whileCheckResult.isFirstLine;\n    anchorPosition = whileCheckResult.anchorPosition;\n  }\n  const startTime = Date.now();\n  while (!STOP) {\n    if (timeLimit !== 0) {\n      const elapsedTime = Date.now() - startTime;\n      if (elapsedTime > timeLimit) {\n        return new TokenizeStringResult(stack, true);\n      }\n    }\n    scanNext();\n  }\n  return new TokenizeStringResult(stack, false);\n  function scanNext() {\n    if (false) {\n      console.log(\"\");\n      console.log(\n        `@@scanNext ${linePos}: |${lineText.content.substr(linePos).replace(/\\n$/, \"\\\\n\")}|`\n      );\n    }\n    const r = matchRuleOrInjections(\n      grammar,\n      lineText,\n      isFirstLine,\n      linePos,\n      stack,\n      anchorPosition\n    );\n    if (!r) {\n      lineTokens.produce(stack, lineLength);\n      STOP = true;\n      return;\n    }\n    const captureIndices = r.captureIndices;\n    const matchedRuleId = r.matchedRuleId;\n    const hasAdvanced = captureIndices && captureIndices.length > 0 ? captureIndices[0].end > linePos : false;\n    if (matchedRuleId === endRuleId) {\n      const poppedRule = stack.getRule(grammar);\n      if (false) {\n        console.log(\n          \"  popping \" + poppedRule.debugName + \" - \" + poppedRule.debugEndRegExp\n        );\n      }\n      lineTokens.produce(stack, captureIndices[0].start);\n      stack = stack.withContentNameScopesList(stack.nameScopesList);\n      handleCaptures(\n        grammar,\n        lineText,\n        isFirstLine,\n        stack,\n        lineTokens,\n        poppedRule.endCaptures,\n        captureIndices\n      );\n      lineTokens.produce(stack, captureIndices[0].end);\n      const popped = stack;\n      stack = stack.parent;\n      anchorPosition = popped.getAnchorPos();\n      if (!hasAdvanced && popped.getEnterPos() === linePos) {\n        if (false) {\n          console.error(\n            \"[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing\"\n          );\n        }\n        stack = popped;\n        lineTokens.produce(stack, lineLength);\n        STOP = true;\n        return;\n      }\n    } else {\n      const _rule = grammar.getRule(matchedRuleId);\n      lineTokens.produce(stack, captureIndices[0].start);\n      const beforePush = stack;\n      const scopeName = _rule.getName(lineText.content, captureIndices);\n      const nameScopesList = stack.contentNameScopesList.pushAttributed(\n        scopeName,\n        grammar\n      );\n      stack = stack.push(\n        matchedRuleId,\n        linePos,\n        anchorPosition,\n        captureIndices[0].end === lineLength,\n        null,\n        nameScopesList,\n        nameScopesList\n      );\n      if (_rule instanceof BeginEndRule) {\n        const pushedRule = _rule;\n        if (false) {\n          console.log(\n            \"  pushing \" + pushedRule.debugName + \" - \" + pushedRule.debugBeginRegExp\n          );\n        }\n        handleCaptures(\n          grammar,\n          lineText,\n          isFirstLine,\n          stack,\n          lineTokens,\n          pushedRule.beginCaptures,\n          captureIndices\n        );\n        lineTokens.produce(stack, captureIndices[0].end);\n        anchorPosition = captureIndices[0].end;\n        const contentName = pushedRule.getContentName(\n          lineText.content,\n          captureIndices\n        );\n        const contentNameScopesList = nameScopesList.pushAttributed(\n          contentName,\n          grammar\n        );\n        stack = stack.withContentNameScopesList(contentNameScopesList);\n        if (pushedRule.endHasBackReferences) {\n          stack = stack.withEndRule(\n            pushedRule.getEndWithResolvedBackReferences(\n              lineText.content,\n              captureIndices\n            )\n          );\n        }\n        if (!hasAdvanced && beforePush.hasSameRuleAs(stack)) {\n          if (false) {\n            console.error(\n              \"[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing\"\n            );\n          }\n          stack = stack.pop();\n          lineTokens.produce(stack, lineLength);\n          STOP = true;\n          return;\n        }\n      } else if (_rule instanceof BeginWhileRule) {\n        const pushedRule = _rule;\n        if (false) {\n          console.log(\"  pushing \" + pushedRule.debugName);\n        }\n        handleCaptures(\n          grammar,\n          lineText,\n          isFirstLine,\n          stack,\n          lineTokens,\n          pushedRule.beginCaptures,\n          captureIndices\n        );\n        lineTokens.produce(stack, captureIndices[0].end);\n        anchorPosition = captureIndices[0].end;\n        const contentName = pushedRule.getContentName(\n          lineText.content,\n          captureIndices\n        );\n        const contentNameScopesList = nameScopesList.pushAttributed(\n          contentName,\n          grammar\n        );\n        stack = stack.withContentNameScopesList(contentNameScopesList);\n        if (pushedRule.whileHasBackReferences) {\n          stack = stack.withEndRule(\n            pushedRule.getWhileWithResolvedBackReferences(\n              lineText.content,\n              captureIndices\n            )\n          );\n        }\n        if (!hasAdvanced && beforePush.hasSameRuleAs(stack)) {\n          if (false) {\n            console.error(\n              \"[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing\"\n            );\n          }\n          stack = stack.pop();\n          lineTokens.produce(stack, lineLength);\n          STOP = true;\n          return;\n        }\n      } else {\n        const matchingRule = _rule;\n        if (false) {\n          console.log(\n            \"  matched \" + matchingRule.debugName + \" - \" + matchingRule.debugMatchRegExp\n          );\n        }\n        handleCaptures(\n          grammar,\n          lineText,\n          isFirstLine,\n          stack,\n          lineTokens,\n          matchingRule.captures,\n          captureIndices\n        );\n        lineTokens.produce(stack, captureIndices[0].end);\n        stack = stack.pop();\n        if (!hasAdvanced) {\n          if (false) {\n            console.error(\n              \"[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping\"\n            );\n          }\n          stack = stack.safePop();\n          lineTokens.produce(stack, lineLength);\n          STOP = true;\n          return;\n        }\n      }\n    }\n    if (captureIndices[0].end > linePos) {\n      linePos = captureIndices[0].end;\n      isFirstLine = false;\n    }\n  }\n}\nfunction _checkWhileConditions(grammar, lineText, isFirstLine, linePos, stack, lineTokens) {\n  let anchorPosition = stack.beginRuleCapturedEOL ? 0 : -1;\n  const whileRules = [];\n  for (let node = stack; node; node = node.pop()) {\n    const nodeRule = node.getRule(grammar);\n    if (nodeRule instanceof BeginWhileRule) {\n      whileRules.push({\n        rule: nodeRule,\n        stack: node\n      });\n    }\n  }\n  for (let whileRule = whileRules.pop(); whileRule; whileRule = whileRules.pop()) {\n    const { ruleScanner, findOptions } = prepareRuleWhileSearch(whileRule.rule, grammar, whileRule.stack.endRule, isFirstLine, linePos === anchorPosition);\n    const r = ruleScanner.findNextMatchSync(lineText, linePos, findOptions);\n    if (false) {\n      console.log(\"  scanning for while rule\");\n      console.log(ruleScanner.toString());\n    }\n    if (r) {\n      const matchedRuleId = r.ruleId;\n      if (matchedRuleId !== whileRuleId) {\n        stack = whileRule.stack.pop();\n        break;\n      }\n      if (r.captureIndices && r.captureIndices.length) {\n        lineTokens.produce(whileRule.stack, r.captureIndices[0].start);\n        handleCaptures(grammar, lineText, isFirstLine, whileRule.stack, lineTokens, whileRule.rule.whileCaptures, r.captureIndices);\n        lineTokens.produce(whileRule.stack, r.captureIndices[0].end);\n        anchorPosition = r.captureIndices[0].end;\n        if (r.captureIndices[0].end > linePos) {\n          linePos = r.captureIndices[0].end;\n          isFirstLine = false;\n        }\n      }\n    } else {\n      if (false) {\n        console.log(\"  popping \" + whileRule.rule.debugName + \" - \" + whileRule.rule.debugWhileRegExp);\n      }\n      stack = whileRule.stack.pop();\n      break;\n    }\n  }\n  return { stack, linePos, anchorPosition, isFirstLine };\n}\nfunction matchRuleOrInjections(grammar, lineText, isFirstLine, linePos, stack, anchorPosition) {\n  const matchResult = matchRule(grammar, lineText, isFirstLine, linePos, stack, anchorPosition);\n  const injections = grammar.getInjections();\n  if (injections.length === 0) {\n    return matchResult;\n  }\n  const injectionResult = matchInjections(injections, grammar, lineText, isFirstLine, linePos, stack, anchorPosition);\n  if (!injectionResult) {\n    return matchResult;\n  }\n  if (!matchResult) {\n    return injectionResult;\n  }\n  const matchResultScore = matchResult.captureIndices[0].start;\n  const injectionResultScore = injectionResult.captureIndices[0].start;\n  if (injectionResultScore < matchResultScore || injectionResult.priorityMatch && injectionResultScore === matchResultScore) {\n    return injectionResult;\n  }\n  return matchResult;\n}\nfunction matchRule(grammar, lineText, isFirstLine, linePos, stack, anchorPosition) {\n  const rule = stack.getRule(grammar);\n  const { ruleScanner, findOptions } = prepareRuleSearch(rule, grammar, stack.endRule, isFirstLine, linePos === anchorPosition);\n  const r = ruleScanner.findNextMatchSync(lineText, linePos, findOptions);\n  if (r) {\n    return {\n      captureIndices: r.captureIndices,\n      matchedRuleId: r.ruleId\n    };\n  }\n  return null;\n}\nfunction matchInjections(injections, grammar, lineText, isFirstLine, linePos, stack, anchorPosition) {\n  let bestMatchRating = Number.MAX_VALUE;\n  let bestMatchCaptureIndices = null;\n  let bestMatchRuleId;\n  let bestMatchResultPriority = 0;\n  const scopes = stack.contentNameScopesList.getScopeNames();\n  for (let i = 0, len = injections.length; i < len; i++) {\n    const injection = injections[i];\n    if (!injection.matcher(scopes)) {\n      continue;\n    }\n    const rule = grammar.getRule(injection.ruleId);\n    const { ruleScanner, findOptions } = prepareRuleSearch(rule, grammar, null, isFirstLine, linePos === anchorPosition);\n    const matchResult = ruleScanner.findNextMatchSync(lineText, linePos, findOptions);\n    if (!matchResult) {\n      continue;\n    }\n    if (false) {\n      console.log(`  matched injection: ${injection.debugSelector}`);\n      console.log(ruleScanner.toString());\n    }\n    const matchRating = matchResult.captureIndices[0].start;\n    if (matchRating >= bestMatchRating) {\n      continue;\n    }\n    bestMatchRating = matchRating;\n    bestMatchCaptureIndices = matchResult.captureIndices;\n    bestMatchRuleId = matchResult.ruleId;\n    bestMatchResultPriority = injection.priority;\n    if (bestMatchRating === linePos) {\n      break;\n    }\n  }\n  if (bestMatchCaptureIndices) {\n    return {\n      priorityMatch: bestMatchResultPriority === -1,\n      captureIndices: bestMatchCaptureIndices,\n      matchedRuleId: bestMatchRuleId\n    };\n  }\n  return null;\n}\nfunction prepareRuleSearch(rule, grammar, endRegexSource, allowA, allowG) {\n  if (UseOnigurumaFindOptions) {\n    const ruleScanner2 = rule.compile(grammar, endRegexSource);\n    const findOptions = getFindOptions(allowA, allowG);\n    return { ruleScanner: ruleScanner2, findOptions };\n  }\n  const ruleScanner = rule.compileAG(grammar, endRegexSource, allowA, allowG);\n  return { ruleScanner, findOptions: 0 /* None */ };\n}\nfunction prepareRuleWhileSearch(rule, grammar, endRegexSource, allowA, allowG) {\n  if (UseOnigurumaFindOptions) {\n    const ruleScanner2 = rule.compileWhile(grammar, endRegexSource);\n    const findOptions = getFindOptions(allowA, allowG);\n    return { ruleScanner: ruleScanner2, findOptions };\n  }\n  const ruleScanner = rule.compileWhileAG(grammar, endRegexSource, allowA, allowG);\n  return { ruleScanner, findOptions: 0 /* None */ };\n}\nfunction getFindOptions(allowA, allowG) {\n  let options = 0 /* None */;\n  if (!allowA) {\n    options |= 1 /* NotBeginString */;\n  }\n  if (!allowG) {\n    options |= 4 /* NotBeginPosition */;\n  }\n  return options;\n}\nfunction handleCaptures(grammar, lineText, isFirstLine, stack, lineTokens, captures, captureIndices) {\n  if (captures.length === 0) {\n    return;\n  }\n  const lineTextContent = lineText.content;\n  const len = Math.min(captures.length, captureIndices.length);\n  const localStack = [];\n  const maxEnd = captureIndices[0].end;\n  for (let i = 0; i < len; i++) {\n    const captureRule = captures[i];\n    if (captureRule === null) {\n      continue;\n    }\n    const captureIndex = captureIndices[i];\n    if (captureIndex.length === 0) {\n      continue;\n    }\n    if (captureIndex.start > maxEnd) {\n      break;\n    }\n    while (localStack.length > 0 && localStack[localStack.length - 1].endPos <= captureIndex.start) {\n      lineTokens.produceFromScopes(localStack[localStack.length - 1].scopes, localStack[localStack.length - 1].endPos);\n      localStack.pop();\n    }\n    if (localStack.length > 0) {\n      lineTokens.produceFromScopes(localStack[localStack.length - 1].scopes, captureIndex.start);\n    } else {\n      lineTokens.produce(stack, captureIndex.start);\n    }\n    if (captureRule.retokenizeCapturedWithRuleId) {\n      const scopeName = captureRule.getName(lineTextContent, captureIndices);\n      const nameScopesList = stack.contentNameScopesList.pushAttributed(scopeName, grammar);\n      const contentName = captureRule.getContentName(lineTextContent, captureIndices);\n      const contentNameScopesList = nameScopesList.pushAttributed(contentName, grammar);\n      const stackClone = stack.push(captureRule.retokenizeCapturedWithRuleId, captureIndex.start, -1, false, null, nameScopesList, contentNameScopesList);\n      const onigSubStr = grammar.createOnigString(lineTextContent.substring(0, captureIndex.end));\n      _tokenizeString(\n        grammar,\n        onigSubStr,\n        isFirstLine && captureIndex.start === 0,\n        captureIndex.start,\n        stackClone,\n        lineTokens,\n        false,\n        /* no time limit */\n        0\n      );\n      disposeOnigString(onigSubStr);\n      continue;\n    }\n    const captureRuleScopeName = captureRule.getName(lineTextContent, captureIndices);\n    if (captureRuleScopeName !== null) {\n      const base = localStack.length > 0 ? localStack[localStack.length - 1].scopes : stack.contentNameScopesList;\n      const captureRuleScopesList = base.pushAttributed(captureRuleScopeName, grammar);\n      localStack.push(new LocalStackElement(captureRuleScopesList, captureIndex.end));\n    }\n  }\n  while (localStack.length > 0) {\n    lineTokens.produceFromScopes(localStack[localStack.length - 1].scopes, localStack[localStack.length - 1].endPos);\n    localStack.pop();\n  }\n}\nvar LocalStackElement = class {\n  scopes;\n  endPos;\n  constructor(scopes, endPos) {\n    this.scopes = scopes;\n    this.endPos = endPos;\n  }\n};\n\n// src/grammar/grammar.ts\nfunction createGrammar(scopeName, grammar, initialLanguage, embeddedLanguages, tokenTypes, balancedBracketSelectors, grammarRepository, onigLib) {\n  return new Grammar(\n    scopeName,\n    grammar,\n    initialLanguage,\n    embeddedLanguages,\n    tokenTypes,\n    balancedBracketSelectors,\n    grammarRepository,\n    onigLib\n  );\n}\nfunction collectInjections(result, selector, rule, ruleFactoryHelper, grammar) {\n  const matchers = createMatchers(selector, nameMatcher);\n  const ruleId = RuleFactory.getCompiledRuleId(rule, ruleFactoryHelper, grammar.repository);\n  for (const matcher of matchers) {\n    result.push({\n      debugSelector: selector,\n      matcher: matcher.matcher,\n      ruleId,\n      grammar,\n      priority: matcher.priority\n    });\n  }\n}\nfunction nameMatcher(identifers, scopes) {\n  if (scopes.length < identifers.length) {\n    return false;\n  }\n  let lastIndex = 0;\n  return identifers.every((identifier) => {\n    for (let i = lastIndex; i < scopes.length; i++) {\n      if (scopesAreMatching(scopes[i], identifier)) {\n        lastIndex = i + 1;\n        return true;\n      }\n    }\n    return false;\n  });\n}\nfunction scopesAreMatching(thisScopeName, scopeName) {\n  if (!thisScopeName) {\n    return false;\n  }\n  if (thisScopeName === scopeName) {\n    return true;\n  }\n  const len = scopeName.length;\n  return thisScopeName.length > len && thisScopeName.substr(0, len) === scopeName && thisScopeName[len] === \".\";\n}\nvar Grammar = class {\n  constructor(_rootScopeName, grammar, initialLanguage, embeddedLanguages, tokenTypes, balancedBracketSelectors, grammarRepository, _onigLib) {\n    this._rootScopeName = _rootScopeName;\n    this.balancedBracketSelectors = balancedBracketSelectors;\n    this._onigLib = _onigLib;\n    this._basicScopeAttributesProvider = new BasicScopeAttributesProvider(\n      initialLanguage,\n      embeddedLanguages\n    );\n    this._rootId = -1;\n    this._lastRuleId = 0;\n    this._ruleId2desc = [null];\n    this._includedGrammars = {};\n    this._grammarRepository = grammarRepository;\n    this._grammar = initGrammar(grammar, null);\n    this._injections = null;\n    this._tokenTypeMatchers = [];\n    if (tokenTypes) {\n      for (const selector of Object.keys(tokenTypes)) {\n        const matchers = createMatchers(selector, nameMatcher);\n        for (const matcher of matchers) {\n          this._tokenTypeMatchers.push({\n            matcher: matcher.matcher,\n            type: tokenTypes[selector]\n          });\n        }\n      }\n    }\n  }\n  _rootId;\n  _lastRuleId;\n  _ruleId2desc;\n  _includedGrammars;\n  _grammarRepository;\n  _grammar;\n  _injections;\n  _basicScopeAttributesProvider;\n  _tokenTypeMatchers;\n  get themeProvider() {\n    return this._grammarRepository;\n  }\n  dispose() {\n    for (const rule of this._ruleId2desc) {\n      if (rule) {\n        rule.dispose();\n      }\n    }\n  }\n  createOnigScanner(sources) {\n    return this._onigLib.createOnigScanner(sources);\n  }\n  createOnigString(sources) {\n    return this._onigLib.createOnigString(sources);\n  }\n  getMetadataForScope(scope) {\n    return this._basicScopeAttributesProvider.getBasicScopeAttributes(scope);\n  }\n  _collectInjections() {\n    const grammarRepository = {\n      lookup: (scopeName2) => {\n        if (scopeName2 === this._rootScopeName) {\n          return this._grammar;\n        }\n        return this.getExternalGrammar(scopeName2);\n      },\n      injections: (scopeName2) => {\n        return this._grammarRepository.injections(scopeName2);\n      }\n    };\n    const result = [];\n    const scopeName = this._rootScopeName;\n    const grammar = grammarRepository.lookup(scopeName);\n    if (grammar) {\n      const rawInjections = grammar.injections;\n      if (rawInjections) {\n        for (let expression in rawInjections) {\n          collectInjections(\n            result,\n            expression,\n            rawInjections[expression],\n            this,\n            grammar\n          );\n        }\n      }\n      const injectionScopeNames = this._grammarRepository.injections(scopeName);\n      if (injectionScopeNames) {\n        injectionScopeNames.forEach((injectionScopeName) => {\n          const injectionGrammar = this.getExternalGrammar(injectionScopeName);\n          if (injectionGrammar) {\n            const selector = injectionGrammar.injectionSelector;\n            if (selector) {\n              collectInjections(\n                result,\n                selector,\n                injectionGrammar,\n                this,\n                injectionGrammar\n              );\n            }\n          }\n        });\n      }\n    }\n    result.sort((i1, i2) => i1.priority - i2.priority);\n    return result;\n  }\n  getInjections() {\n    if (this._injections === null) {\n      this._injections = this._collectInjections();\n    }\n    return this._injections;\n  }\n  registerRule(factory) {\n    const id = ++this._lastRuleId;\n    const result = factory(ruleIdFromNumber(id));\n    this._ruleId2desc[id] = result;\n    return result;\n  }\n  getRule(ruleId) {\n    return this._ruleId2desc[ruleIdToNumber(ruleId)];\n  }\n  getExternalGrammar(scopeName, repository) {\n    if (this._includedGrammars[scopeName]) {\n      return this._includedGrammars[scopeName];\n    } else if (this._grammarRepository) {\n      const rawIncludedGrammar = this._grammarRepository.lookup(scopeName);\n      if (rawIncludedGrammar) {\n        this._includedGrammars[scopeName] = initGrammar(\n          rawIncludedGrammar,\n          repository && repository.$base\n        );\n        return this._includedGrammars[scopeName];\n      }\n    }\n    return void 0;\n  }\n  tokenizeLine(lineText, prevState, timeLimit = 0) {\n    const r = this._tokenize(lineText, prevState, false, timeLimit);\n    return {\n      tokens: r.lineTokens.getResult(r.ruleStack, r.lineLength),\n      ruleStack: r.ruleStack,\n      stoppedEarly: r.stoppedEarly\n    };\n  }\n  tokenizeLine2(lineText, prevState, timeLimit = 0) {\n    const r = this._tokenize(lineText, prevState, true, timeLimit);\n    return {\n      tokens: r.lineTokens.getBinaryResult(r.ruleStack, r.lineLength),\n      ruleStack: r.ruleStack,\n      stoppedEarly: r.stoppedEarly\n    };\n  }\n  _tokenize(lineText, prevState, emitBinaryTokens, timeLimit) {\n    if (this._rootId === -1) {\n      this._rootId = RuleFactory.getCompiledRuleId(\n        this._grammar.repository.$self,\n        this,\n        this._grammar.repository\n      );\n      this.getInjections();\n    }\n    let isFirstLine;\n    if (!prevState || prevState === StateStackImpl.NULL) {\n      isFirstLine = true;\n      const rawDefaultMetadata = this._basicScopeAttributesProvider.getDefaultAttributes();\n      const defaultStyle = this.themeProvider.getDefaults();\n      const defaultMetadata = EncodedTokenMetadata.set(\n        0,\n        rawDefaultMetadata.languageId,\n        rawDefaultMetadata.tokenType,\n        null,\n        defaultStyle.fontStyle,\n        defaultStyle.foregroundId,\n        defaultStyle.backgroundId\n      );\n      const rootScopeName = this.getRule(this._rootId).getName(\n        null,\n        null\n      );\n      let scopeList;\n      if (rootScopeName) {\n        scopeList = AttributedScopeStack.createRootAndLookUpScopeName(\n          rootScopeName,\n          defaultMetadata,\n          this\n        );\n      } else {\n        scopeList = AttributedScopeStack.createRoot(\n          \"unknown\",\n          defaultMetadata\n        );\n      }\n      prevState = new StateStackImpl(\n        null,\n        this._rootId,\n        -1,\n        -1,\n        false,\n        null,\n        scopeList,\n        scopeList\n      );\n    } else {\n      isFirstLine = false;\n      prevState.reset();\n    }\n    lineText = lineText + \"\\n\";\n    const onigLineText = this.createOnigString(lineText);\n    const lineLength = onigLineText.content.length;\n    const lineTokens = new LineTokens(\n      emitBinaryTokens,\n      lineText,\n      this._tokenTypeMatchers,\n      this.balancedBracketSelectors\n    );\n    const r = _tokenizeString(\n      this,\n      onigLineText,\n      isFirstLine,\n      0,\n      prevState,\n      lineTokens,\n      true,\n      timeLimit\n    );\n    disposeOnigString(onigLineText);\n    return {\n      lineLength,\n      lineTokens,\n      ruleStack: r.stack,\n      stoppedEarly: r.stoppedEarly\n    };\n  }\n};\nfunction initGrammar(grammar, base) {\n  grammar = clone(grammar);\n  grammar.repository = grammar.repository || {};\n  grammar.repository.$self = {\n    $vscodeTextmateLocation: grammar.$vscodeTextmateLocation,\n    patterns: grammar.patterns,\n    name: grammar.scopeName\n  };\n  grammar.repository.$base = base || grammar.repository.$self;\n  return grammar;\n}\nvar AttributedScopeStack = class _AttributedScopeStack {\n  /**\n   * Invariant:\n   * ```\n   * if (parent && !scopePath.extends(parent.scopePath)) {\n   * \tthrow new Error();\n   * }\n   * ```\n   */\n  constructor(parent, scopePath, tokenAttributes) {\n    this.parent = parent;\n    this.scopePath = scopePath;\n    this.tokenAttributes = tokenAttributes;\n  }\n  static fromExtension(namesScopeList, contentNameScopesList) {\n    let current = namesScopeList;\n    let scopeNames = namesScopeList?.scopePath ?? null;\n    for (const frame of contentNameScopesList) {\n      scopeNames = ScopeStack.push(scopeNames, frame.scopeNames);\n      current = new _AttributedScopeStack(current, scopeNames, frame.encodedTokenAttributes);\n    }\n    return current;\n  }\n  static createRoot(scopeName, tokenAttributes) {\n    return new _AttributedScopeStack(null, new ScopeStack(null, scopeName), tokenAttributes);\n  }\n  static createRootAndLookUpScopeName(scopeName, tokenAttributes, grammar) {\n    const rawRootMetadata = grammar.getMetadataForScope(scopeName);\n    const scopePath = new ScopeStack(null, scopeName);\n    const rootStyle = grammar.themeProvider.themeMatch(scopePath);\n    const resolvedTokenAttributes = _AttributedScopeStack.mergeAttributes(\n      tokenAttributes,\n      rawRootMetadata,\n      rootStyle\n    );\n    return new _AttributedScopeStack(null, scopePath, resolvedTokenAttributes);\n  }\n  get scopeName() {\n    return this.scopePath.scopeName;\n  }\n  toString() {\n    return this.getScopeNames().join(\" \");\n  }\n  equals(other) {\n    return _AttributedScopeStack.equals(this, other);\n  }\n  static equals(a, b) {\n    do {\n      if (a === b) {\n        return true;\n      }\n      if (!a && !b) {\n        return true;\n      }\n      if (!a || !b) {\n        return false;\n      }\n      if (a.scopeName !== b.scopeName || a.tokenAttributes !== b.tokenAttributes) {\n        return false;\n      }\n      a = a.parent;\n      b = b.parent;\n    } while (true);\n  }\n  static mergeAttributes(existingTokenAttributes, basicScopeAttributes, styleAttributes) {\n    let fontStyle = -1 /* NotSet */;\n    let foreground = 0;\n    let background = 0;\n    if (styleAttributes !== null) {\n      fontStyle = styleAttributes.fontStyle;\n      foreground = styleAttributes.foregroundId;\n      background = styleAttributes.backgroundId;\n    }\n    return EncodedTokenMetadata.set(\n      existingTokenAttributes,\n      basicScopeAttributes.languageId,\n      basicScopeAttributes.tokenType,\n      null,\n      fontStyle,\n      foreground,\n      background\n    );\n  }\n  pushAttributed(scopePath, grammar) {\n    if (scopePath === null) {\n      return this;\n    }\n    if (scopePath.indexOf(\" \") === -1) {\n      return _AttributedScopeStack._pushAttributed(this, scopePath, grammar);\n    }\n    const scopes = scopePath.split(/ /g);\n    let result = this;\n    for (const scope of scopes) {\n      result = _AttributedScopeStack._pushAttributed(result, scope, grammar);\n    }\n    return result;\n  }\n  static _pushAttributed(target, scopeName, grammar) {\n    const rawMetadata = grammar.getMetadataForScope(scopeName);\n    const newPath = target.scopePath.push(scopeName);\n    const scopeThemeMatchResult = grammar.themeProvider.themeMatch(newPath);\n    const metadata = _AttributedScopeStack.mergeAttributes(\n      target.tokenAttributes,\n      rawMetadata,\n      scopeThemeMatchResult\n    );\n    return new _AttributedScopeStack(target, newPath, metadata);\n  }\n  getScopeNames() {\n    return this.scopePath.getSegments();\n  }\n  getExtensionIfDefined(base) {\n    const result = [];\n    let self = this;\n    while (self && self !== base) {\n      result.push({\n        encodedTokenAttributes: self.tokenAttributes,\n        scopeNames: self.scopePath.getExtensionIfDefined(self.parent?.scopePath ?? null)\n      });\n      self = self.parent;\n    }\n    return self === base ? result.reverse() : void 0;\n  }\n};\nvar StateStackImpl = class _StateStackImpl {\n  /**\n   * Invariant:\n   * ```\n   * if (contentNameScopesList !== nameScopesList && contentNameScopesList?.parent !== nameScopesList) {\n   * \tthrow new Error();\n   * }\n   * if (this.parent && !nameScopesList.extends(this.parent.contentNameScopesList)) {\n   * \tthrow new Error();\n   * }\n   * ```\n   */\n  constructor(parent, ruleId, enterPos, anchorPos, beginRuleCapturedEOL, endRule, nameScopesList, contentNameScopesList) {\n    this.parent = parent;\n    this.ruleId = ruleId;\n    this.beginRuleCapturedEOL = beginRuleCapturedEOL;\n    this.endRule = endRule;\n    this.nameScopesList = nameScopesList;\n    this.contentNameScopesList = contentNameScopesList;\n    this.depth = this.parent ? this.parent.depth + 1 : 1;\n    this._enterPos = enterPos;\n    this._anchorPos = anchorPos;\n  }\n  _stackElementBrand = void 0;\n  // TODO remove me\n  static NULL = new _StateStackImpl(\n    null,\n    0,\n    0,\n    0,\n    false,\n    null,\n    null,\n    null\n  );\n  /**\n   * The position on the current line where this state was pushed.\n   * This is relevant only while tokenizing a line, to detect endless loops.\n   * Its value is meaningless across lines.\n   */\n  _enterPos;\n  /**\n   * The captured anchor position when this stack element was pushed.\n   * This is relevant only while tokenizing a line, to restore the anchor position when popping.\n   * Its value is meaningless across lines.\n   */\n  _anchorPos;\n  /**\n   * The depth of the stack.\n   */\n  depth;\n  equals(other) {\n    if (other === null) {\n      return false;\n    }\n    return _StateStackImpl._equals(this, other);\n  }\n  static _equals(a, b) {\n    if (a === b) {\n      return true;\n    }\n    if (!this._structuralEquals(a, b)) {\n      return false;\n    }\n    return AttributedScopeStack.equals(a.contentNameScopesList, b.contentNameScopesList);\n  }\n  /**\n   * A structural equals check. Does not take into account `scopes`.\n   */\n  static _structuralEquals(a, b) {\n    do {\n      if (a === b) {\n        return true;\n      }\n      if (!a && !b) {\n        return true;\n      }\n      if (!a || !b) {\n        return false;\n      }\n      if (a.depth !== b.depth || a.ruleId !== b.ruleId || a.endRule !== b.endRule) {\n        return false;\n      }\n      a = a.parent;\n      b = b.parent;\n    } while (true);\n  }\n  clone() {\n    return this;\n  }\n  static _reset(el) {\n    while (el) {\n      el._enterPos = -1;\n      el._anchorPos = -1;\n      el = el.parent;\n    }\n  }\n  reset() {\n    _StateStackImpl._reset(this);\n  }\n  pop() {\n    return this.parent;\n  }\n  safePop() {\n    if (this.parent) {\n      return this.parent;\n    }\n    return this;\n  }\n  push(ruleId, enterPos, anchorPos, beginRuleCapturedEOL, endRule, nameScopesList, contentNameScopesList) {\n    return new _StateStackImpl(\n      this,\n      ruleId,\n      enterPos,\n      anchorPos,\n      beginRuleCapturedEOL,\n      endRule,\n      nameScopesList,\n      contentNameScopesList\n    );\n  }\n  getEnterPos() {\n    return this._enterPos;\n  }\n  getAnchorPos() {\n    return this._anchorPos;\n  }\n  getRule(grammar) {\n    return grammar.getRule(this.ruleId);\n  }\n  toString() {\n    const r = [];\n    this._writeString(r, 0);\n    return \"[\" + r.join(\",\") + \"]\";\n  }\n  _writeString(res, outIndex) {\n    if (this.parent) {\n      outIndex = this.parent._writeString(res, outIndex);\n    }\n    res[outIndex++] = `(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`;\n    return outIndex;\n  }\n  withContentNameScopesList(contentNameScopeStack) {\n    if (this.contentNameScopesList === contentNameScopeStack) {\n      return this;\n    }\n    return this.parent.push(\n      this.ruleId,\n      this._enterPos,\n      this._anchorPos,\n      this.beginRuleCapturedEOL,\n      this.endRule,\n      this.nameScopesList,\n      contentNameScopeStack\n    );\n  }\n  withEndRule(endRule) {\n    if (this.endRule === endRule) {\n      return this;\n    }\n    return new _StateStackImpl(\n      this.parent,\n      this.ruleId,\n      this._enterPos,\n      this._anchorPos,\n      this.beginRuleCapturedEOL,\n      endRule,\n      this.nameScopesList,\n      this.contentNameScopesList\n    );\n  }\n  // Used to warn of endless loops\n  hasSameRuleAs(other) {\n    let el = this;\n    while (el && el._enterPos === other._enterPos) {\n      if (el.ruleId === other.ruleId) {\n        return true;\n      }\n      el = el.parent;\n    }\n    return false;\n  }\n  toStateStackFrame() {\n    return {\n      ruleId: ruleIdToNumber(this.ruleId),\n      beginRuleCapturedEOL: this.beginRuleCapturedEOL,\n      endRule: this.endRule,\n      nameScopesList: this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList ?? null) ?? [],\n      contentNameScopesList: this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList) ?? []\n    };\n  }\n  static pushFrame(self, frame) {\n    const namesScopeList = AttributedScopeStack.fromExtension(self?.nameScopesList ?? null, frame.nameScopesList);\n    return new _StateStackImpl(\n      self,\n      ruleIdFromNumber(frame.ruleId),\n      frame.enterPos ?? -1,\n      frame.anchorPos ?? -1,\n      frame.beginRuleCapturedEOL,\n      frame.endRule,\n      namesScopeList,\n      AttributedScopeStack.fromExtension(namesScopeList, frame.contentNameScopesList)\n    );\n  }\n};\nvar BalancedBracketSelectors = class {\n  balancedBracketScopes;\n  unbalancedBracketScopes;\n  allowAny = false;\n  constructor(balancedBracketScopes, unbalancedBracketScopes) {\n    this.balancedBracketScopes = balancedBracketScopes.flatMap(\n      (selector) => {\n        if (selector === \"*\") {\n          this.allowAny = true;\n          return [];\n        }\n        return createMatchers(selector, nameMatcher).map((m) => m.matcher);\n      }\n    );\n    this.unbalancedBracketScopes = unbalancedBracketScopes.flatMap(\n      (selector) => createMatchers(selector, nameMatcher).map((m) => m.matcher)\n    );\n  }\n  get matchesAlways() {\n    return this.allowAny && this.unbalancedBracketScopes.length === 0;\n  }\n  get matchesNever() {\n    return this.balancedBracketScopes.length === 0 && !this.allowAny;\n  }\n  match(scopes) {\n    for (const excluder of this.unbalancedBracketScopes) {\n      if (excluder(scopes)) {\n        return false;\n      }\n    }\n    for (const includer of this.balancedBracketScopes) {\n      if (includer(scopes)) {\n        return true;\n      }\n    }\n    return this.allowAny;\n  }\n};\nvar LineTokens = class {\n  constructor(emitBinaryTokens, lineText, tokenTypeOverrides, balancedBracketSelectors) {\n    this.balancedBracketSelectors = balancedBracketSelectors;\n    this._emitBinaryTokens = emitBinaryTokens;\n    this._tokenTypeOverrides = tokenTypeOverrides;\n    if (false) {\n      this._lineText = lineText;\n    } else {\n      this._lineText = null;\n    }\n    this._tokens = [];\n    this._binaryTokens = [];\n    this._lastTokenEndIndex = 0;\n  }\n  _emitBinaryTokens;\n  /**\n   * defined only if `false`.\n   */\n  _lineText;\n  /**\n   * used only if `_emitBinaryTokens` is false.\n   */\n  _tokens;\n  /**\n   * used only if `_emitBinaryTokens` is true.\n   */\n  _binaryTokens;\n  _lastTokenEndIndex;\n  _tokenTypeOverrides;\n  produce(stack, endIndex) {\n    this.produceFromScopes(stack.contentNameScopesList, endIndex);\n  }\n  produceFromScopes(scopesList, endIndex) {\n    if (this._lastTokenEndIndex >= endIndex) {\n      return;\n    }\n    if (this._emitBinaryTokens) {\n      let metadata = scopesList?.tokenAttributes ?? 0;\n      let containsBalancedBrackets = false;\n      if (this.balancedBracketSelectors?.matchesAlways) {\n        containsBalancedBrackets = true;\n      }\n      if (this._tokenTypeOverrides.length > 0 || this.balancedBracketSelectors && !this.balancedBracketSelectors.matchesAlways && !this.balancedBracketSelectors.matchesNever) {\n        const scopes2 = scopesList?.getScopeNames() ?? [];\n        for (const tokenType of this._tokenTypeOverrides) {\n          if (tokenType.matcher(scopes2)) {\n            metadata = EncodedTokenMetadata.set(\n              metadata,\n              0,\n              toOptionalTokenType(tokenType.type),\n              null,\n              -1 /* NotSet */,\n              0,\n              0\n            );\n          }\n        }\n        if (this.balancedBracketSelectors) {\n          containsBalancedBrackets = this.balancedBracketSelectors.match(scopes2);\n        }\n      }\n      if (containsBalancedBrackets) {\n        metadata = EncodedTokenMetadata.set(\n          metadata,\n          0,\n          8 /* NotSet */,\n          containsBalancedBrackets,\n          -1 /* NotSet */,\n          0,\n          0\n        );\n      }\n      if (this._binaryTokens.length > 0 && this._binaryTokens[this._binaryTokens.length - 1] === metadata) {\n        this._lastTokenEndIndex = endIndex;\n        return;\n      }\n      this._binaryTokens.push(this._lastTokenEndIndex);\n      this._binaryTokens.push(metadata);\n      this._lastTokenEndIndex = endIndex;\n      return;\n    }\n    const scopes = scopesList?.getScopeNames() ?? [];\n    this._tokens.push({\n      startIndex: this._lastTokenEndIndex,\n      endIndex,\n      // value: lineText.substring(lastTokenEndIndex, endIndex),\n      scopes\n    });\n    this._lastTokenEndIndex = endIndex;\n  }\n  getResult(stack, lineLength) {\n    if (this._tokens.length > 0 && this._tokens[this._tokens.length - 1].startIndex === lineLength - 1) {\n      this._tokens.pop();\n    }\n    if (this._tokens.length === 0) {\n      this._lastTokenEndIndex = -1;\n      this.produce(stack, lineLength);\n      this._tokens[this._tokens.length - 1].startIndex = 0;\n    }\n    return this._tokens;\n  }\n  getBinaryResult(stack, lineLength) {\n    if (this._binaryTokens.length > 0 && this._binaryTokens[this._binaryTokens.length - 2] === lineLength - 1) {\n      this._binaryTokens.pop();\n      this._binaryTokens.pop();\n    }\n    if (this._binaryTokens.length === 0) {\n      this._lastTokenEndIndex = -1;\n      this.produce(stack, lineLength);\n      this._binaryTokens[this._binaryTokens.length - 2] = 0;\n    }\n    const result = new Uint32Array(this._binaryTokens.length);\n    for (let i = 0, len = this._binaryTokens.length; i < len; i++) {\n      result[i] = this._binaryTokens[i];\n    }\n    return result;\n  }\n};\n\n// src/registry.ts\nvar SyncRegistry = class {\n  constructor(theme, _onigLib) {\n    this._onigLib = _onigLib;\n    this._theme = theme;\n  }\n  _grammars = /* @__PURE__ */ new Map();\n  _rawGrammars = /* @__PURE__ */ new Map();\n  _injectionGrammars = /* @__PURE__ */ new Map();\n  _theme;\n  dispose() {\n    for (const grammar of this._grammars.values()) {\n      grammar.dispose();\n    }\n  }\n  setTheme(theme) {\n    this._theme = theme;\n  }\n  getColorMap() {\n    return this._theme.getColorMap();\n  }\n  /**\n   * Add `grammar` to registry and return a list of referenced scope names\n   */\n  addGrammar(grammar, injectionScopeNames) {\n    this._rawGrammars.set(grammar.scopeName, grammar);\n    if (injectionScopeNames) {\n      this._injectionGrammars.set(grammar.scopeName, injectionScopeNames);\n    }\n  }\n  /**\n   * Lookup a raw grammar.\n   */\n  lookup(scopeName) {\n    return this._rawGrammars.get(scopeName);\n  }\n  /**\n   * Returns the injections for the given grammar\n   */\n  injections(targetScope) {\n    return this._injectionGrammars.get(targetScope);\n  }\n  /**\n   * Get the default theme settings\n   */\n  getDefaults() {\n    return this._theme.getDefaults();\n  }\n  /**\n   * Match a scope in the theme.\n   */\n  themeMatch(scopePath) {\n    return this._theme.match(scopePath);\n  }\n  /**\n   * Lookup a grammar.\n   */\n  grammarForScopeName(scopeName, initialLanguage, embeddedLanguages, tokenTypes, balancedBracketSelectors) {\n    if (!this._grammars.has(scopeName)) {\n      let rawGrammar = this._rawGrammars.get(scopeName);\n      if (!rawGrammar) {\n        return null;\n      }\n      this._grammars.set(scopeName, createGrammar(\n        scopeName,\n        rawGrammar,\n        initialLanguage,\n        embeddedLanguages,\n        tokenTypes,\n        balancedBracketSelectors,\n        this,\n        this._onigLib\n      ));\n    }\n    return this._grammars.get(scopeName);\n  }\n};\n\n// src/index.ts\nvar Registry = class {\n  _options;\n  _syncRegistry;\n  _ensureGrammarCache;\n  constructor(options) {\n    this._options = options;\n    this._syncRegistry = new SyncRegistry(\n      Theme.createFromRawTheme(options.theme, options.colorMap),\n      options.onigLib\n    );\n    this._ensureGrammarCache = /* @__PURE__ */ new Map();\n  }\n  dispose() {\n    this._syncRegistry.dispose();\n  }\n  /**\n   * Change the theme. Once called, no previous `ruleStack` should be used anymore.\n   */\n  setTheme(theme, colorMap) {\n    this._syncRegistry.setTheme(Theme.createFromRawTheme(theme, colorMap));\n  }\n  /**\n   * Returns a lookup array for color ids.\n   */\n  getColorMap() {\n    return this._syncRegistry.getColorMap();\n  }\n  /**\n   * Load the grammar for `scopeName` and all referenced included grammars asynchronously.\n   * Please do not use language id 0.\n   */\n  loadGrammarWithEmbeddedLanguages(initialScopeName, initialLanguage, embeddedLanguages) {\n    return this.loadGrammarWithConfiguration(initialScopeName, initialLanguage, { embeddedLanguages });\n  }\n  /**\n   * Load the grammar for `scopeName` and all referenced included grammars asynchronously.\n   * Please do not use language id 0.\n   */\n  loadGrammarWithConfiguration(initialScopeName, initialLanguage, configuration) {\n    return this._loadGrammar(\n      initialScopeName,\n      initialLanguage,\n      configuration.embeddedLanguages,\n      configuration.tokenTypes,\n      new BalancedBracketSelectors(\n        configuration.balancedBracketSelectors || [],\n        configuration.unbalancedBracketSelectors || []\n      )\n    );\n  }\n  /**\n   * Load the grammar for `scopeName` and all referenced included grammars asynchronously.\n   */\n  loadGrammar(initialScopeName) {\n    return this._loadGrammar(initialScopeName, 0, null, null, null);\n  }\n  _loadGrammar(initialScopeName, initialLanguage, embeddedLanguages, tokenTypes, balancedBracketSelectors) {\n    const dependencyProcessor = new ScopeDependencyProcessor(this._syncRegistry, initialScopeName);\n    while (dependencyProcessor.Q.length > 0) {\n      dependencyProcessor.Q.map((request) => this._loadSingleGrammar(request.scopeName));\n      dependencyProcessor.processQueue();\n    }\n    return this._grammarForScopeName(\n      initialScopeName,\n      initialLanguage,\n      embeddedLanguages,\n      tokenTypes,\n      balancedBracketSelectors\n    );\n  }\n  _loadSingleGrammar(scopeName) {\n    if (!this._ensureGrammarCache.has(scopeName)) {\n      this._doLoadSingleGrammar(scopeName);\n      this._ensureGrammarCache.set(scopeName, true);\n    }\n  }\n  _doLoadSingleGrammar(scopeName) {\n    const grammar = this._options.loadGrammar(scopeName);\n    if (grammar) {\n      const injections = typeof this._options.getInjections === \"function\" ? this._options.getInjections(scopeName) : void 0;\n      this._syncRegistry.addGrammar(grammar, injections);\n    }\n  }\n  /**\n   * Adds a rawGrammar.\n   */\n  addGrammar(rawGrammar, injections = [], initialLanguage = 0, embeddedLanguages = null) {\n    this._syncRegistry.addGrammar(rawGrammar, injections);\n    return this._grammarForScopeName(rawGrammar.scopeName, initialLanguage, embeddedLanguages);\n  }\n  /**\n   * Get the grammar for `scopeName`. The grammar must first be created via `loadGrammar` or `addGrammar`.\n   */\n  _grammarForScopeName(scopeName, initialLanguage = 0, embeddedLanguages = null, tokenTypes = null, balancedBracketSelectors = null) {\n    return this._syncRegistry.grammarForScopeName(\n      scopeName,\n      initialLanguage,\n      embeddedLanguages,\n      tokenTypes,\n      balancedBracketSelectors\n    );\n  }\n};\nvar INITIAL = StateStackImpl.NULL;\nexport {\n  EncodedTokenMetadata,\n  FindOption,\n  FontStyle,\n  INITIAL,\n  Registry,\n  Theme,\n  disposeOnigString\n};\n","/**\n * List of HTML void tag names.\n *\n * @type {Array<string>}\n */\nexport const htmlVoidElements = [\n  'area',\n  'base',\n  'basefont',\n  'bgsound',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'frame',\n  'hr',\n  'image',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]\n","/**\n * @import {Schema as SchemaType, Space} from 'property-information'\n */\n\n/** @type {SchemaType} */\nexport class Schema {\n  /**\n   * @param {SchemaType['property']} property\n   *   Property.\n   * @param {SchemaType['normal']} normal\n   *   Normal.\n   * @param {Space | undefined} [space]\n   *   Space.\n   * @returns\n   *   Schema.\n   */\n  constructor(property, normal, space) {\n    this.normal = normal\n    this.property = property\n\n    if (space) {\n      this.space = space\n    }\n  }\n}\n\nSchema.prototype.normal = {}\nSchema.prototype.property = {}\nSchema.prototype.space = undefined\n","/**\n * @import {Info, Space} from 'property-information'\n */\n\nimport {Schema} from './schema.js'\n\n/**\n * @param {ReadonlyArray<Schema>} definitions\n *   Definitions.\n * @param {Space | undefined} [space]\n *   Space.\n * @returns {Schema}\n *   Schema.\n */\nexport function merge(definitions, space) {\n  /** @type {Record<string, Info>} */\n  const property = {}\n  /** @type {Record<string, string>} */\n  const normal = {}\n\n  for (const definition of definitions) {\n    Object.assign(property, definition.property)\n    Object.assign(normal, definition.normal)\n  }\n\n  return new Schema(property, normal, space)\n}\n","/**\n * Get the cleaned case insensitive form of an attribute or property.\n *\n * @param {string} value\n *   An attribute-like or property-like name.\n * @returns {string}\n *   Value that can be used to look up the properly cased property on a\n *   `Schema`.\n */\nexport function normalize(value) {\n  return value.toLowerCase()\n}\n","/**\n * @import {Info as InfoType} from 'property-information'\n */\n\n/** @type {InfoType} */\nexport class Info {\n  /**\n   * @param {string} property\n   *   Property.\n   * @param {string} attribute\n   *   Attribute.\n   * @returns\n   *   Info.\n   */\n  constructor(property, attribute) {\n    this.attribute = attribute\n    this.property = property\n  }\n}\n\nInfo.prototype.attribute = ''\nInfo.prototype.booleanish = false\nInfo.prototype.boolean = false\nInfo.prototype.commaOrSpaceSeparated = false\nInfo.prototype.commaSeparated = false\nInfo.prototype.defined = false\nInfo.prototype.mustUseProperty = false\nInfo.prototype.number = false\nInfo.prototype.overloadedBoolean = false\nInfo.prototype.property = ''\nInfo.prototype.spaceSeparated = false\nInfo.prototype.space = undefined\n","let powers = 0\n\nexport const boolean = increment()\nexport const booleanish = increment()\nexport const overloadedBoolean = increment()\nexport const number = increment()\nexport const spaceSeparated = increment()\nexport const commaSeparated = increment()\nexport const commaOrSpaceSeparated = increment()\n\nfunction increment() {\n  return 2 ** ++powers\n}\n","/**\n * @import {Space} from 'property-information'\n */\n\nimport {Info} from './info.js'\nimport * as types from './types.js'\n\nconst checks = /** @type {ReadonlyArray<keyof typeof types>} */ (\n  Object.keys(types)\n)\n\nexport class DefinedInfo extends Info {\n  /**\n   * @constructor\n   * @param {string} property\n   *   Property.\n   * @param {string} attribute\n   *   Attribute.\n   * @param {number | null | undefined} [mask]\n   *   Mask.\n   * @param {Space | undefined} [space]\n   *   Space.\n   * @returns\n   *   Info.\n   */\n  constructor(property, attribute, mask, space) {\n    let index = -1\n\n    super(property, attribute)\n\n    mark(this, 'space', space)\n\n    if (typeof mask === 'number') {\n      while (++index < checks.length) {\n        const check = checks[index]\n        mark(this, checks[index], (mask & types[check]) === types[check])\n      }\n    }\n  }\n}\n\nDefinedInfo.prototype.defined = true\n\n/**\n * @template {keyof DefinedInfo} Key\n *   Key type.\n * @param {DefinedInfo} values\n *   Info.\n * @param {Key} key\n *   Key.\n * @param {DefinedInfo[Key]} value\n *   Value.\n * @returns {undefined}\n *   Nothing.\n */\nfunction mark(values, key, value) {\n  if (value) {\n    values[key] = value\n  }\n}\n","/**\n * @import {Info, Space} from 'property-information'\n */\n\n/**\n * @typedef Definition\n *   Definition of a schema.\n * @property {Record<string, string> | undefined} [attributes]\n *   Normalzed names to special attribute case.\n * @property {ReadonlyArray<string> | undefined} [mustUseProperty]\n *   Normalized names that must be set as properties.\n * @property {Record<string, number | null>} properties\n *   Property names to their types.\n * @property {Space | undefined} [space]\n *   Space.\n * @property {Transform} transform\n *   Transform a property name.\n */\n\n/**\n * @callback Transform\n *   Transform.\n * @param {Record<string, string>} attributes\n *   Attributes.\n * @param {string} property\n *   Property.\n * @returns {string}\n *   Attribute.\n */\n\nimport {normalize} from '../normalize.js'\nimport {DefinedInfo} from './defined-info.js'\nimport {Schema} from './schema.js'\n\n/**\n * @param {Definition} definition\n *   Definition.\n * @returns {Schema}\n *   Schema.\n */\nexport function create(definition) {\n  /** @type {Record<string, Info>} */\n  const properties = {}\n  /** @type {Record<string, string>} */\n  const normals = {}\n\n  for (const [property, value] of Object.entries(definition.properties)) {\n    const info = new DefinedInfo(\n      property,\n      definition.transform(definition.attributes || {}, property),\n      value,\n      definition.space\n    )\n\n    if (\n      definition.mustUseProperty &&\n      definition.mustUseProperty.includes(property)\n    ) {\n      info.mustUseProperty = true\n    }\n\n    properties[property] = info\n\n    normals[normalize(property)] = property\n    normals[normalize(info.attribute)] = property\n  }\n\n  return new Schema(properties, normals, definition.space)\n}\n","import {create} from './util/create.js'\nimport {booleanish, number, spaceSeparated} from './util/types.js'\n\nexport const aria = create({\n  properties: {\n    ariaActiveDescendant: null,\n    ariaAtomic: booleanish,\n    ariaAutoComplete: null,\n    ariaBusy: booleanish,\n    ariaChecked: booleanish,\n    ariaColCount: number,\n    ariaColIndex: number,\n    ariaColSpan: number,\n    ariaControls: spaceSeparated,\n    ariaCurrent: null,\n    ariaDescribedBy: spaceSeparated,\n    ariaDetails: null,\n    ariaDisabled: booleanish,\n    ariaDropEffect: spaceSeparated,\n    ariaErrorMessage: null,\n    ariaExpanded: booleanish,\n    ariaFlowTo: spaceSeparated,\n    ariaGrabbed: booleanish,\n    ariaHasPopup: null,\n    ariaHidden: booleanish,\n    ariaInvalid: null,\n    ariaKeyShortcuts: null,\n    ariaLabel: null,\n    ariaLabelledBy: spaceSeparated,\n    ariaLevel: number,\n    ariaLive: null,\n    ariaModal: booleanish,\n    ariaMultiLine: booleanish,\n    ariaMultiSelectable: booleanish,\n    ariaOrientation: null,\n    ariaOwns: spaceSeparated,\n    ariaPlaceholder: null,\n    ariaPosInSet: number,\n    ariaPressed: booleanish,\n    ariaReadOnly: booleanish,\n    ariaRelevant: null,\n    ariaRequired: booleanish,\n    ariaRoleDescription: spaceSeparated,\n    ariaRowCount: number,\n    ariaRowIndex: number,\n    ariaRowSpan: number,\n    ariaSelected: booleanish,\n    ariaSetSize: number,\n    ariaSort: null,\n    ariaValueMax: number,\n    ariaValueMin: number,\n    ariaValueNow: number,\n    ariaValueText: null,\n    role: null\n  },\n  transform(_, property) {\n    return property === 'role'\n      ? property\n      : 'aria-' + property.slice(4).toLowerCase()\n  }\n})\n","/**\n * @param {Record<string, string>} attributes\n *   Attributes.\n * @param {string} attribute\n *   Attribute.\n * @returns {string}\n *   Transformed attribute.\n */\nexport function caseSensitiveTransform(attributes, attribute) {\n  return attribute in attributes ? attributes[attribute] : attribute\n}\n","import {caseSensitiveTransform} from './case-sensitive-transform.js'\n\n/**\n * @param {Record<string, string>} attributes\n *   Attributes.\n * @param {string} property\n *   Property.\n * @returns {string}\n *   Transformed property.\n */\nexport function caseInsensitiveTransform(attributes, property) {\n  return caseSensitiveTransform(attributes, property.toLowerCase())\n}\n","import {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\nimport {create} from './util/create.js'\nimport {\n  booleanish,\n  boolean,\n  commaSeparated,\n  number,\n  overloadedBoolean,\n  spaceSeparated\n} from './util/types.js'\n\nexport const html = create({\n  attributes: {\n    acceptcharset: 'accept-charset',\n    classname: 'class',\n    htmlfor: 'for',\n    httpequiv: 'http-equiv'\n  },\n  mustUseProperty: ['checked', 'multiple', 'muted', 'selected'],\n  properties: {\n    // Standard Properties.\n    abbr: null,\n    accept: commaSeparated,\n    acceptCharset: spaceSeparated,\n    accessKey: spaceSeparated,\n    action: null,\n    allow: null,\n    allowFullScreen: boolean,\n    allowPaymentRequest: boolean,\n    allowUserMedia: boolean,\n    alt: null,\n    as: null,\n    async: boolean,\n    autoCapitalize: null,\n    autoComplete: spaceSeparated,\n    autoFocus: boolean,\n    autoPlay: boolean,\n    blocking: spaceSeparated,\n    capture: null,\n    charSet: null,\n    checked: boolean,\n    cite: null,\n    className: spaceSeparated,\n    cols: number,\n    colSpan: null,\n    content: null,\n    contentEditable: booleanish,\n    controls: boolean,\n    controlsList: spaceSeparated,\n    coords: number | commaSeparated,\n    crossOrigin: null,\n    data: null,\n    dateTime: null,\n    decoding: null,\n    default: boolean,\n    defer: boolean,\n    dir: null,\n    dirName: null,\n    disabled: boolean,\n    download: overloadedBoolean,\n    draggable: booleanish,\n    encType: null,\n    enterKeyHint: null,\n    fetchPriority: null,\n    form: null,\n    formAction: null,\n    formEncType: null,\n    formMethod: null,\n    formNoValidate: boolean,\n    formTarget: null,\n    headers: spaceSeparated,\n    height: number,\n    hidden: overloadedBoolean,\n    high: number,\n    href: null,\n    hrefLang: null,\n    htmlFor: spaceSeparated,\n    httpEquiv: spaceSeparated,\n    id: null,\n    imageSizes: null,\n    imageSrcSet: null,\n    inert: boolean,\n    inputMode: null,\n    integrity: null,\n    is: null,\n    isMap: boolean,\n    itemId: null,\n    itemProp: spaceSeparated,\n    itemRef: spaceSeparated,\n    itemScope: boolean,\n    itemType: spaceSeparated,\n    kind: null,\n    label: null,\n    lang: null,\n    language: null,\n    list: null,\n    loading: null,\n    loop: boolean,\n    low: number,\n    manifest: null,\n    max: null,\n    maxLength: number,\n    media: null,\n    method: null,\n    min: null,\n    minLength: number,\n    multiple: boolean,\n    muted: boolean,\n    name: null,\n    nonce: null,\n    noModule: boolean,\n    noValidate: boolean,\n    onAbort: null,\n    onAfterPrint: null,\n    onAuxClick: null,\n    onBeforeMatch: null,\n    onBeforePrint: null,\n    onBeforeToggle: null,\n    onBeforeUnload: null,\n    onBlur: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onContextLost: null,\n    onContextMenu: null,\n    onContextRestored: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFormData: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLanguageChange: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadEnd: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMessageError: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRejectionHandled: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onScrollEnd: null,\n    onSecurityPolicyViolation: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onSlotChange: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnhandledRejection: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onWheel: null,\n    open: boolean,\n    optimum: number,\n    pattern: null,\n    ping: spaceSeparated,\n    placeholder: null,\n    playsInline: boolean,\n    popover: null,\n    popoverTarget: null,\n    popoverTargetAction: null,\n    poster: null,\n    preload: null,\n    readOnly: boolean,\n    referrerPolicy: null,\n    rel: spaceSeparated,\n    required: boolean,\n    reversed: boolean,\n    rows: number,\n    rowSpan: number,\n    sandbox: spaceSeparated,\n    scope: null,\n    scoped: boolean,\n    seamless: boolean,\n    selected: boolean,\n    shadowRootClonable: boolean,\n    shadowRootDelegatesFocus: boolean,\n    shadowRootMode: null,\n    shape: null,\n    size: number,\n    sizes: null,\n    slot: null,\n    span: number,\n    spellCheck: booleanish,\n    src: null,\n    srcDoc: null,\n    srcLang: null,\n    srcSet: null,\n    start: number,\n    step: null,\n    style: null,\n    tabIndex: number,\n    target: null,\n    title: null,\n    translate: null,\n    type: null,\n    typeMustMatch: boolean,\n    useMap: null,\n    value: booleanish,\n    width: number,\n    wrap: null,\n    writingSuggestions: null,\n\n    // Legacy.\n    // See: https://html.spec.whatwg.org/#other-elements,-attributes-and-apis\n    align: null, // Several. Use CSS `text-align` instead,\n    aLink: null, // `<body>`. Use CSS `a:active {color}` instead\n    archive: spaceSeparated, // `<object>`. List of URIs to archives\n    axis: null, // `<td>` and `<th>`. Use `scope` on `<th>`\n    background: null, // `<body>`. Use CSS `background-image` instead\n    bgColor: null, // `<body>` and table elements. Use CSS `background-color` instead\n    border: number, // `<table>`. Use CSS `border-width` instead,\n    borderColor: null, // `<table>`. Use CSS `border-color` instead,\n    bottomMargin: number, // `<body>`\n    cellPadding: null, // `<table>`\n    cellSpacing: null, // `<table>`\n    char: null, // Several table elements. When `align=char`, sets the character to align on\n    charOff: null, // Several table elements. When `char`, offsets the alignment\n    classId: null, // `<object>`\n    clear: null, // `<br>`. Use CSS `clear` instead\n    code: null, // `<object>`\n    codeBase: null, // `<object>`\n    codeType: null, // `<object>`\n    color: null, // `<font>` and `<hr>`. Use CSS instead\n    compact: boolean, // Lists. Use CSS to reduce space between items instead\n    declare: boolean, // `<object>`\n    event: null, // `<script>`\n    face: null, // `<font>`. Use CSS instead\n    frame: null, // `<table>`\n    frameBorder: null, // `<iframe>`. Use CSS `border` instead\n    hSpace: number, // `<img>` and `<object>`\n    leftMargin: number, // `<body>`\n    link: null, // `<body>`. Use CSS `a:link {color: *}` instead\n    longDesc: null, // `<frame>`, `<iframe>`, and `<img>`. Use an `<a>`\n    lowSrc: null, // `<img>`. Use a `<picture>`\n    marginHeight: number, // `<body>`\n    marginWidth: number, // `<body>`\n    noResize: boolean, // `<frame>`\n    noHref: boolean, // `<area>`. Use no href instead of an explicit `nohref`\n    noShade: boolean, // `<hr>`. Use background-color and height instead of borders\n    noWrap: boolean, // `<td>` and `<th>`\n    object: null, // `<applet>`\n    profile: null, // `<head>`\n    prompt: null, // `<isindex>`\n    rev: null, // `<link>`\n    rightMargin: number, // `<body>`\n    rules: null, // `<table>`\n    scheme: null, // `<meta>`\n    scrolling: booleanish, // `<frame>`. Use overflow in the child context\n    standby: null, // `<object>`\n    summary: null, // `<table>`\n    text: null, // `<body>`. Use CSS `color` instead\n    topMargin: number, // `<body>`\n    valueType: null, // `<param>`\n    version: null, // `<html>`. Use a doctype.\n    vAlign: null, // Several. Use CSS `vertical-align` instead\n    vLink: null, // `<body>`. Use CSS `a:visited {color}` instead\n    vSpace: number, // `<img>` and `<object>`\n\n    // Non-standard Properties.\n    allowTransparency: null,\n    autoCorrect: null,\n    autoSave: null,\n    disablePictureInPicture: boolean,\n    disableRemotePlayback: boolean,\n    prefix: null,\n    property: null,\n    results: number,\n    security: null,\n    unselectable: null\n  },\n  space: 'html',\n  transform: caseInsensitiveTransform\n})\n","import {caseSensitiveTransform} from './util/case-sensitive-transform.js'\nimport {create} from './util/create.js'\nimport {\n  boolean,\n  commaOrSpaceSeparated,\n  commaSeparated,\n  number,\n  spaceSeparated\n} from './util/types.js'\n\nexport const svg = create({\n  attributes: {\n    accentHeight: 'accent-height',\n    alignmentBaseline: 'alignment-baseline',\n    arabicForm: 'arabic-form',\n    baselineShift: 'baseline-shift',\n    capHeight: 'cap-height',\n    className: 'class',\n    clipPath: 'clip-path',\n    clipRule: 'clip-rule',\n    colorInterpolation: 'color-interpolation',\n    colorInterpolationFilters: 'color-interpolation-filters',\n    colorProfile: 'color-profile',\n    colorRendering: 'color-rendering',\n    crossOrigin: 'crossorigin',\n    dataType: 'datatype',\n    dominantBaseline: 'dominant-baseline',\n    enableBackground: 'enable-background',\n    fillOpacity: 'fill-opacity',\n    fillRule: 'fill-rule',\n    floodColor: 'flood-color',\n    floodOpacity: 'flood-opacity',\n    fontFamily: 'font-family',\n    fontSize: 'font-size',\n    fontSizeAdjust: 'font-size-adjust',\n    fontStretch: 'font-stretch',\n    fontStyle: 'font-style',\n    fontVariant: 'font-variant',\n    fontWeight: 'font-weight',\n    glyphName: 'glyph-name',\n    glyphOrientationHorizontal: 'glyph-orientation-horizontal',\n    glyphOrientationVertical: 'glyph-orientation-vertical',\n    hrefLang: 'hreflang',\n    horizAdvX: 'horiz-adv-x',\n    horizOriginX: 'horiz-origin-x',\n    horizOriginY: 'horiz-origin-y',\n    imageRendering: 'image-rendering',\n    letterSpacing: 'letter-spacing',\n    lightingColor: 'lighting-color',\n    markerEnd: 'marker-end',\n    markerMid: 'marker-mid',\n    markerStart: 'marker-start',\n    navDown: 'nav-down',\n    navDownLeft: 'nav-down-left',\n    navDownRight: 'nav-down-right',\n    navLeft: 'nav-left',\n    navNext: 'nav-next',\n    navPrev: 'nav-prev',\n    navRight: 'nav-right',\n    navUp: 'nav-up',\n    navUpLeft: 'nav-up-left',\n    navUpRight: 'nav-up-right',\n    onAbort: 'onabort',\n    onActivate: 'onactivate',\n    onAfterPrint: 'onafterprint',\n    onBeforePrint: 'onbeforeprint',\n    onBegin: 'onbegin',\n    onCancel: 'oncancel',\n    onCanPlay: 'oncanplay',\n    onCanPlayThrough: 'oncanplaythrough',\n    onChange: 'onchange',\n    onClick: 'onclick',\n    onClose: 'onclose',\n    onCopy: 'oncopy',\n    onCueChange: 'oncuechange',\n    onCut: 'oncut',\n    onDblClick: 'ondblclick',\n    onDrag: 'ondrag',\n    onDragEnd: 'ondragend',\n    onDragEnter: 'ondragenter',\n    onDragExit: 'ondragexit',\n    onDragLeave: 'ondragleave',\n    onDragOver: 'ondragover',\n    onDragStart: 'ondragstart',\n    onDrop: 'ondrop',\n    onDurationChange: 'ondurationchange',\n    onEmptied: 'onemptied',\n    onEnd: 'onend',\n    onEnded: 'onended',\n    onError: 'onerror',\n    onFocus: 'onfocus',\n    onFocusIn: 'onfocusin',\n    onFocusOut: 'onfocusout',\n    onHashChange: 'onhashchange',\n    onInput: 'oninput',\n    onInvalid: 'oninvalid',\n    onKeyDown: 'onkeydown',\n    onKeyPress: 'onkeypress',\n    onKeyUp: 'onkeyup',\n    onLoad: 'onload',\n    onLoadedData: 'onloadeddata',\n    onLoadedMetadata: 'onloadedmetadata',\n    onLoadStart: 'onloadstart',\n    onMessage: 'onmessage',\n    onMouseDown: 'onmousedown',\n    onMouseEnter: 'onmouseenter',\n    onMouseLeave: 'onmouseleave',\n    onMouseMove: 'onmousemove',\n    onMouseOut: 'onmouseout',\n    onMouseOver: 'onmouseover',\n    onMouseUp: 'onmouseup',\n    onMouseWheel: 'onmousewheel',\n    onOffline: 'onoffline',\n    onOnline: 'ononline',\n    onPageHide: 'onpagehide',\n    onPageShow: 'onpageshow',\n    onPaste: 'onpaste',\n    onPause: 'onpause',\n    onPlay: 'onplay',\n    onPlaying: 'onplaying',\n    onPopState: 'onpopstate',\n    onProgress: 'onprogress',\n    onRateChange: 'onratechange',\n    onRepeat: 'onrepeat',\n    onReset: 'onreset',\n    onResize: 'onresize',\n    onScroll: 'onscroll',\n    onSeeked: 'onseeked',\n    onSeeking: 'onseeking',\n    onSelect: 'onselect',\n    onShow: 'onshow',\n    onStalled: 'onstalled',\n    onStorage: 'onstorage',\n    onSubmit: 'onsubmit',\n    onSuspend: 'onsuspend',\n    onTimeUpdate: 'ontimeupdate',\n    onToggle: 'ontoggle',\n    onUnload: 'onunload',\n    onVolumeChange: 'onvolumechange',\n    onWaiting: 'onwaiting',\n    onZoom: 'onzoom',\n    overlinePosition: 'overline-position',\n    overlineThickness: 'overline-thickness',\n    paintOrder: 'paint-order',\n    panose1: 'panose-1',\n    pointerEvents: 'pointer-events',\n    referrerPolicy: 'referrerpolicy',\n    renderingIntent: 'rendering-intent',\n    shapeRendering: 'shape-rendering',\n    stopColor: 'stop-color',\n    stopOpacity: 'stop-opacity',\n    strikethroughPosition: 'strikethrough-position',\n    strikethroughThickness: 'strikethrough-thickness',\n    strokeDashArray: 'stroke-dasharray',\n    strokeDashOffset: 'stroke-dashoffset',\n    strokeLineCap: 'stroke-linecap',\n    strokeLineJoin: 'stroke-linejoin',\n    strokeMiterLimit: 'stroke-miterlimit',\n    strokeOpacity: 'stroke-opacity',\n    strokeWidth: 'stroke-width',\n    tabIndex: 'tabindex',\n    textAnchor: 'text-anchor',\n    textDecoration: 'text-decoration',\n    textRendering: 'text-rendering',\n    transformOrigin: 'transform-origin',\n    typeOf: 'typeof',\n    underlinePosition: 'underline-position',\n    underlineThickness: 'underline-thickness',\n    unicodeBidi: 'unicode-bidi',\n    unicodeRange: 'unicode-range',\n    unitsPerEm: 'units-per-em',\n    vAlphabetic: 'v-alphabetic',\n    vHanging: 'v-hanging',\n    vIdeographic: 'v-ideographic',\n    vMathematical: 'v-mathematical',\n    vectorEffect: 'vector-effect',\n    vertAdvY: 'vert-adv-y',\n    vertOriginX: 'vert-origin-x',\n    vertOriginY: 'vert-origin-y',\n    wordSpacing: 'word-spacing',\n    writingMode: 'writing-mode',\n    xHeight: 'x-height',\n    // These were camelcased in Tiny. Now lowercased in SVG 2\n    playbackOrder: 'playbackorder',\n    timelineBegin: 'timelinebegin'\n  },\n  properties: {\n    about: commaOrSpaceSeparated,\n    accentHeight: number,\n    accumulate: null,\n    additive: null,\n    alignmentBaseline: null,\n    alphabetic: number,\n    amplitude: number,\n    arabicForm: null,\n    ascent: number,\n    attributeName: null,\n    attributeType: null,\n    azimuth: number,\n    bandwidth: null,\n    baselineShift: null,\n    baseFrequency: null,\n    baseProfile: null,\n    bbox: null,\n    begin: null,\n    bias: number,\n    by: null,\n    calcMode: null,\n    capHeight: number,\n    className: spaceSeparated,\n    clip: null,\n    clipPath: null,\n    clipPathUnits: null,\n    clipRule: null,\n    color: null,\n    colorInterpolation: null,\n    colorInterpolationFilters: null,\n    colorProfile: null,\n    colorRendering: null,\n    content: null,\n    contentScriptType: null,\n    contentStyleType: null,\n    crossOrigin: null,\n    cursor: null,\n    cx: null,\n    cy: null,\n    d: null,\n    dataType: null,\n    defaultAction: null,\n    descent: number,\n    diffuseConstant: number,\n    direction: null,\n    display: null,\n    dur: null,\n    divisor: number,\n    dominantBaseline: null,\n    download: boolean,\n    dx: null,\n    dy: null,\n    edgeMode: null,\n    editable: null,\n    elevation: number,\n    enableBackground: null,\n    end: null,\n    event: null,\n    exponent: number,\n    externalResourcesRequired: null,\n    fill: null,\n    fillOpacity: number,\n    fillRule: null,\n    filter: null,\n    filterRes: null,\n    filterUnits: null,\n    floodColor: null,\n    floodOpacity: null,\n    focusable: null,\n    focusHighlight: null,\n    fontFamily: null,\n    fontSize: null,\n    fontSizeAdjust: null,\n    fontStretch: null,\n    fontStyle: null,\n    fontVariant: null,\n    fontWeight: null,\n    format: null,\n    fr: null,\n    from: null,\n    fx: null,\n    fy: null,\n    g1: commaSeparated,\n    g2: commaSeparated,\n    glyphName: commaSeparated,\n    glyphOrientationHorizontal: null,\n    glyphOrientationVertical: null,\n    glyphRef: null,\n    gradientTransform: null,\n    gradientUnits: null,\n    handler: null,\n    hanging: number,\n    hatchContentUnits: null,\n    hatchUnits: null,\n    height: null,\n    href: null,\n    hrefLang: null,\n    horizAdvX: number,\n    horizOriginX: number,\n    horizOriginY: number,\n    id: null,\n    ideographic: number,\n    imageRendering: null,\n    initialVisibility: null,\n    in: null,\n    in2: null,\n    intercept: number,\n    k: number,\n    k1: number,\n    k2: number,\n    k3: number,\n    k4: number,\n    kernelMatrix: commaOrSpaceSeparated,\n    kernelUnitLength: null,\n    keyPoints: null, // SEMI_COLON_SEPARATED\n    keySplines: null, // SEMI_COLON_SEPARATED\n    keyTimes: null, // SEMI_COLON_SEPARATED\n    kerning: null,\n    lang: null,\n    lengthAdjust: null,\n    letterSpacing: null,\n    lightingColor: null,\n    limitingConeAngle: number,\n    local: null,\n    markerEnd: null,\n    markerMid: null,\n    markerStart: null,\n    markerHeight: null,\n    markerUnits: null,\n    markerWidth: null,\n    mask: null,\n    maskContentUnits: null,\n    maskUnits: null,\n    mathematical: null,\n    max: null,\n    media: null,\n    mediaCharacterEncoding: null,\n    mediaContentEncodings: null,\n    mediaSize: number,\n    mediaTime: null,\n    method: null,\n    min: null,\n    mode: null,\n    name: null,\n    navDown: null,\n    navDownLeft: null,\n    navDownRight: null,\n    navLeft: null,\n    navNext: null,\n    navPrev: null,\n    navRight: null,\n    navUp: null,\n    navUpLeft: null,\n    navUpRight: null,\n    numOctaves: null,\n    observer: null,\n    offset: null,\n    onAbort: null,\n    onActivate: null,\n    onAfterPrint: null,\n    onBeforePrint: null,\n    onBegin: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnd: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFocusIn: null,\n    onFocusOut: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onMouseWheel: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRepeat: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onShow: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onZoom: null,\n    opacity: null,\n    operator: null,\n    order: null,\n    orient: null,\n    orientation: null,\n    origin: null,\n    overflow: null,\n    overlay: null,\n    overlinePosition: number,\n    overlineThickness: number,\n    paintOrder: null,\n    panose1: null,\n    path: null,\n    pathLength: number,\n    patternContentUnits: null,\n    patternTransform: null,\n    patternUnits: null,\n    phase: null,\n    ping: spaceSeparated,\n    pitch: null,\n    playbackOrder: null,\n    pointerEvents: null,\n    points: null,\n    pointsAtX: number,\n    pointsAtY: number,\n    pointsAtZ: number,\n    preserveAlpha: null,\n    preserveAspectRatio: null,\n    primitiveUnits: null,\n    propagate: null,\n    property: commaOrSpaceSeparated,\n    r: null,\n    radius: null,\n    referrerPolicy: null,\n    refX: null,\n    refY: null,\n    rel: commaOrSpaceSeparated,\n    rev: commaOrSpaceSeparated,\n    renderingIntent: null,\n    repeatCount: null,\n    repeatDur: null,\n    requiredExtensions: commaOrSpaceSeparated,\n    requiredFeatures: commaOrSpaceSeparated,\n    requiredFonts: commaOrSpaceSeparated,\n    requiredFormats: commaOrSpaceSeparated,\n    resource: null,\n    restart: null,\n    result: null,\n    rotate: null,\n    rx: null,\n    ry: null,\n    scale: null,\n    seed: null,\n    shapeRendering: null,\n    side: null,\n    slope: null,\n    snapshotTime: null,\n    specularConstant: number,\n    specularExponent: number,\n    spreadMethod: null,\n    spacing: null,\n    startOffset: null,\n    stdDeviation: null,\n    stemh: null,\n    stemv: null,\n    stitchTiles: null,\n    stopColor: null,\n    stopOpacity: null,\n    strikethroughPosition: number,\n    strikethroughThickness: number,\n    string: null,\n    stroke: null,\n    strokeDashArray: commaOrSpaceSeparated,\n    strokeDashOffset: null,\n    strokeLineCap: null,\n    strokeLineJoin: null,\n    strokeMiterLimit: number,\n    strokeOpacity: number,\n    strokeWidth: null,\n    style: null,\n    surfaceScale: number,\n    syncBehavior: null,\n    syncBehaviorDefault: null,\n    syncMaster: null,\n    syncTolerance: null,\n    syncToleranceDefault: null,\n    systemLanguage: commaOrSpaceSeparated,\n    tabIndex: number,\n    tableValues: null,\n    target: null,\n    targetX: number,\n    targetY: number,\n    textAnchor: null,\n    textDecoration: null,\n    textRendering: null,\n    textLength: null,\n    timelineBegin: null,\n    title: null,\n    transformBehavior: null,\n    type: null,\n    typeOf: commaOrSpaceSeparated,\n    to: null,\n    transform: null,\n    transformOrigin: null,\n    u1: null,\n    u2: null,\n    underlinePosition: number,\n    underlineThickness: number,\n    unicode: null,\n    unicodeBidi: null,\n    unicodeRange: null,\n    unitsPerEm: number,\n    values: null,\n    vAlphabetic: number,\n    vMathematical: number,\n    vectorEffect: null,\n    vHanging: number,\n    vIdeographic: number,\n    version: null,\n    vertAdvY: number,\n    vertOriginX: number,\n    vertOriginY: number,\n    viewBox: null,\n    viewTarget: null,\n    visibility: null,\n    width: null,\n    widths: null,\n    wordSpacing: null,\n    writingMode: null,\n    x: null,\n    x1: null,\n    x2: null,\n    xChannelSelector: null,\n    xHeight: number,\n    y: null,\n    y1: null,\n    y2: null,\n    yChannelSelector: null,\n    z: null,\n    zoomAndPan: null\n  },\n  space: 'svg',\n  transform: caseSensitiveTransform\n})\n","import {create} from './util/create.js'\n\nexport const xlink = create({\n  properties: {\n    xLinkActuate: null,\n    xLinkArcRole: null,\n    xLinkHref: null,\n    xLinkRole: null,\n    xLinkShow: null,\n    xLinkTitle: null,\n    xLinkType: null\n  },\n  space: 'xlink',\n  transform(_, property) {\n    return 'xlink:' + property.slice(5).toLowerCase()\n  }\n})\n","import {create} from './util/create.js'\nimport {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\n\nexport const xmlns = create({\n  attributes: {xmlnsxlink: 'xmlns:xlink'},\n  properties: {xmlnsXLink: null, xmlns: null},\n  space: 'xmlns',\n  transform: caseInsensitiveTransform\n})\n","import {create} from './util/create.js'\n\nexport const xml = create({\n  properties: {xmlBase: null, xmlLang: null, xmlSpace: null},\n  space: 'xml',\n  transform(_, property) {\n    return 'xml:' + property.slice(3).toLowerCase()\n  }\n})\n","// Note: types exposed from `index.d.ts`.\nimport {merge} from './lib/util/merge.js'\nimport {aria} from './lib/aria.js'\nimport {html as htmlBase} from './lib/html.js'\nimport {svg as svgBase} from './lib/svg.js'\nimport {xlink} from './lib/xlink.js'\nimport {xmlns} from './lib/xmlns.js'\nimport {xml} from './lib/xml.js'\n\nexport {hastToReact} from './lib/hast-to-react.js'\n\nexport const html = merge([aria, htmlBase, xlink, xmlns, xml], 'html')\n\nexport {find} from './lib/find.js'\nexport {normalize} from './lib/normalize.js'\n\nexport const svg = merge([aria, svgBase, xlink, xmlns, xml], 'svg')\n","/**\n * @callback Handler\n *   Handle a value, with a certain ID field set to a certain value.\n *   The ID field is passed to `zwitch`, and its value is this functions\n *   place on the `handlers` record.\n * @param {...any} parameters\n *   Arbitrary parameters passed to the zwitch.\n *   The first will be an object with a certain ID field set to a certain value.\n * @returns {any}\n *   Anything!\n */\n\n/**\n * @callback UnknownHandler\n *   Handle values that do have a certain ID field, but its set to a value\n *   that is not listed in the `handlers` record.\n * @param {unknown} value\n *   An object with a certain ID field set to an unknown value.\n * @param {...any} rest\n *   Arbitrary parameters passed to the zwitch.\n * @returns {any}\n *   Anything!\n */\n\n/**\n * @callback InvalidHandler\n *   Handle values that do not have a certain ID field.\n * @param {unknown} value\n *   Any unknown value.\n * @param {...any} rest\n *   Arbitrary parameters passed to the zwitch.\n * @returns {void|null|undefined|never}\n *   This should crash or return nothing.\n */\n\n/**\n * @template {InvalidHandler} [Invalid=InvalidHandler]\n * @template {UnknownHandler} [Unknown=UnknownHandler]\n * @template {Record<string, Handler>} [Handlers=Record<string, Handler>]\n * @typedef Options\n *   Configuration (required).\n * @property {Invalid} [invalid]\n *   Handler to use for invalid values.\n * @property {Unknown} [unknown]\n *   Handler to use for unknown values.\n * @property {Handlers} [handlers]\n *   Handlers to use.\n */\n\nconst own = {}.hasOwnProperty\n\n/**\n * Handle values based on a field.\n *\n * @template {InvalidHandler} [Invalid=InvalidHandler]\n * @template {UnknownHandler} [Unknown=UnknownHandler]\n * @template {Record<string, Handler>} [Handlers=Record<string, Handler>]\n * @param {string} key\n *   Field to switch on.\n * @param {Options<Invalid, Unknown, Handlers>} [options]\n *   Configuration (required).\n * @returns {{unknown: Unknown, invalid: Invalid, handlers: Handlers, (...parameters: Parameters<Handlers[keyof Handlers]>): ReturnType<Handlers[keyof Handlers]>, (...parameters: Parameters<Unknown>): ReturnType<Unknown>}}\n */\nexport function zwitch(key, options) {\n  const settings = options || {}\n\n  /**\n   * Handle one value.\n   *\n   * Based on the bound `key`, a respective handler will be called.\n   * If `value` is not an object, or doesnt have a `key` property, the special\n   * invalid handler will be called.\n   * If `value` has an unknown `key`, the special unknown handler will be\n   * called.\n   *\n   * All arguments, and the context object, are passed through to the handler,\n   * and its result is returned.\n   *\n   * @this {unknown}\n   *   Any context object.\n   * @param {unknown} [value]\n   *   Any value.\n   * @param {...unknown} parameters\n   *   Arbitrary parameters passed to the zwitch.\n   * @property {Handler} invalid\n   *   Handle for values that do not have a certain ID field.\n   * @property {Handler} unknown\n   *   Handle values that do have a certain ID field, but its set to a value\n   *   that is not listed in the `handlers` record.\n   * @property {Handlers} handlers\n   *   Record of handlers.\n   * @returns {unknown}\n   *   Anything.\n   */\n  function one(value, ...parameters) {\n    /** @type {Handler|undefined} */\n    let fn = one.invalid\n    const handlers = one.handlers\n\n    if (value && own.call(value, key)) {\n      // @ts-expect-error Indexable.\n      const id = String(value[key])\n      // @ts-expect-error Indexable.\n      fn = own.call(handlers, id) ? handlers[id] : one.unknown\n    }\n\n    if (fn) {\n      return fn.call(this, value, ...parameters)\n    }\n  }\n\n  one.handlers = settings.handlers || {}\n  one.invalid = settings.invalid\n  one.unknown = settings.unknown\n\n  // @ts-expect-error: matches!\n  return one\n}\n","/**\n * @typedef CoreOptions\n * @property {ReadonlyArray<string>} [subset=[]]\n *   Whether to only escape the given subset of characters.\n * @property {boolean} [escapeOnly=false]\n *   Whether to only escape possibly dangerous characters.\n *   Those characters are `\"`, `&`, `'`, `<`, `>`, and `` ` ``.\n *\n * @typedef FormatOptions\n * @property {(code: number, next: number, options: CoreWithFormatOptions) => string} format\n *   Format strategy.\n *\n * @typedef {CoreOptions & FormatOptions & import('./util/format-smart.js').FormatSmartOptions} CoreWithFormatOptions\n */\n\nconst defaultSubsetRegex = /[\"&'<>`]/g\nconst surrogatePairsRegex = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g\nconst controlCharactersRegex =\n  // eslint-disable-next-line no-control-regex, unicorn/no-hex-escape\n  /[\\x01-\\t\\v\\f\\x0E-\\x1F\\x7F\\x81\\x8D\\x8F\\x90\\x9D\\xA0-\\uFFFF]/g\nconst regexEscapeRegex = /[|\\\\{}()[\\]^$+*?.]/g\n\n/** @type {WeakMap<ReadonlyArray<string>, RegExp>} */\nconst subsetToRegexCache = new WeakMap()\n\n/**\n * Encode certain characters in `value`.\n *\n * @param {string} value\n * @param {CoreWithFormatOptions} options\n * @returns {string}\n */\nexport function core(value, options) {\n  value = value.replace(\n    options.subset\n      ? charactersToExpressionCached(options.subset)\n      : defaultSubsetRegex,\n    basic\n  )\n\n  if (options.subset || options.escapeOnly) {\n    return value\n  }\n\n  return (\n    value\n      // Surrogate pairs.\n      .replace(surrogatePairsRegex, surrogate)\n      // BMP control characters (C0 except for LF, CR, SP; DEL; and some more\n      // non-ASCII ones).\n      .replace(controlCharactersRegex, basic)\n  )\n\n  /**\n   * @param {string} pair\n   * @param {number} index\n   * @param {string} all\n   */\n  function surrogate(pair, index, all) {\n    return options.format(\n      (pair.charCodeAt(0) - 0xd800) * 0x400 +\n        pair.charCodeAt(1) -\n        0xdc00 +\n        0x10000,\n      all.charCodeAt(index + 2),\n      options\n    )\n  }\n\n  /**\n   * @param {string} character\n   * @param {number} index\n   * @param {string} all\n   */\n  function basic(character, index, all) {\n    return options.format(\n      character.charCodeAt(0),\n      all.charCodeAt(index + 1),\n      options\n    )\n  }\n}\n\n/**\n * A wrapper function that caches the result of `charactersToExpression` with a WeakMap.\n * This can improve performance when tooling calls `charactersToExpression` repeatedly\n * with the same subset.\n *\n * @param {ReadonlyArray<string>} subset\n * @returns {RegExp}\n */\nfunction charactersToExpressionCached(subset) {\n  let cached = subsetToRegexCache.get(subset)\n\n  if (!cached) {\n    cached = charactersToExpression(subset)\n    subsetToRegexCache.set(subset, cached)\n  }\n\n  return cached\n}\n\n/**\n * @param {ReadonlyArray<string>} subset\n * @returns {RegExp}\n */\nfunction charactersToExpression(subset) {\n  /** @type {Array<string>} */\n  const groups = []\n  let index = -1\n\n  while (++index < subset.length) {\n    groups.push(subset[index].replace(regexEscapeRegex, '\\\\$&'))\n  }\n\n  return new RegExp('(?:' + groups.join('|') + ')', 'g')\n}\n","const hexadecimalRegex = /[\\dA-Fa-f]/\n\n/**\n * Configurable ways to encode characters as hexadecimal references.\n *\n * @param {number} code\n * @param {number} next\n * @param {boolean|undefined} omit\n * @returns {string}\n */\nexport function toHexadecimal(code, next, omit) {\n  const value = '&#x' + code.toString(16).toUpperCase()\n  return omit && next && !hexadecimalRegex.test(String.fromCharCode(next))\n    ? value\n    : value + ';'\n}\n","const decimalRegex = /\\d/\n\n/**\n * Configurable ways to encode characters as decimal references.\n *\n * @param {number} code\n * @param {number} next\n * @param {boolean|undefined} omit\n * @returns {string}\n */\nexport function toDecimal(code, next, omit) {\n  const value = '&#' + String(code)\n  return omit && next && !decimalRegex.test(String.fromCharCode(next))\n    ? value\n    : value + ';'\n}\n","/**\n * List of legacy HTML named character references that dont need a trailing semicolon.\n *\n * @type {Array<string>}\n */\nexport const characterEntitiesLegacy = [\n  'AElig',\n  'AMP',\n  'Aacute',\n  'Acirc',\n  'Agrave',\n  'Aring',\n  'Atilde',\n  'Auml',\n  'COPY',\n  'Ccedil',\n  'ETH',\n  'Eacute',\n  'Ecirc',\n  'Egrave',\n  'Euml',\n  'GT',\n  'Iacute',\n  'Icirc',\n  'Igrave',\n  'Iuml',\n  'LT',\n  'Ntilde',\n  'Oacute',\n  'Ocirc',\n  'Ograve',\n  'Oslash',\n  'Otilde',\n  'Ouml',\n  'QUOT',\n  'REG',\n  'THORN',\n  'Uacute',\n  'Ucirc',\n  'Ugrave',\n  'Uuml',\n  'Yacute',\n  'aacute',\n  'acirc',\n  'acute',\n  'aelig',\n  'agrave',\n  'amp',\n  'aring',\n  'atilde',\n  'auml',\n  'brvbar',\n  'ccedil',\n  'cedil',\n  'cent',\n  'copy',\n  'curren',\n  'deg',\n  'divide',\n  'eacute',\n  'ecirc',\n  'egrave',\n  'eth',\n  'euml',\n  'frac12',\n  'frac14',\n  'frac34',\n  'gt',\n  'iacute',\n  'icirc',\n  'iexcl',\n  'igrave',\n  'iquest',\n  'iuml',\n  'laquo',\n  'lt',\n  'macr',\n  'micro',\n  'middot',\n  'nbsp',\n  'not',\n  'ntilde',\n  'oacute',\n  'ocirc',\n  'ograve',\n  'ordf',\n  'ordm',\n  'oslash',\n  'otilde',\n  'ouml',\n  'para',\n  'plusmn',\n  'pound',\n  'quot',\n  'raquo',\n  'reg',\n  'sect',\n  'shy',\n  'sup1',\n  'sup2',\n  'sup3',\n  'szlig',\n  'thorn',\n  'times',\n  'uacute',\n  'ucirc',\n  'ugrave',\n  'uml',\n  'uuml',\n  'yacute',\n  'yen',\n  'yuml'\n]\n","/**\n * Map of named character references from HTML 4.\n *\n * @type {Record<string, string>}\n */\nexport const characterEntitiesHtml4 = {\n  nbsp: '',\n  iexcl: '',\n  cent: '',\n  pound: '',\n  curren: '',\n  yen: '',\n  brvbar: '',\n  sect: '',\n  uml: '',\n  copy: '',\n  ordf: '',\n  laquo: '',\n  not: '',\n  shy: '',\n  reg: '',\n  macr: '',\n  deg: '',\n  plusmn: '',\n  sup2: '',\n  sup3: '',\n  acute: '',\n  micro: '',\n  para: '',\n  middot: '',\n  cedil: '',\n  sup1: '',\n  ordm: '',\n  raquo: '',\n  frac14: '',\n  frac12: '',\n  frac34: '',\n  iquest: '',\n  Agrave: '',\n  Aacute: '',\n  Acirc: '',\n  Atilde: '',\n  Auml: '',\n  Aring: '',\n  AElig: '',\n  Ccedil: '',\n  Egrave: '',\n  Eacute: '',\n  Ecirc: '',\n  Euml: '',\n  Igrave: '',\n  Iacute: '',\n  Icirc: '',\n  Iuml: '',\n  ETH: '',\n  Ntilde: '',\n  Ograve: '',\n  Oacute: '',\n  Ocirc: '',\n  Otilde: '',\n  Ouml: '',\n  times: '',\n  Oslash: '',\n  Ugrave: '',\n  Uacute: '',\n  Ucirc: '',\n  Uuml: '',\n  Yacute: '',\n  THORN: '',\n  szlig: '',\n  agrave: '',\n  aacute: '',\n  acirc: '',\n  atilde: '',\n  auml: '',\n  aring: '',\n  aelig: '',\n  ccedil: '',\n  egrave: '',\n  eacute: '',\n  ecirc: '',\n  euml: '',\n  igrave: '',\n  iacute: '',\n  icirc: '',\n  iuml: '',\n  eth: '',\n  ntilde: '',\n  ograve: '',\n  oacute: '',\n  ocirc: '',\n  otilde: '',\n  ouml: '',\n  divide: '',\n  oslash: '',\n  ugrave: '',\n  uacute: '',\n  ucirc: '',\n  uuml: '',\n  yacute: '',\n  thorn: '',\n  yuml: '',\n  fnof: '',\n  Alpha: '',\n  Beta: '',\n  Gamma: '',\n  Delta: '',\n  Epsilon: '',\n  Zeta: '',\n  Eta: '',\n  Theta: '',\n  Iota: '',\n  Kappa: '',\n  Lambda: '',\n  Mu: '',\n  Nu: '',\n  Xi: '',\n  Omicron: '',\n  Pi: '',\n  Rho: '',\n  Sigma: '',\n  Tau: '',\n  Upsilon: '',\n  Phi: '',\n  Chi: '',\n  Psi: '',\n  Omega: '',\n  alpha: '',\n  beta: '',\n  gamma: '',\n  delta: '',\n  epsilon: '',\n  zeta: '',\n  eta: '',\n  theta: '',\n  iota: '',\n  kappa: '',\n  lambda: '',\n  mu: '',\n  nu: '',\n  xi: '',\n  omicron: '',\n  pi: '',\n  rho: '',\n  sigmaf: '',\n  sigma: '',\n  tau: '',\n  upsilon: '',\n  phi: '',\n  chi: '',\n  psi: '',\n  omega: '',\n  thetasym: '',\n  upsih: '',\n  piv: '',\n  bull: '',\n  hellip: '',\n  prime: '',\n  Prime: '',\n  oline: '',\n  frasl: '',\n  weierp: '',\n  image: '',\n  real: '',\n  trade: '',\n  alefsym: '',\n  larr: '',\n  uarr: '',\n  rarr: '',\n  darr: '',\n  harr: '',\n  crarr: '',\n  lArr: '',\n  uArr: '',\n  rArr: '',\n  dArr: '',\n  hArr: '',\n  forall: '',\n  part: '',\n  exist: '',\n  empty: '',\n  nabla: '',\n  isin: '',\n  notin: '',\n  ni: '',\n  prod: '',\n  sum: '',\n  minus: '',\n  lowast: '',\n  radic: '',\n  prop: '',\n  infin: '',\n  ang: '',\n  and: '',\n  or: '',\n  cap: '',\n  cup: '',\n  int: '',\n  there4: '',\n  sim: '',\n  cong: '',\n  asymp: '',\n  ne: '',\n  equiv: '',\n  le: '',\n  ge: '',\n  sub: '',\n  sup: '',\n  nsub: '',\n  sube: '',\n  supe: '',\n  oplus: '',\n  otimes: '',\n  perp: '',\n  sdot: '',\n  lceil: '',\n  rceil: '',\n  lfloor: '',\n  rfloor: '',\n  lang: '',\n  rang: '',\n  loz: '',\n  spades: '',\n  clubs: '',\n  hearts: '',\n  diams: '',\n  quot: '\"',\n  amp: '&',\n  lt: '<',\n  gt: '>',\n  OElig: '',\n  oelig: '',\n  Scaron: '',\n  scaron: '',\n  Yuml: '',\n  circ: '',\n  tilde: '',\n  ensp: '',\n  emsp: '',\n  thinsp: '',\n  zwnj: '',\n  zwj: '',\n  lrm: '',\n  rlm: '',\n  ndash: '',\n  mdash: '',\n  lsquo: '',\n  rsquo: '',\n  sbquo: '',\n  ldquo: '',\n  rdquo: '',\n  bdquo: '',\n  dagger: '',\n  Dagger: '',\n  permil: '',\n  lsaquo: '',\n  rsaquo: '',\n  euro: ''\n}\n","/**\n * List of legacy (that dont need a trailing `;`) named references which could,\n * depending on what follows them, turn into a different meaning\n *\n * @type {Array<string>}\n */\nexport const dangerous = [\n  'cent',\n  'copy',\n  'divide',\n  'gt',\n  'lt',\n  'not',\n  'para',\n  'times'\n]\n","import {characterEntitiesLegacy} from 'character-entities-legacy'\nimport {characterEntitiesHtml4} from 'character-entities-html4'\nimport {dangerous} from '../constant/dangerous.js'\n\nconst own = {}.hasOwnProperty\n\n/**\n * `characterEntitiesHtml4` but inverted.\n *\n * @type {Record<string, string>}\n */\nconst characters = {}\n\n/** @type {string} */\nlet key\n\nfor (key in characterEntitiesHtml4) {\n  if (own.call(characterEntitiesHtml4, key)) {\n    characters[characterEntitiesHtml4[key]] = key\n  }\n}\n\nconst notAlphanumericRegex = /[^\\dA-Za-z]/\n\n/**\n * Configurable ways to encode characters as named references.\n *\n * @param {number} code\n * @param {number} next\n * @param {boolean|undefined} omit\n * @param {boolean|undefined} attribute\n * @returns {string}\n */\nexport function toNamed(code, next, omit, attribute) {\n  const character = String.fromCharCode(code)\n\n  if (own.call(characters, character)) {\n    const name = characters[character]\n    const value = '&' + name\n\n    if (\n      omit &&\n      characterEntitiesLegacy.includes(name) &&\n      !dangerous.includes(name) &&\n      (!attribute ||\n        (next &&\n          next !== 61 /* `=` */ &&\n          notAlphanumericRegex.test(String.fromCharCode(next))))\n    ) {\n      return value\n    }\n\n    return value + ';'\n  }\n\n  return ''\n}\n","/**\n * @typedef FormatSmartOptions\n * @property {boolean} [useNamedReferences=false]\n *   Prefer named character references (`&amp;`) where possible.\n * @property {boolean} [useShortestReferences=false]\n *   Prefer the shortest possible reference, if that results in less bytes.\n *   **Note**: `useNamedReferences` can be omitted when using `useShortestReferences`.\n * @property {boolean} [omitOptionalSemicolons=false]\n *   Whether to omit semicolons when possible.\n *   **Note**: This creates what HTML calls parse errors but is otherwise still valid HTML  dont use this except when building a minifier.\n *   Omitting semicolons is possible for certain named and numeric references in some cases.\n * @property {boolean} [attribute=false]\n *   Create character references which dont fail in attributes.\n *   **Note**: `attribute` only applies when operating dangerously with\n *   `omitOptionalSemicolons: true`.\n */\n\nimport {toHexadecimal} from './to-hexadecimal.js'\nimport {toDecimal} from './to-decimal.js'\nimport {toNamed} from './to-named.js'\n\n/**\n * Configurable ways to encode a character yielding pretty or small results.\n *\n * @param {number} code\n * @param {number} next\n * @param {FormatSmartOptions} options\n * @returns {string}\n */\nexport function formatSmart(code, next, options) {\n  let numeric = toHexadecimal(code, next, options.omitOptionalSemicolons)\n  /** @type {string|undefined} */\n  let named\n\n  if (options.useNamedReferences || options.useShortestReferences) {\n    named = toNamed(\n      code,\n      next,\n      options.omitOptionalSemicolons,\n      options.attribute\n    )\n  }\n\n  // Use the shortest numeric reference when requested.\n  // A simple algorithm would use decimal for all code points under 100, as\n  // those are shorter than hexadecimal:\n  //\n  // * `&#99;` vs `&#x63;` (decimal shorter)\n  // * `&#100;` vs `&#x64;` (equal)\n  //\n  // However, because we take `next` into consideration when `omit` is used,\n  // And it would be possible that decimals are shorter on bigger values as\n  // well if `next` is hexadecimal but not decimal, we instead compare both.\n  if (\n    (options.useShortestReferences || !named) &&\n    options.useShortestReferences\n  ) {\n    const decimal = toDecimal(code, next, options.omitOptionalSemicolons)\n\n    if (decimal.length < numeric.length) {\n      numeric = decimal\n    }\n  }\n\n  return named &&\n    (!options.useShortestReferences || named.length < numeric.length)\n    ? named\n    : numeric\n}\n","/**\n * @typedef {import('./core.js').CoreOptions & import('./util/format-smart.js').FormatSmartOptions} Options\n * @typedef {import('./core.js').CoreOptions} LightOptions\n */\n\nimport {core} from './core.js'\nimport {formatSmart} from './util/format-smart.js'\nimport {formatBasic} from './util/format-basic.js'\n\n/**\n * Encode special characters in `value`.\n *\n * @param {string} value\n *   Value to encode.\n * @param {Options} [options]\n *   Configuration.\n * @returns {string}\n *   Encoded value.\n */\nexport function stringifyEntities(value, options) {\n  return core(value, Object.assign({format: formatSmart}, options))\n}\n\n/**\n * Encode special characters in `value` as hexadecimals.\n *\n * @param {string} value\n *   Value to encode.\n * @param {LightOptions} [options]\n *   Configuration.\n * @returns {string}\n *   Encoded value.\n */\nexport function stringifyEntitiesLight(value, options) {\n  return core(value, Object.assign({format: formatBasic}, options))\n}\n","/**\n * @import {Comment, Parents} from 'hast'\n * @import {State} from '../index.js'\n */\n\nimport {stringifyEntities} from 'stringify-entities'\n\nconst htmlCommentRegex = /^>|^->|<!--|-->|--!>|<!-$/g\n\n// Declare arrays as variables so it can be cached by `stringifyEntities`\nconst bogusCommentEntitySubset = ['>']\nconst commentEntitySubset = ['<', '>']\n\n/**\n * Serialize a comment.\n *\n * @param {Comment} node\n *   Node to handle.\n * @param {number | undefined} _1\n *   Index of `node` in `parent.\n * @param {Parents | undefined} _2\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\nexport function comment(node, _1, _2, state) {\n  // See: <https://html.spec.whatwg.org/multipage/syntax.html#comments>\n  return state.settings.bogusComments\n    ? '<?' +\n        stringifyEntities(\n          node.value,\n          Object.assign({}, state.settings.characterReferences, {\n            subset: bogusCommentEntitySubset\n          })\n        ) +\n        '>'\n    : '<!--' + node.value.replace(htmlCommentRegex, encode) + '-->'\n\n  /**\n   * @param {string} $0\n   */\n  function encode($0) {\n    return stringifyEntities(\n      $0,\n      Object.assign({}, state.settings.characterReferences, {\n        subset: commentEntitySubset\n      })\n    )\n  }\n}\n","/**\n * Count how often a character (or substring) is used in a string.\n *\n * @param {string} value\n *   Value to search in.\n * @param {string} character\n *   Character (or substring) to look for.\n * @return {number}\n *   Number of times `character` occurred in `value`.\n */\nexport function ccount(value, character) {\n  const source = String(value)\n\n  if (typeof character !== 'string') {\n    throw new TypeError('Expected character')\n  }\n\n  let count = 0\n  let index = source.indexOf(character)\n\n  while (index !== -1) {\n    count++\n    index = source.indexOf(character, index + character.length)\n  }\n\n  return count\n}\n","/**\n * @typedef Options\n *   Configuration for `stringify`.\n * @property {boolean} [padLeft=true]\n *   Whether to pad a space before a token.\n * @property {boolean} [padRight=false]\n *   Whether to pad a space after a token.\n */\n\n/**\n * @typedef {Options} StringifyOptions\n *   Please use `StringifyOptions` instead.\n */\n\n/**\n * Parse comma-separated tokens to an array.\n *\n * @param {string} value\n *   Comma-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  /** @type {Array<string>} */\n  const tokens = []\n  const input = String(value || '')\n  let index = input.indexOf(',')\n  let start = 0\n  /** @type {boolean} */\n  let end = false\n\n  while (!end) {\n    if (index === -1) {\n      index = input.length\n      end = true\n    }\n\n    const token = input.slice(start, index).trim()\n\n    if (token || !end) {\n      tokens.push(token)\n    }\n\n    start = index + 1\n    index = input.indexOf(',', start)\n  }\n\n  return tokens\n}\n\n/**\n * Serialize an array of strings or numbers to comma-separated tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @param {Options} [options]\n *   Configuration for `stringify` (optional).\n * @returns {string}\n *   Comma-separated tokens.\n */\nexport function stringify(values, options) {\n  const settings = options || {}\n\n  // Ensure the last empty entry is seen.\n  const input = values[values.length - 1] === '' ? [...values, ''] : values\n\n  return input\n    .join(\n      (settings.padRight ? ' ' : '') +\n        ',' +\n        (settings.padLeft === false ? '' : ' ')\n    )\n    .trim()\n}\n","/**\n * @import {Schema} from 'property-information'\n */\n\nimport {DefinedInfo} from './util/defined-info.js'\nimport {Info} from './util/info.js'\nimport {normalize} from './normalize.js'\n\nconst cap = /[A-Z]/g\nconst dash = /-[a-z]/g\nconst valid = /^data[-\\w.:]+$/i\n\n/**\n * Look up info on a property.\n *\n * In most cases the given `schema` contains info on the property.\n * All standard,\n * most legacy,\n * and some non-standard properties are supported.\n * For these cases,\n * the returned `Info` has hints about the value of the property.\n *\n * `name` can also be a valid data attribute or property,\n * in which case an `Info` object with the correctly cased `attribute` and\n * `property` is returned.\n *\n * `name` can be an unknown attribute,\n * in which case an `Info` object with `attribute` and `property` set to the\n * given name is returned.\n * It is not recommended to provide unsupported legacy or recently specced\n * properties.\n *\n *\n * @param {Schema} schema\n *   Schema;\n *   either the `html` or `svg` export.\n * @param {string} value\n *   An attribute-like or property-like name;\n *   it will be passed through `normalize` to hopefully find the correct info.\n * @returns {Info}\n *   Info.\n */\nexport function find(schema, value) {\n  const normal = normalize(value)\n  let property = value\n  let Type = Info\n\n  if (normal in schema.normal) {\n    return schema.property[schema.normal[normal]]\n  }\n\n  if (normal.length > 4 && normal.slice(0, 4) === 'data' && valid.test(value)) {\n    // Attribute or property.\n    if (value.charAt(4) === '-') {\n      // Turn it into a property.\n      const rest = value.slice(5).replace(dash, camelcase)\n      property = 'data' + rest.charAt(0).toUpperCase() + rest.slice(1)\n    } else {\n      // Turn it into an attribute.\n      const rest = value.slice(4)\n\n      if (!dash.test(rest)) {\n        let dashes = rest.replace(cap, kebab)\n\n        if (dashes.charAt(0) !== '-') {\n          dashes = '-' + dashes\n        }\n\n        value = 'data' + dashes\n      }\n    }\n\n    Type = DefinedInfo\n  }\n\n  return new Type(property, value)\n}\n\n/**\n * @param {string} $0\n *   Value.\n * @returns {string}\n *   Kebab.\n */\nfunction kebab($0) {\n  return '-' + $0.toLowerCase()\n}\n\n/**\n * @param {string} $0\n *   Value.\n * @returns {string}\n *   Camel.\n */\nfunction camelcase($0) {\n  return $0.charAt(1).toUpperCase()\n}\n","/**\n * Parse space-separated tokens to an array of strings.\n *\n * @param {string} value\n *   Space-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  const input = String(value || '').trim()\n  return input ? input.split(/[ \\t\\n\\r\\f]+/g) : []\n}\n\n/**\n * Serialize an array of strings as space separated-tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @returns {string}\n *   Space-separated tokens.\n */\nexport function stringify(values) {\n  return values.join(' ').trim()\n}\n","/**\n * @typedef {import('hast').Nodes} Nodes\n */\n\n// HTML whitespace expression.\n// See <https://infra.spec.whatwg.org/#ascii-whitespace>.\nconst re = /[ \\t\\n\\f\\r]/g\n\n/**\n * Check if the given value is *inter-element whitespace*.\n *\n * @param {Nodes | string} thing\n *   Thing to check (`Node` or `string`).\n * @returns {boolean}\n *   Whether the `value` is inter-element whitespace (`boolean`): consisting of\n *   zero or more of space, tab (`\\t`), line feed (`\\n`), carriage return\n *   (`\\r`), or form feed (`\\f`); if a node is passed it must be a `Text` node,\n *   whose `value` field is checked.\n */\nexport function whitespace(thing) {\n  return typeof thing === 'object'\n    ? thing.type === 'text'\n      ? empty(thing.value)\n      : false\n    : empty(thing)\n}\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nfunction empty(value) {\n  return value.replace(re, '') === ''\n}\n","/**\n * @import {Parents, RootContent} from 'hast'\n */\n\nimport {whitespace} from 'hast-util-whitespace'\n\nexport const siblingAfter = siblings(1)\nexport const siblingBefore = siblings(-1)\n\n/** @type {Array<RootContent>} */\nconst emptyChildren = []\n\n/**\n * Factory to check siblings in a direction.\n *\n * @param {number} increment\n */\nfunction siblings(increment) {\n  return sibling\n\n  /**\n   * Find applicable siblings in a direction.\n   *\n   * @template {Parents} Parent\n   *   Parent type.\n   * @param {Parent | undefined} parent\n   *   Parent.\n   * @param {number | undefined} index\n   *   Index of child in `parent`.\n   * @param {boolean | undefined} [includeWhitespace=false]\n   *   Whether to include whitespace (default: `false`).\n   * @returns {Parent extends {children: Array<infer Child>} ? Child | undefined : never}\n   *   Child of parent.\n   */\n  function sibling(parent, index, includeWhitespace) {\n    const siblings = parent ? parent.children : emptyChildren\n    let offset = (index || 0) + increment\n    let next = siblings[offset]\n\n    if (!includeWhitespace) {\n      while (next && whitespace(next)) {\n        offset += increment\n        next = siblings[offset]\n      }\n    }\n\n    // @ts-expect-error: its a correct child.\n    return next\n  }\n}\n","/**\n * @import {Element, Parents} from 'hast'\n */\n\n/**\n * @callback OmitHandle\n *   Check if a tag can be omitted.\n * @param {Element} element\n *   Element to check.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether to omit a tag.\n *\n */\n\nconst own = {}.hasOwnProperty\n\n/**\n * Factory to check if a given node can have a tag omitted.\n *\n * @param {Record<string, OmitHandle>} handlers\n *   Omission handlers, where each key is a tag name, and each value is the\n *   corresponding handler.\n * @returns {OmitHandle}\n *   Whether to omit a tag of an element.\n */\nexport function omission(handlers) {\n  return omit\n\n  /**\n   * Check if a given node can have a tag omitted.\n   *\n   * @type {OmitHandle}\n   */\n  function omit(node, index, parent) {\n    return (\n      own.call(handlers, node.tagName) &&\n      handlers[node.tagName](node, index, parent)\n    )\n  }\n}\n","/**\n * @import {Element, Parents} from 'hast'\n */\n\nimport {whitespace} from 'hast-util-whitespace'\nimport {siblingAfter} from './util/siblings.js'\nimport {omission} from './omission.js'\n\nexport const closing = omission({\n  body,\n  caption: headOrColgroupOrCaption,\n  colgroup: headOrColgroupOrCaption,\n  dd,\n  dt,\n  head: headOrColgroupOrCaption,\n  html,\n  li,\n  optgroup,\n  option,\n  p,\n  rp: rubyElement,\n  rt: rubyElement,\n  tbody,\n  td: cells,\n  tfoot,\n  th: cells,\n  thead,\n  tr\n})\n\n/**\n * Macro for `</head>`, `</colgroup>`, and `</caption>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction headOrColgroupOrCaption(_, index, parent) {\n  const next = siblingAfter(parent, index, true)\n  return (\n    !next ||\n    (next.type !== 'comment' &&\n      !(next.type === 'text' && whitespace(next.value.charAt(0))))\n  )\n}\n\n/**\n * Whether to omit `</html>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction html(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return !next || next.type !== 'comment'\n}\n\n/**\n * Whether to omit `</body>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction body(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return !next || next.type !== 'comment'\n}\n\n/**\n * Whether to omit `</p>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction p(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return next\n    ? next.type === 'element' &&\n        (next.tagName === 'address' ||\n          next.tagName === 'article' ||\n          next.tagName === 'aside' ||\n          next.tagName === 'blockquote' ||\n          next.tagName === 'details' ||\n          next.tagName === 'div' ||\n          next.tagName === 'dl' ||\n          next.tagName === 'fieldset' ||\n          next.tagName === 'figcaption' ||\n          next.tagName === 'figure' ||\n          next.tagName === 'footer' ||\n          next.tagName === 'form' ||\n          next.tagName === 'h1' ||\n          next.tagName === 'h2' ||\n          next.tagName === 'h3' ||\n          next.tagName === 'h4' ||\n          next.tagName === 'h5' ||\n          next.tagName === 'h6' ||\n          next.tagName === 'header' ||\n          next.tagName === 'hgroup' ||\n          next.tagName === 'hr' ||\n          next.tagName === 'main' ||\n          next.tagName === 'menu' ||\n          next.tagName === 'nav' ||\n          next.tagName === 'ol' ||\n          next.tagName === 'p' ||\n          next.tagName === 'pre' ||\n          next.tagName === 'section' ||\n          next.tagName === 'table' ||\n          next.tagName === 'ul')\n    : !parent ||\n        // Confusing parent.\n        !(\n          parent.type === 'element' &&\n          (parent.tagName === 'a' ||\n            parent.tagName === 'audio' ||\n            parent.tagName === 'del' ||\n            parent.tagName === 'ins' ||\n            parent.tagName === 'map' ||\n            parent.tagName === 'noscript' ||\n            parent.tagName === 'video')\n        )\n}\n\n/**\n * Whether to omit `</li>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction li(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return !next || (next.type === 'element' && next.tagName === 'li')\n}\n\n/**\n * Whether to omit `</dt>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction dt(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return Boolean(\n    next &&\n      next.type === 'element' &&\n      (next.tagName === 'dt' || next.tagName === 'dd')\n  )\n}\n\n/**\n * Whether to omit `</dd>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction dd(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return (\n    !next ||\n    (next.type === 'element' &&\n      (next.tagName === 'dt' || next.tagName === 'dd'))\n  )\n}\n\n/**\n * Whether to omit `</rt>` or `</rp>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction rubyElement(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return (\n    !next ||\n    (next.type === 'element' &&\n      (next.tagName === 'rp' || next.tagName === 'rt'))\n  )\n}\n\n/**\n * Whether to omit `</optgroup>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction optgroup(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return !next || (next.type === 'element' && next.tagName === 'optgroup')\n}\n\n/**\n * Whether to omit `</option>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction option(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return (\n    !next ||\n    (next.type === 'element' &&\n      (next.tagName === 'option' || next.tagName === 'optgroup'))\n  )\n}\n\n/**\n * Whether to omit `</thead>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction thead(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return Boolean(\n    next &&\n      next.type === 'element' &&\n      (next.tagName === 'tbody' || next.tagName === 'tfoot')\n  )\n}\n\n/**\n * Whether to omit `</tbody>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction tbody(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return (\n    !next ||\n    (next.type === 'element' &&\n      (next.tagName === 'tbody' || next.tagName === 'tfoot'))\n  )\n}\n\n/**\n * Whether to omit `</tfoot>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction tfoot(_, index, parent) {\n  return !siblingAfter(parent, index)\n}\n\n/**\n * Whether to omit `</tr>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction tr(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return !next || (next.type === 'element' && next.tagName === 'tr')\n}\n\n/**\n * Whether to omit `</td>` or `</th>`.\n *\n * @param {Element} _\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the closing tag can be omitted.\n */\nfunction cells(_, index, parent) {\n  const next = siblingAfter(parent, index)\n  return (\n    !next ||\n    (next.type === 'element' &&\n      (next.tagName === 'td' || next.tagName === 'th'))\n  )\n}\n","/**\n * @import {Element, Parents} from 'hast'\n */\n\nimport {whitespace} from 'hast-util-whitespace'\nimport {siblingAfter, siblingBefore} from './util/siblings.js'\nimport {closing} from './closing.js'\nimport {omission} from './omission.js'\n\nexport const opening = omission({\n  body,\n  colgroup,\n  head,\n  html,\n  tbody\n})\n\n/**\n * Whether to omit `<html>`.\n *\n * @param {Element} node\n *   Element.\n * @returns {boolean}\n *   Whether the opening tag can be omitted.\n */\nfunction html(node) {\n  const head = siblingAfter(node, -1)\n  return !head || head.type !== 'comment'\n}\n\n/**\n * Whether to omit `<head>`.\n *\n * @param {Element} node\n *   Element.\n * @returns {boolean}\n *   Whether the opening tag can be omitted.\n */\nfunction head(node) {\n  /** @type {Set<string>} */\n  const seen = new Set()\n\n  // Whether `srcdoc` or not,\n  // make sure the content model at least doesnt have too many `base`s/`title`s.\n  for (const child of node.children) {\n    if (\n      child.type === 'element' &&\n      (child.tagName === 'base' || child.tagName === 'title')\n    ) {\n      if (seen.has(child.tagName)) return false\n      seen.add(child.tagName)\n    }\n  }\n\n  // May be omitted if the element is empty,\n  // or if the first thing inside the head element is an element.\n  const child = node.children[0]\n  return !child || child.type === 'element'\n}\n\n/**\n * Whether to omit `<body>`.\n *\n * @param {Element} node\n *   Element.\n * @returns {boolean}\n *   Whether the opening tag can be omitted.\n */\nfunction body(node) {\n  const head = siblingAfter(node, -1, true)\n\n  return (\n    !head ||\n    (head.type !== 'comment' &&\n      !(head.type === 'text' && whitespace(head.value.charAt(0))) &&\n      !(\n        head.type === 'element' &&\n        (head.tagName === 'meta' ||\n          head.tagName === 'link' ||\n          head.tagName === 'script' ||\n          head.tagName === 'style' ||\n          head.tagName === 'template')\n      ))\n  )\n}\n\n/**\n * Whether to omit `<colgroup>`.\n * The spec describes some logic for the opening tag, but its easier to\n * implement in the closing tag, to the same effect, so we handle it there\n * instead.\n *\n * @param {Element} node\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the opening tag can be omitted.\n */\nfunction colgroup(node, index, parent) {\n  const previous = siblingBefore(parent, index)\n  const head = siblingAfter(node, -1, true)\n\n  // Previous colgroup was already omitted.\n  if (\n    parent &&\n    previous &&\n    previous.type === 'element' &&\n    previous.tagName === 'colgroup' &&\n    closing(previous, parent.children.indexOf(previous), parent)\n  ) {\n    return false\n  }\n\n  return Boolean(head && head.type === 'element' && head.tagName === 'col')\n}\n\n/**\n * Whether to omit `<tbody>`.\n *\n * @param {Element} node\n *   Element.\n * @param {number | undefined} index\n *   Index of element in parent.\n * @param {Parents | undefined} parent\n *   Parent of element.\n * @returns {boolean}\n *   Whether the opening tag can be omitted.\n */\nfunction tbody(node, index, parent) {\n  const previous = siblingBefore(parent, index)\n  const head = siblingAfter(node, -1)\n\n  // Previous table section was already omitted.\n  if (\n    parent &&\n    previous &&\n    previous.type === 'element' &&\n    (previous.tagName === 'thead' || previous.tagName === 'tbody') &&\n    closing(previous, parent.children.indexOf(previous), parent)\n  ) {\n    return false\n  }\n\n  return Boolean(head && head.type === 'element' && head.tagName === 'tr')\n}\n","/**\n * @import {Element, Parents, Properties} from 'hast'\n * @import {State} from '../index.js'\n */\n\nimport {ccount} from 'ccount'\nimport {stringify as commas} from 'comma-separated-tokens'\nimport {find, svg} from 'property-information'\nimport {stringify as spaces} from 'space-separated-tokens'\nimport {stringifyEntities} from 'stringify-entities'\nimport {closing} from '../omission/closing.js'\nimport {opening} from '../omission/opening.js'\n\n/**\n * Maps of subsets.\n *\n * Each value is a matrix of tuples.\n * The value at `0` causes parse errors, the value at `1` is valid.\n * Of both, the value at `0` is unsafe, and the value at `1` is safe.\n *\n * @type {Record<'double' | 'name' | 'single' | 'unquoted', Array<[Array<string>, Array<string>]>>}\n */\nconst constants = {\n  // See: <https://html.spec.whatwg.org/#attribute-name-state>.\n  name: [\n    ['\\t\\n\\f\\r &/=>'.split(''), '\\t\\n\\f\\r \"&\\'/=>`'.split('')],\n    ['\\0\\t\\n\\f\\r \"&\\'/<=>'.split(''), '\\0\\t\\n\\f\\r \"&\\'/<=>`'.split('')]\n  ],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(unquoted)-state>.\n  unquoted: [\n    ['\\t\\n\\f\\r &>'.split(''), '\\0\\t\\n\\f\\r \"&\\'<=>`'.split('')],\n    ['\\0\\t\\n\\f\\r \"&\\'<=>`'.split(''), '\\0\\t\\n\\f\\r \"&\\'<=>`'.split('')]\n  ],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(single-quoted)-state>.\n  single: [\n    [\"&'\".split(''), '\"&\\'`'.split('')],\n    [\"\\0&'\".split(''), '\\0\"&\\'`'.split('')]\n  ],\n  // See: <https://html.spec.whatwg.org/#attribute-value-(double-quoted)-state>.\n  double: [\n    ['\"&'.split(''), '\"&\\'`'.split('')],\n    ['\\0\"&'.split(''), '\\0\"&\\'`'.split('')]\n  ]\n}\n\n/**\n * Serialize an element node.\n *\n * @param {Element} node\n *   Node to handle.\n * @param {number | undefined} index\n *   Index of `node` in `parent.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\nexport function element(node, index, parent, state) {\n  const schema = state.schema\n  const omit = schema.space === 'svg' ? false : state.settings.omitOptionalTags\n  let selfClosing =\n    schema.space === 'svg'\n      ? state.settings.closeEmptyElements\n      : state.settings.voids.includes(node.tagName.toLowerCase())\n  /** @type {Array<string>} */\n  const parts = []\n  /** @type {string} */\n  let last\n\n  if (schema.space === 'html' && node.tagName === 'svg') {\n    state.schema = svg\n  }\n\n  const attributes = serializeAttributes(state, node.properties)\n\n  const content = state.all(\n    schema.space === 'html' && node.tagName === 'template' ? node.content : node\n  )\n\n  state.schema = schema\n\n  // If the node is categorised as void, but it has children, remove the\n  // categorisation.\n  // This enables for example `menuitem`s, which are void in W3C HTML but not\n  // void in WHATWG HTML, to be stringified properly.\n  // Note: `menuitem` has since been removed from the HTML spec, and so is no\n  // longer void.\n  if (content) selfClosing = false\n\n  if (attributes || !omit || !opening(node, index, parent)) {\n    parts.push('<', node.tagName, attributes ? ' ' + attributes : '')\n\n    if (\n      selfClosing &&\n      (schema.space === 'svg' || state.settings.closeSelfClosing)\n    ) {\n      last = attributes.charAt(attributes.length - 1)\n      if (\n        !state.settings.tightSelfClosing ||\n        last === '/' ||\n        (last && last !== '\"' && last !== \"'\")\n      ) {\n        parts.push(' ')\n      }\n\n      parts.push('/')\n    }\n\n    parts.push('>')\n  }\n\n  parts.push(content)\n\n  if (!selfClosing && (!omit || !closing(node, index, parent))) {\n    parts.push('</' + node.tagName + '>')\n  }\n\n  return parts.join('')\n}\n\n/**\n * @param {State} state\n * @param {Properties | null | undefined} properties\n * @returns {string}\n */\nfunction serializeAttributes(state, properties) {\n  /** @type {Array<string>} */\n  const values = []\n  let index = -1\n  /** @type {string} */\n  let key\n\n  if (properties) {\n    for (key in properties) {\n      if (properties[key] !== null && properties[key] !== undefined) {\n        const value = serializeAttribute(state, key, properties[key])\n        if (value) values.push(value)\n      }\n    }\n  }\n\n  while (++index < values.length) {\n    const last = state.settings.tightAttributes\n      ? values[index].charAt(values[index].length - 1)\n      : undefined\n\n    // In tight mode, dont add a space after quoted attributes.\n    if (index !== values.length - 1 && last !== '\"' && last !== \"'\") {\n      values[index] += ' '\n    }\n  }\n\n  return values.join('')\n}\n\n/**\n * @param {State} state\n * @param {string} key\n * @param {Properties[keyof Properties]} value\n * @returns {string}\n */\nfunction serializeAttribute(state, key, value) {\n  const info = find(state.schema, key)\n  const x =\n    state.settings.allowParseErrors && state.schema.space === 'html' ? 0 : 1\n  const y = state.settings.allowDangerousCharacters ? 0 : 1\n  let quote = state.quote\n  /** @type {string | undefined} */\n  let result\n\n  if (info.overloadedBoolean && (value === info.attribute || value === '')) {\n    value = true\n  } else if (\n    (info.boolean || info.overloadedBoolean) &&\n    (typeof value !== 'string' || value === info.attribute || value === '')\n  ) {\n    value = Boolean(value)\n  }\n\n  if (\n    value === null ||\n    value === undefined ||\n    value === false ||\n    (typeof value === 'number' && Number.isNaN(value))\n  ) {\n    return ''\n  }\n\n  const name = stringifyEntities(\n    info.attribute,\n    Object.assign({}, state.settings.characterReferences, {\n      // Always encode without parse errors in non-HTML.\n      subset: constants.name[x][y]\n    })\n  )\n\n  // No value.\n  // There is currently only one boolean property in SVG: `[download]` on\n  // `<a>`.\n  // This property does not seem to work in browsers (Firefox, Safari, Chrome),\n  // so I cant test if dropping the value works.\n  // But I assume that it should:\n  //\n  // ```html\n  // <!doctype html>\n  // <svg viewBox=\"0 0 100 100\">\n  //   <a href=https://example.com download>\n  //     <circle cx=50 cy=40 r=35 />\n  //   </a>\n  // </svg>\n  // ```\n  //\n  // See: <https://github.com/wooorm/property-information/blob/main/lib/svg.js>\n  if (value === true) return name\n\n  // `spaces` doesnt accept a second argument, but its given here just to\n  // keep the code cleaner.\n  value = Array.isArray(value)\n    ? (info.commaSeparated ? commas : spaces)(value, {\n        padLeft: !state.settings.tightCommaSeparatedLists\n      })\n    : String(value)\n\n  if (state.settings.collapseEmptyAttributes && !value) return name\n\n  // Check unquoted value.\n  if (state.settings.preferUnquoted) {\n    result = stringifyEntities(\n      value,\n      Object.assign({}, state.settings.characterReferences, {\n        attribute: true,\n        subset: constants.unquoted[x][y]\n      })\n    )\n  }\n\n  // If we dont want unquoted, or if `value` contains character references when\n  // unquoted\n  if (result !== value) {\n    // If the alternative is less common than `quote`, switch.\n    if (\n      state.settings.quoteSmart &&\n      ccount(value, quote) > ccount(value, state.alternative)\n    ) {\n      quote = state.alternative\n    }\n\n    result =\n      quote +\n      stringifyEntities(\n        value,\n        Object.assign({}, state.settings.characterReferences, {\n          // Always encode without parse errors in non-HTML.\n          subset: (quote === \"'\" ? constants.single : constants.double)[x][y],\n          attribute: true\n        })\n      ) +\n      quote\n  }\n\n  // Dont add a `=` for unquoted empties.\n  return name + (result ? '=' + result : result)\n}\n","/**\n * @import {Parents, Text} from 'hast'\n * @import {Raw} from 'mdast-util-to-hast'\n * @import {State} from '../index.js'\n */\n\nimport {stringifyEntities} from 'stringify-entities'\n\n// Declare array as variable so it can be cached by `stringifyEntities`\nconst textEntitySubset = ['<', '&']\n\n/**\n * Serialize a text node.\n *\n * @param {Raw | Text} node\n *   Node to handle.\n * @param {number | undefined} _\n *   Index of `node` in `parent.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\nexport function text(node, _, parent, state) {\n  // Check if content of `node` should be escaped.\n  return parent &&\n    parent.type === 'element' &&\n    (parent.tagName === 'script' || parent.tagName === 'style')\n    ? node.value\n    : stringifyEntities(\n        node.value,\n        Object.assign({}, state.settings.characterReferences, {\n          subset: textEntitySubset\n        })\n      )\n}\n","/**\n * @import {Nodes, Parents} from 'hast'\n * @import {State} from '../index.js'\n */\n\nimport {zwitch} from 'zwitch'\nimport {comment} from './comment.js'\nimport {doctype} from './doctype.js'\nimport {element} from './element.js'\nimport {raw} from './raw.js'\nimport {root} from './root.js'\nimport {text} from './text.js'\n\n/**\n * @type {(node: Nodes, index: number | undefined, parent: Parents | undefined, state: State) => string}\n */\nexport const handle = zwitch('type', {\n  invalid,\n  unknown,\n  handlers: {comment, doctype, element, raw, root, text}\n})\n\n/**\n * Fail when a non-node is found in the tree.\n *\n * @param {unknown} node\n *   Unknown value.\n * @returns {never}\n *   Never.\n */\nfunction invalid(node) {\n  throw new Error('Expected node, not `' + node + '`')\n}\n\n/**\n * Fail when a node with an unknown type is found in the tree.\n *\n * @param {unknown} node_\n *  Unknown node.\n * @returns {never}\n *   Never.\n */\nfunction unknown(node_) {\n  // `type` is guaranteed by runtime JS.\n  const node = /** @type {Nodes} */ (node_)\n  throw new Error('Cannot compile unknown node `' + node.type + '`')\n}\n","/**\n * @import {Doctype, Parents} from 'hast'\n * @import {State} from '../index.js'\n */\n\n/**\n * Serialize a doctype.\n *\n * @param {Doctype} _1\n *   Node to handle.\n * @param {number | undefined} _2\n *   Index of `node` in `parent.\n * @param {Parents | undefined} _3\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\nexport function doctype(_1, _2, _3, state) {\n  return (\n    '<!' +\n    (state.settings.upperDoctype ? 'DOCTYPE' : 'doctype') +\n    (state.settings.tightDoctype ? '' : ' ') +\n    'html>'\n  )\n}\n","/**\n * @import {Parents} from 'hast'\n * @import {Raw} from 'mdast-util-to-hast'\n * @import {State} from '../index.js'\n */\n\nimport {text} from './text.js'\n\n/**\n * Serialize a raw node.\n *\n * @param {Raw} node\n *   Node to handle.\n * @param {number | undefined} index\n *   Index of `node` in `parent.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\nexport function raw(node, index, parent, state) {\n  return state.settings.allowDangerousHtml\n    ? node.value\n    : text(node, index, parent, state)\n}\n","/**\n * @import {Parents, Root} from 'hast'\n * @import {State} from '../index.js'\n */\n\n/**\n * Serialize a root.\n *\n * @param {Root} node\n *   Node to handle.\n * @param {number | undefined} _1\n *   Index of `node` in `parent.\n * @param {Parents | undefined} _2\n *   Parent of `node`.\n * @param {State} state\n *   Info passed around about the current state.\n * @returns {string}\n *   Serialized node.\n */\nexport function root(node, _1, _2, state) {\n  return state.all(node)\n}\n","/**\n * @import {Nodes, Parents, RootContent} from 'hast'\n * @import {Schema} from 'property-information'\n * @import {Options as StringifyEntitiesOptions} from 'stringify-entities'\n */\n\n/**\n * @typedef {Omit<StringifyEntitiesOptions, 'attribute' | 'escapeOnly' | 'subset'>} CharacterReferences\n *\n * @typedef Options\n *   Configuration.\n * @property {boolean | null | undefined} [allowDangerousCharacters=false]\n *   Do not encode some characters which cause XSS vulnerabilities in older\n *   browsers (default: `false`).\n *\n *   >  **Danger**: only set this if you completely trust the content.\n * @property {boolean | null | undefined} [allowDangerousHtml=false]\n *   Allow `raw` nodes and insert them as raw HTML (default: `false`).\n *\n *   When `false`, `Raw` nodes are encoded.\n *\n *   >  **Danger**: only set this if you completely trust the content.\n * @property {boolean | null | undefined} [allowParseErrors=false]\n *   Do not encode characters which cause parse errors (even though they work),\n *   to save bytes (default: `false`).\n *\n *   Not used in the SVG space.\n *\n *   >  **Note**: intentionally creates parse errors in markup (how parse\n *   > errors are handled is well defined, so this works but isnt pretty).\n * @property {boolean | null | undefined} [bogusComments=false]\n *   Use bogus comments instead of comments to save byes: `<?charlie>`\n *   instead of `<!--charlie-->` (default: `false`).\n *\n *   >  **Note**: intentionally creates parse errors in markup (how parse\n *   > errors are handled is well defined, so this works but isnt pretty).\n * @property {CharacterReferences | null | undefined} [characterReferences]\n *   Configure how to serialize character references (optional).\n * @property {boolean | null | undefined} [closeEmptyElements=false]\n *   Close SVG elements without any content with slash (`/`) on the opening tag\n *   instead of an end tag: `<circle />` instead of `<circle></circle>`\n *   (default: `false`).\n *\n *   See `tightSelfClosing` to control whether a space is used before the\n *   slash.\n *\n *   Not used in the HTML space.\n * @property {boolean | null | undefined} [closeSelfClosing=false]\n *   Close self-closing nodes with an extra slash (`/`): `<img />` instead of\n *   `<img>` (default: `false`).\n *\n *   See `tightSelfClosing` to control whether a space is used before the\n *   slash.\n *\n *   Not used in the SVG space.\n * @property {boolean | null | undefined} [collapseEmptyAttributes=false]\n *   Collapse empty attributes: get `class` instead of `class=\"\"` (default:\n *   `false`).\n *\n *   Not used in the SVG space.\n *\n *   >  **Note**: boolean attributes (such as `hidden`) are always collapsed.\n * @property {boolean | null | undefined} [omitOptionalTags=false]\n *   Omit optional opening and closing tags (default: `false`).\n *\n *   For example, in `<ol><li>one</li><li>two</li></ol>`, both `</li>` closing\n *   tags can be omitted.\n *   The first because its followed by another `li`, the last because its\n *   followed by nothing.\n *\n *   Not used in the SVG space.\n * @property {boolean | null | undefined} [preferUnquoted=false]\n *   Leave attributes unquoted if that results in less bytes (default: `false`).\n *\n *   Not used in the SVG space.\n * @property {boolean | null | undefined} [quoteSmart=false]\n *   Use the other quote if that results in less bytes (default: `false`).\n * @property {Quote | null | undefined} [quote='\"']\n *   Preferred quote to use (default: `'\"'`).\n * @property {Space | null | undefined} [space='html']\n *   When an `<svg>` element is found in the HTML space, this package already\n *   automatically switches to and from the SVG space when entering and exiting\n *   it (default: `'html'`).\n *\n *   >  **Note**: hast is not XML.\n *   > It supports SVG as embedded in HTML.\n *   > It does not support the features available in XML.\n *   > Passing SVG might break but fragments of modern SVG should be fine.\n *   > Use [`xast`][xast] if you need to support SVG as XML.\n * @property {boolean | null | undefined} [tightAttributes=false]\n *   Join attributes together, without whitespace, if possible: get\n *   `class=\"a b\"title=\"c d\"` instead of `class=\"a b\" title=\"c d\"` to save\n *   bytes (default: `false`).\n *\n *   Not used in the SVG space.\n *\n *   >  **Note**: intentionally creates parse errors in markup (how parse\n *   > errors are handled is well defined, so this works but isnt pretty).\n * @property {boolean | null | undefined} [tightCommaSeparatedLists=false]\n *   Join known comma-separated attribute values with just a comma (`,`),\n *   instead of padding them on the right as well (`,`, where `` represents a\n *   space) (default: `false`).\n * @property {boolean | null | undefined} [tightDoctype=false]\n *   Drop unneeded spaces in doctypes: `<!doctypehtml>` instead of\n *   `<!doctype html>` to save bytes (default: `false`).\n *\n *   >  **Note**: intentionally creates parse errors in markup (how parse\n *   > errors are handled is well defined, so this works but isnt pretty).\n * @property {boolean | null | undefined} [tightSelfClosing=false]\n *   Do not use an extra space when closing self-closing elements: `<img/>`\n *   instead of `<img />` (default: `false`).\n *\n *   >  **Note**: only used if `closeSelfClosing: true` or\n *   > `closeEmptyElements: true`.\n * @property {boolean | null | undefined} [upperDoctype=false]\n *   Use a `<!DOCTYPE` instead of `<!doctype` (default: `false`).\n *\n *   Useless except for XHTML.\n * @property {ReadonlyArray<string> | null | undefined} [voids]\n *   Tag names of elements to serialize without closing tag (default: `html-void-elements`).\n *\n *   Not used in the SVG space.\n *\n *   >  **Note**: Its highly unlikely that you want to pass this, because\n *   > hast is not for XML, and HTML will not add more void elements.\n *\n * @typedef {'\"' | \"'\"} Quote\n *   HTML quotes for attribute values.\n *\n * @typedef {Omit<Required<{[key in keyof Options]: Exclude<Options[key], null | undefined>}>, 'space' | 'quote'>} Settings\n *\n * @typedef {'html' | 'svg'} Space\n *   Namespace.\n *\n * @typedef State\n *   Info passed around about the current state.\n * @property {(node: Parents | undefined) => string} all\n *   Serialize the children of a parent node.\n * @property {Quote} alternative\n *   Alternative quote.\n * @property {(node: Nodes, index: number | undefined, parent: Parents | undefined) => string} one\n *   Serialize one node.\n * @property {Quote} quote\n *   Preferred quote.\n * @property {Schema} schema\n *   Current schema.\n * @property {Settings} settings\n *   User configuration.\n */\n\nimport {htmlVoidElements} from 'html-void-elements'\nimport {html, svg} from 'property-information'\nimport {handle} from './handle/index.js'\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/** @type {CharacterReferences} */\nconst emptyCharacterReferences = {}\n\n/** @type {Array<never>} */\nconst emptyChildren = []\n\n/**\n * Serialize hast as HTML.\n *\n * @param {Array<RootContent> | Nodes} tree\n *   Tree to serialize.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Serialized HTML.\n */\nexport function toHtml(tree, options) {\n  const options_ = options || emptyOptions\n  const quote = options_.quote || '\"'\n  const alternative = quote === '\"' ? \"'\" : '\"'\n\n  if (quote !== '\"' && quote !== \"'\") {\n    throw new Error('Invalid quote `' + quote + '`, expected `\\'` or `\"`')\n  }\n\n  /** @type {State} */\n  const state = {\n    one,\n    all,\n    settings: {\n      omitOptionalTags: options_.omitOptionalTags || false,\n      allowParseErrors: options_.allowParseErrors || false,\n      allowDangerousCharacters: options_.allowDangerousCharacters || false,\n      quoteSmart: options_.quoteSmart || false,\n      preferUnquoted: options_.preferUnquoted || false,\n      tightAttributes: options_.tightAttributes || false,\n      upperDoctype: options_.upperDoctype || false,\n      tightDoctype: options_.tightDoctype || false,\n      bogusComments: options_.bogusComments || false,\n      tightCommaSeparatedLists: options_.tightCommaSeparatedLists || false,\n      tightSelfClosing: options_.tightSelfClosing || false,\n      collapseEmptyAttributes: options_.collapseEmptyAttributes || false,\n      allowDangerousHtml: options_.allowDangerousHtml || false,\n      voids: options_.voids || htmlVoidElements,\n      characterReferences:\n        options_.characterReferences || emptyCharacterReferences,\n      closeSelfClosing: options_.closeSelfClosing || false,\n      closeEmptyElements: options_.closeEmptyElements || false\n    },\n    schema: options_.space === 'svg' ? svg : html,\n    quote,\n    alternative\n  }\n\n  return state.one(\n    Array.isArray(tree) ? {type: 'root', children: tree} : tree,\n    undefined,\n    undefined\n  )\n}\n\n/**\n * Serialize a node.\n *\n * @this {State}\n *   Info passed around about the current state.\n * @param {Nodes} node\n *   Node to handle.\n * @param {number | undefined} index\n *   Index of `node` in `parent.\n * @param {Parents | undefined} parent\n *   Parent of `node`.\n * @returns {string}\n *   Serialized node.\n */\nfunction one(node, index, parent) {\n  return handle(node, index, parent, this)\n}\n\n/**\n * Serialize all children of `parent`.\n *\n * @this {State}\n *   Info passed around about the current state.\n * @param {Parents | undefined} parent\n *   Parent whose children to serialize.\n * @returns {string}\n */\nexport function all(parent) {\n  /** @type {Array<string>} */\n  const results = []\n  const children = (parent && parent.children) || emptyChildren\n  let index = -1\n\n  while (++index < children.length) {\n    results[index] = this.one(children[index], index, parent)\n  }\n\n  return results.join('')\n}\n","import { ShikiError as ShikiError$1 } from '@shikijs/types';\nexport * from '@shikijs/types';\nimport { FontStyle, INITIAL, EncodedTokenMetadata, Registry as Registry$1, Theme } from '@shikijs/vscode-textmate';\nimport { toHtml } from 'hast-util-to-html';\n\nfunction resolveColorReplacements(theme, options) {\n  const replacements = typeof theme === \"string\" ? {} : { ...theme.colorReplacements };\n  const themeName = typeof theme === \"string\" ? theme : theme.name;\n  for (const [key, value] of Object.entries(options?.colorReplacements || {})) {\n    if (typeof value === \"string\")\n      replacements[key] = value;\n    else if (key === themeName)\n      Object.assign(replacements, value);\n  }\n  return replacements;\n}\nfunction applyColorReplacements(color, replacements) {\n  if (!color)\n    return color;\n  return replacements?.[color?.toLowerCase()] || color;\n}\n\nfunction toArray(x) {\n  return Array.isArray(x) ? x : [x];\n}\nasync function normalizeGetter(p) {\n  return Promise.resolve(typeof p === \"function\" ? p() : p).then((r) => r.default || r);\n}\nfunction isPlainLang(lang) {\n  return !lang || [\"plaintext\", \"txt\", \"text\", \"plain\"].includes(lang);\n}\nfunction isSpecialLang(lang) {\n  return lang === \"ansi\" || isPlainLang(lang);\n}\nfunction isNoneTheme(theme) {\n  return theme === \"none\";\n}\nfunction isSpecialTheme(theme) {\n  return isNoneTheme(theme);\n}\n\nfunction addClassToHast(node, className) {\n  if (!className)\n    return node;\n  node.properties ||= {};\n  node.properties.class ||= [];\n  if (typeof node.properties.class === \"string\")\n    node.properties.class = node.properties.class.split(/\\s+/g);\n  if (!Array.isArray(node.properties.class))\n    node.properties.class = [];\n  const targets = Array.isArray(className) ? className : className.split(/\\s+/g);\n  for (const c of targets) {\n    if (c && !node.properties.class.includes(c))\n      node.properties.class.push(c);\n  }\n  return node;\n}\n\nfunction splitLines(code, preserveEnding = false) {\n  if (code.length === 0) {\n    return [[\"\", 0]];\n  }\n  const parts = code.split(/(\\r?\\n)/g);\n  let index = 0;\n  const lines = [];\n  for (let i = 0; i < parts.length; i += 2) {\n    const line = preserveEnding ? parts[i] + (parts[i + 1] || \"\") : parts[i];\n    lines.push([line, index]);\n    index += parts[i].length;\n    index += parts[i + 1]?.length || 0;\n  }\n  return lines;\n}\nfunction createPositionConverter(code) {\n  const lines = splitLines(code, true).map(([line]) => line);\n  function indexToPos(index) {\n    if (index === code.length) {\n      return {\n        line: lines.length - 1,\n        character: lines[lines.length - 1].length\n      };\n    }\n    let character = index;\n    let line = 0;\n    for (const lineText of lines) {\n      if (character < lineText.length)\n        break;\n      character -= lineText.length;\n      line++;\n    }\n    return { line, character };\n  }\n  function posToIndex(line, character) {\n    let index = 0;\n    for (let i = 0; i < line; i++)\n      index += lines[i].length;\n    index += character;\n    return index;\n  }\n  return {\n    lines,\n    indexToPos,\n    posToIndex\n  };\n}\nfunction guessEmbeddedLanguages(code, _lang, highlighter) {\n  const langs = /* @__PURE__ */ new Set();\n  for (const match of code.matchAll(/:?lang=[\"']([^\"']+)[\"']/g)) {\n    const lang = match[1].toLowerCase().trim();\n    if (lang)\n      langs.add(lang);\n  }\n  for (const match of code.matchAll(/(?:```|~~~)([\\w-]+)/g)) {\n    const lang = match[1].toLowerCase().trim();\n    if (lang)\n      langs.add(lang);\n  }\n  for (const match of code.matchAll(/\\\\begin\\{([\\w-]+)\\}/g)) {\n    const lang = match[1].toLowerCase().trim();\n    if (lang)\n      langs.add(lang);\n  }\n  for (const match of code.matchAll(/<script\\s+(?:type|lang)=[\"']([^\"']+)[\"']/gi)) {\n    const fullType = match[1].toLowerCase().trim();\n    const lang = fullType.includes(\"/\") ? fullType.split(\"/\").pop() : fullType;\n    if (lang)\n      langs.add(lang);\n  }\n  if (!highlighter)\n    return Array.from(langs);\n  const bundle = highlighter.getBundledLanguages();\n  return Array.from(langs).filter((l) => l && bundle[l]);\n}\n\nconst DEFAULT_COLOR_LIGHT_DARK = \"light-dark()\";\nconst COLOR_KEYS = [\"color\", \"background-color\"];\n\nfunction splitToken(token, offsets) {\n  let lastOffset = 0;\n  const tokens = [];\n  for (const offset of offsets) {\n    if (offset > lastOffset) {\n      tokens.push({\n        ...token,\n        content: token.content.slice(lastOffset, offset),\n        offset: token.offset + lastOffset\n      });\n    }\n    lastOffset = offset;\n  }\n  if (lastOffset < token.content.length) {\n    tokens.push({\n      ...token,\n      content: token.content.slice(lastOffset),\n      offset: token.offset + lastOffset\n    });\n  }\n  return tokens;\n}\nfunction splitTokens(tokens, breakpoints) {\n  const sorted = Array.from(breakpoints instanceof Set ? breakpoints : new Set(breakpoints)).sort((a, b) => a - b);\n  if (!sorted.length)\n    return tokens;\n  return tokens.map((line) => {\n    return line.flatMap((token) => {\n      const breakpointsInToken = sorted.filter((i) => token.offset < i && i < token.offset + token.content.length).map((i) => i - token.offset).sort((a, b) => a - b);\n      if (!breakpointsInToken.length)\n        return token;\n      return splitToken(token, breakpointsInToken);\n    });\n  });\n}\nfunction flatTokenVariants(merged, variantsOrder, cssVariablePrefix, defaultColor, colorsRendering = \"css-vars\") {\n  const token = {\n    content: merged.content,\n    explanation: merged.explanation,\n    offset: merged.offset\n  };\n  const styles = variantsOrder.map((t) => getTokenStyleObject(merged.variants[t]));\n  const styleKeys = new Set(styles.flatMap((t) => Object.keys(t)));\n  const mergedStyles = {};\n  const varKey = (idx, key) => {\n    const keyName = key === \"color\" ? \"\" : key === \"background-color\" ? \"-bg\" : `-${key}`;\n    return cssVariablePrefix + variantsOrder[idx] + (key === \"color\" ? \"\" : keyName);\n  };\n  styles.forEach((cur, idx) => {\n    for (const key of styleKeys) {\n      const value = cur[key] || \"inherit\";\n      if (idx === 0 && defaultColor && COLOR_KEYS.includes(key)) {\n        if (defaultColor === DEFAULT_COLOR_LIGHT_DARK && styles.length > 1) {\n          const lightIndex = variantsOrder.findIndex((t) => t === \"light\");\n          const darkIndex = variantsOrder.findIndex((t) => t === \"dark\");\n          if (lightIndex === -1 || darkIndex === -1)\n            throw new ShikiError$1('When using `defaultColor: \"light-dark()\"`, you must provide both `light` and `dark` themes');\n          const lightValue = styles[lightIndex][key] || \"inherit\";\n          const darkValue = styles[darkIndex][key] || \"inherit\";\n          mergedStyles[key] = `light-dark(${lightValue}, ${darkValue})`;\n          if (colorsRendering === \"css-vars\")\n            mergedStyles[varKey(idx, key)] = value;\n        } else {\n          mergedStyles[key] = value;\n        }\n      } else {\n        if (colorsRendering === \"css-vars\")\n          mergedStyles[varKey(idx, key)] = value;\n      }\n    }\n  });\n  token.htmlStyle = mergedStyles;\n  return token;\n}\nfunction getTokenStyleObject(token) {\n  const styles = {};\n  if (token.color)\n    styles.color = token.color;\n  if (token.bgColor)\n    styles[\"background-color\"] = token.bgColor;\n  if (token.fontStyle) {\n    if (token.fontStyle & FontStyle.Italic)\n      styles[\"font-style\"] = \"italic\";\n    if (token.fontStyle & FontStyle.Bold)\n      styles[\"font-weight\"] = \"bold\";\n    const decorations = [];\n    if (token.fontStyle & FontStyle.Underline)\n      decorations.push(\"underline\");\n    if (token.fontStyle & FontStyle.Strikethrough)\n      decorations.push(\"line-through\");\n    if (decorations.length)\n      styles[\"text-decoration\"] = decorations.join(\" \");\n  }\n  return styles;\n}\nfunction stringifyTokenStyle(token) {\n  if (typeof token === \"string\")\n    return token;\n  return Object.entries(token).map(([key, value]) => `${key}:${value}`).join(\";\");\n}\n\nconst _grammarStateMap = /* @__PURE__ */ new WeakMap();\nfunction setLastGrammarStateToMap(keys, state) {\n  _grammarStateMap.set(keys, state);\n}\nfunction getLastGrammarStateFromMap(keys) {\n  return _grammarStateMap.get(keys);\n}\nclass GrammarState {\n  /**\n   * Theme to Stack mapping\n   */\n  _stacks = {};\n  lang;\n  get themes() {\n    return Object.keys(this._stacks);\n  }\n  get theme() {\n    return this.themes[0];\n  }\n  get _stack() {\n    return this._stacks[this.theme];\n  }\n  /**\n   * Static method to create a initial grammar state.\n   */\n  static initial(lang, themes) {\n    return new GrammarState(\n      Object.fromEntries(toArray(themes).map((theme) => [theme, INITIAL])),\n      lang\n    );\n  }\n  constructor(...args) {\n    if (args.length === 2) {\n      const [stacksMap, lang] = args;\n      this.lang = lang;\n      this._stacks = stacksMap;\n    } else {\n      const [stack, lang, theme] = args;\n      this.lang = lang;\n      this._stacks = { [theme]: stack };\n    }\n  }\n  /**\n   * Get the internal stack object.\n   * @internal\n   */\n  getInternalStack(theme = this.theme) {\n    return this._stacks[theme];\n  }\n  getScopes(theme = this.theme) {\n    return getScopes(this._stacks[theme]);\n  }\n  toJSON() {\n    return {\n      lang: this.lang,\n      theme: this.theme,\n      themes: this.themes,\n      scopes: this.getScopes()\n    };\n  }\n}\nfunction getScopes(stack) {\n  const scopes = [];\n  const visited = /* @__PURE__ */ new Set();\n  function pushScope(stack2) {\n    if (visited.has(stack2))\n      return;\n    visited.add(stack2);\n    const name = stack2?.nameScopesList?.scopeName;\n    if (name)\n      scopes.push(name);\n    if (stack2.parent)\n      pushScope(stack2.parent);\n  }\n  pushScope(stack);\n  return scopes;\n}\nfunction getGrammarStack(state, theme) {\n  if (!(state instanceof GrammarState))\n    throw new ShikiError$1(\"Invalid grammar state\");\n  return state.getInternalStack(theme);\n}\n\nfunction transformerDecorations() {\n  const map = /* @__PURE__ */ new WeakMap();\n  function getContext(shiki) {\n    if (!map.has(shiki.meta)) {\n      let normalizePosition = function(p) {\n        if (typeof p === \"number\") {\n          if (p < 0 || p > shiki.source.length)\n            throw new ShikiError$1(`Invalid decoration offset: ${p}. Code length: ${shiki.source.length}`);\n          return {\n            ...converter.indexToPos(p),\n            offset: p\n          };\n        } else {\n          const line = converter.lines[p.line];\n          if (line === void 0)\n            throw new ShikiError$1(`Invalid decoration position ${JSON.stringify(p)}. Lines length: ${converter.lines.length}`);\n          let character = p.character;\n          if (character < 0)\n            character = line.length + character;\n          if (character < 0 || character > line.length)\n            throw new ShikiError$1(`Invalid decoration position ${JSON.stringify(p)}. Line ${p.line} length: ${line.length}`);\n          return {\n            ...p,\n            character,\n            offset: converter.posToIndex(p.line, character)\n          };\n        }\n      };\n      const converter = createPositionConverter(shiki.source);\n      const decorations = (shiki.options.decorations || []).map((d) => ({\n        ...d,\n        start: normalizePosition(d.start),\n        end: normalizePosition(d.end)\n      }));\n      verifyIntersections(decorations);\n      map.set(shiki.meta, {\n        decorations,\n        converter,\n        source: shiki.source\n      });\n    }\n    return map.get(shiki.meta);\n  }\n  return {\n    name: \"shiki:decorations\",\n    tokens(tokens) {\n      if (!this.options.decorations?.length)\n        return;\n      const ctx = getContext(this);\n      const breakpoints = ctx.decorations.flatMap((d) => [d.start.offset, d.end.offset]);\n      const splitted = splitTokens(tokens, breakpoints);\n      return splitted;\n    },\n    code(codeEl) {\n      if (!this.options.decorations?.length)\n        return;\n      const ctx = getContext(this);\n      const lines = Array.from(codeEl.children).filter((i) => i.type === \"element\" && i.tagName === \"span\");\n      if (lines.length !== ctx.converter.lines.length)\n        throw new ShikiError$1(`Number of lines in code element (${lines.length}) does not match the number of lines in the source (${ctx.converter.lines.length}). Failed to apply decorations.`);\n      function applyLineSection(line, start, end, decoration) {\n        const lineEl = lines[line];\n        let text = \"\";\n        let startIndex = -1;\n        let endIndex = -1;\n        if (start === 0)\n          startIndex = 0;\n        if (end === 0)\n          endIndex = 0;\n        if (end === Number.POSITIVE_INFINITY)\n          endIndex = lineEl.children.length;\n        if (startIndex === -1 || endIndex === -1) {\n          for (let i = 0; i < lineEl.children.length; i++) {\n            text += stringify(lineEl.children[i]);\n            if (startIndex === -1 && text.length === start)\n              startIndex = i + 1;\n            if (endIndex === -1 && text.length === end)\n              endIndex = i + 1;\n          }\n        }\n        if (startIndex === -1)\n          throw new ShikiError$1(`Failed to find start index for decoration ${JSON.stringify(decoration.start)}`);\n        if (endIndex === -1)\n          throw new ShikiError$1(`Failed to find end index for decoration ${JSON.stringify(decoration.end)}`);\n        const children = lineEl.children.slice(startIndex, endIndex);\n        if (!decoration.alwaysWrap && children.length === lineEl.children.length) {\n          applyDecoration(lineEl, decoration, \"line\");\n        } else if (!decoration.alwaysWrap && children.length === 1 && children[0].type === \"element\") {\n          applyDecoration(children[0], decoration, \"token\");\n        } else {\n          const wrapper = {\n            type: \"element\",\n            tagName: \"span\",\n            properties: {},\n            children\n          };\n          applyDecoration(wrapper, decoration, \"wrapper\");\n          lineEl.children.splice(startIndex, children.length, wrapper);\n        }\n      }\n      function applyLine(line, decoration) {\n        lines[line] = applyDecoration(lines[line], decoration, \"line\");\n      }\n      function applyDecoration(el, decoration, type) {\n        const properties = decoration.properties || {};\n        const transform = decoration.transform || ((i) => i);\n        el.tagName = decoration.tagName || \"span\";\n        el.properties = {\n          ...el.properties,\n          ...properties,\n          class: el.properties.class\n        };\n        if (decoration.properties?.class)\n          addClassToHast(el, decoration.properties.class);\n        el = transform(el, type) || el;\n        return el;\n      }\n      const lineApplies = [];\n      const sorted = ctx.decorations.sort((a, b) => b.start.offset - a.start.offset || a.end.offset - b.end.offset);\n      for (const decoration of sorted) {\n        const { start, end } = decoration;\n        if (start.line === end.line) {\n          applyLineSection(start.line, start.character, end.character, decoration);\n        } else if (start.line < end.line) {\n          applyLineSection(start.line, start.character, Number.POSITIVE_INFINITY, decoration);\n          for (let i = start.line + 1; i < end.line; i++)\n            lineApplies.unshift(() => applyLine(i, decoration));\n          applyLineSection(end.line, 0, end.character, decoration);\n        }\n      }\n      lineApplies.forEach((i) => i());\n    }\n  };\n}\nfunction verifyIntersections(items) {\n  for (let i = 0; i < items.length; i++) {\n    const foo = items[i];\n    if (foo.start.offset > foo.end.offset)\n      throw new ShikiError$1(`Invalid decoration range: ${JSON.stringify(foo.start)} - ${JSON.stringify(foo.end)}`);\n    for (let j = i + 1; j < items.length; j++) {\n      const bar = items[j];\n      const isFooHasBarStart = foo.start.offset <= bar.start.offset && bar.start.offset < foo.end.offset;\n      const isFooHasBarEnd = foo.start.offset < bar.end.offset && bar.end.offset <= foo.end.offset;\n      const isBarHasFooStart = bar.start.offset <= foo.start.offset && foo.start.offset < bar.end.offset;\n      const isBarHasFooEnd = bar.start.offset < foo.end.offset && foo.end.offset <= bar.end.offset;\n      if (isFooHasBarStart || isFooHasBarEnd || isBarHasFooStart || isBarHasFooEnd) {\n        if (isFooHasBarStart && isFooHasBarEnd)\n          continue;\n        if (isBarHasFooStart && isBarHasFooEnd)\n          continue;\n        if (isBarHasFooStart && foo.start.offset === foo.end.offset)\n          continue;\n        if (isFooHasBarEnd && bar.start.offset === bar.end.offset)\n          continue;\n        throw new ShikiError$1(`Decorations ${JSON.stringify(foo.start)} and ${JSON.stringify(bar.start)} intersect.`);\n      }\n    }\n  }\n}\nfunction stringify(el) {\n  if (el.type === \"text\")\n    return el.value;\n  if (el.type === \"element\")\n    return el.children.map(stringify).join(\"\");\n  return \"\";\n}\n\nconst builtInTransformers = [\n  /* @__PURE__ */ transformerDecorations()\n];\nfunction getTransformers(options) {\n  const transformers = sortTransformersByEnforcement(options.transformers || []);\n  return [\n    ...transformers.pre,\n    ...transformers.normal,\n    ...transformers.post,\n    ...builtInTransformers\n  ];\n}\nfunction sortTransformersByEnforcement(transformers) {\n  const pre = [];\n  const post = [];\n  const normal = [];\n  for (const transformer of transformers) {\n    switch (transformer.enforce) {\n      case \"pre\":\n        pre.push(transformer);\n        break;\n      case \"post\":\n        post.push(transformer);\n        break;\n      default:\n        normal.push(transformer);\n    }\n  }\n  return { pre, post, normal };\n}\n\n// src/colors.ts\nvar namedColors = [\n  \"black\",\n  \"red\",\n  \"green\",\n  \"yellow\",\n  \"blue\",\n  \"magenta\",\n  \"cyan\",\n  \"white\",\n  \"brightBlack\",\n  \"brightRed\",\n  \"brightGreen\",\n  \"brightYellow\",\n  \"brightBlue\",\n  \"brightMagenta\",\n  \"brightCyan\",\n  \"brightWhite\"\n];\n\n// src/decorations.ts\nvar decorations = {\n  1: \"bold\",\n  2: \"dim\",\n  3: \"italic\",\n  4: \"underline\",\n  7: \"reverse\",\n  8: \"hidden\",\n  9: \"strikethrough\"\n};\n\n// src/parser.ts\nfunction findSequence(value, position) {\n  const nextEscape = value.indexOf(\"\\x1B\", position);\n  if (nextEscape !== -1) {\n    if (value[nextEscape + 1] === \"[\") {\n      const nextClose = value.indexOf(\"m\", nextEscape);\n      if (nextClose !== -1) {\n        return {\n          sequence: value.substring(nextEscape + 2, nextClose).split(\";\"),\n          startPosition: nextEscape,\n          position: nextClose + 1\n        };\n      }\n    }\n  }\n  return {\n    position: value.length\n  };\n}\nfunction parseColor(sequence) {\n  const colorMode = sequence.shift();\n  if (colorMode === \"2\") {\n    const rgb = sequence.splice(0, 3).map((x) => Number.parseInt(x));\n    if (rgb.length !== 3 || rgb.some((x) => Number.isNaN(x)))\n      return;\n    return {\n      type: \"rgb\",\n      rgb\n    };\n  } else if (colorMode === \"5\") {\n    const index = sequence.shift();\n    if (index) {\n      return { type: \"table\", index: Number(index) };\n    }\n  }\n}\nfunction parseSequence(sequence) {\n  const commands = [];\n  while (sequence.length > 0) {\n    const code = sequence.shift();\n    if (!code)\n      continue;\n    const codeInt = Number.parseInt(code);\n    if (Number.isNaN(codeInt))\n      continue;\n    if (codeInt === 0) {\n      commands.push({ type: \"resetAll\" });\n    } else if (codeInt <= 9) {\n      const decoration = decorations[codeInt];\n      if (decoration) {\n        commands.push({\n          type: \"setDecoration\",\n          value: decorations[codeInt]\n        });\n      }\n    } else if (codeInt <= 29) {\n      const decoration = decorations[codeInt - 20];\n      if (decoration) {\n        commands.push({\n          type: \"resetDecoration\",\n          value: decoration\n        });\n        if (decoration === \"dim\") {\n          commands.push({\n            type: \"resetDecoration\",\n            value: \"bold\"\n          });\n        }\n      }\n    } else if (codeInt <= 37) {\n      commands.push({\n        type: \"setForegroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 30] }\n      });\n    } else if (codeInt === 38) {\n      const color = parseColor(sequence);\n      if (color) {\n        commands.push({\n          type: \"setForegroundColor\",\n          value: color\n        });\n      }\n    } else if (codeInt === 39) {\n      commands.push({\n        type: \"resetForegroundColor\"\n      });\n    } else if (codeInt <= 47) {\n      commands.push({\n        type: \"setBackgroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 40] }\n      });\n    } else if (codeInt === 48) {\n      const color = parseColor(sequence);\n      if (color) {\n        commands.push({\n          type: \"setBackgroundColor\",\n          value: color\n        });\n      }\n    } else if (codeInt === 49) {\n      commands.push({\n        type: \"resetBackgroundColor\"\n      });\n    } else if (codeInt === 53) {\n      commands.push({\n        type: \"setDecoration\",\n        value: \"overline\"\n      });\n    } else if (codeInt === 55) {\n      commands.push({\n        type: \"resetDecoration\",\n        value: \"overline\"\n      });\n    } else if (codeInt >= 90 && codeInt <= 97) {\n      commands.push({\n        type: \"setForegroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 90 + 8] }\n      });\n    } else if (codeInt >= 100 && codeInt <= 107) {\n      commands.push({\n        type: \"setBackgroundColor\",\n        value: { type: \"named\", name: namedColors[codeInt - 100 + 8] }\n      });\n    }\n  }\n  return commands;\n}\nfunction createAnsiSequenceParser() {\n  let foreground = null;\n  let background = null;\n  let decorations2 = /* @__PURE__ */ new Set();\n  return {\n    parse(value) {\n      const tokens = [];\n      let position = 0;\n      do {\n        const findResult = findSequence(value, position);\n        const text = findResult.sequence ? value.substring(position, findResult.startPosition) : value.substring(position);\n        if (text.length > 0) {\n          tokens.push({\n            value: text,\n            foreground,\n            background,\n            decorations: new Set(decorations2)\n          });\n        }\n        if (findResult.sequence) {\n          const commands = parseSequence(findResult.sequence);\n          for (const styleToken of commands) {\n            if (styleToken.type === \"resetAll\") {\n              foreground = null;\n              background = null;\n              decorations2.clear();\n            } else if (styleToken.type === \"resetForegroundColor\") {\n              foreground = null;\n            } else if (styleToken.type === \"resetBackgroundColor\") {\n              background = null;\n            } else if (styleToken.type === \"resetDecoration\") {\n              decorations2.delete(styleToken.value);\n            }\n          }\n          for (const styleToken of commands) {\n            if (styleToken.type === \"setForegroundColor\") {\n              foreground = styleToken.value;\n            } else if (styleToken.type === \"setBackgroundColor\") {\n              background = styleToken.value;\n            } else if (styleToken.type === \"setDecoration\") {\n              decorations2.add(styleToken.value);\n            }\n          }\n        }\n        position = findResult.position;\n      } while (position < value.length);\n      return tokens;\n    }\n  };\n}\n\n// src/palette.ts\nvar defaultNamedColorsMap = {\n  black: \"#000000\",\n  red: \"#bb0000\",\n  green: \"#00bb00\",\n  yellow: \"#bbbb00\",\n  blue: \"#0000bb\",\n  magenta: \"#ff00ff\",\n  cyan: \"#00bbbb\",\n  white: \"#eeeeee\",\n  brightBlack: \"#555555\",\n  brightRed: \"#ff5555\",\n  brightGreen: \"#00ff00\",\n  brightYellow: \"#ffff55\",\n  brightBlue: \"#5555ff\",\n  brightMagenta: \"#ff55ff\",\n  brightCyan: \"#55ffff\",\n  brightWhite: \"#ffffff\"\n};\nfunction createColorPalette(namedColorsMap = defaultNamedColorsMap) {\n  function namedColor(name) {\n    return namedColorsMap[name];\n  }\n  function rgbColor(rgb) {\n    return `#${rgb.map((x) => Math.max(0, Math.min(x, 255)).toString(16).padStart(2, \"0\")).join(\"\")}`;\n  }\n  let colorTable;\n  function getColorTable() {\n    if (colorTable) {\n      return colorTable;\n    }\n    colorTable = [];\n    for (let i = 0; i < namedColors.length; i++) {\n      colorTable.push(namedColor(namedColors[i]));\n    }\n    let levels = [0, 95, 135, 175, 215, 255];\n    for (let r = 0; r < 6; r++) {\n      for (let g = 0; g < 6; g++) {\n        for (let b = 0; b < 6; b++) {\n          colorTable.push(rgbColor([levels[r], levels[g], levels[b]]));\n        }\n      }\n    }\n    let level = 8;\n    for (let i = 0; i < 24; i++, level += 10) {\n      colorTable.push(rgbColor([level, level, level]));\n    }\n    return colorTable;\n  }\n  function tableColor(index) {\n    return getColorTable()[index];\n  }\n  function value(color) {\n    switch (color.type) {\n      case \"named\":\n        return namedColor(color.name);\n      case \"rgb\":\n        return rgbColor(color.rgb);\n      case \"table\":\n        return tableColor(color.index);\n    }\n  }\n  return {\n    value\n  };\n}\n\nconst defaultAnsiColors = {\n  black: \"#000000\",\n  red: \"#cd3131\",\n  green: \"#0DBC79\",\n  yellow: \"#E5E510\",\n  blue: \"#2472C8\",\n  magenta: \"#BC3FBC\",\n  cyan: \"#11A8CD\",\n  white: \"#E5E5E5\",\n  brightBlack: \"#666666\",\n  brightRed: \"#F14C4C\",\n  brightGreen: \"#23D18B\",\n  brightYellow: \"#F5F543\",\n  brightBlue: \"#3B8EEA\",\n  brightMagenta: \"#D670D6\",\n  brightCyan: \"#29B8DB\",\n  brightWhite: \"#FFFFFF\"\n};\nfunction tokenizeAnsiWithTheme(theme, fileContents, options) {\n  const colorReplacements = resolveColorReplacements(theme, options);\n  const lines = splitLines(fileContents);\n  const ansiPalette = Object.fromEntries(\n    namedColors.map((name) => {\n      const key = `terminal.ansi${name[0].toUpperCase()}${name.substring(1)}`;\n      const themeColor = theme.colors?.[key];\n      return [name, themeColor || defaultAnsiColors[name]];\n    })\n  );\n  const colorPalette = createColorPalette(ansiPalette);\n  const parser = createAnsiSequenceParser();\n  return lines.map(\n    (line) => parser.parse(line[0]).map((token) => {\n      let color;\n      let bgColor;\n      if (token.decorations.has(\"reverse\")) {\n        color = token.background ? colorPalette.value(token.background) : theme.bg;\n        bgColor = token.foreground ? colorPalette.value(token.foreground) : theme.fg;\n      } else {\n        color = token.foreground ? colorPalette.value(token.foreground) : theme.fg;\n        bgColor = token.background ? colorPalette.value(token.background) : void 0;\n      }\n      color = applyColorReplacements(color, colorReplacements);\n      bgColor = applyColorReplacements(bgColor, colorReplacements);\n      if (token.decorations.has(\"dim\"))\n        color = dimColor(color);\n      let fontStyle = FontStyle.None;\n      if (token.decorations.has(\"bold\"))\n        fontStyle |= FontStyle.Bold;\n      if (token.decorations.has(\"italic\"))\n        fontStyle |= FontStyle.Italic;\n      if (token.decorations.has(\"underline\"))\n        fontStyle |= FontStyle.Underline;\n      if (token.decorations.has(\"strikethrough\"))\n        fontStyle |= FontStyle.Strikethrough;\n      return {\n        content: token.value,\n        offset: line[1],\n        // TODO: more accurate offset? might need to fork ansi-sequence-parser\n        color,\n        bgColor,\n        fontStyle\n      };\n    })\n  );\n}\nfunction dimColor(color) {\n  const hexMatch = color.match(/#([0-9a-f]{3,8})/i);\n  if (hexMatch) {\n    const hex = hexMatch[1];\n    if (hex.length === 8) {\n      const alpha = Math.round(Number.parseInt(hex.slice(6, 8), 16) / 2).toString(16).padStart(2, \"0\");\n      return `#${hex.slice(0, 6)}${alpha}`;\n    } else if (hex.length === 6) {\n      return `#${hex}80`;\n    } else if (hex.length === 4) {\n      const r = hex[0];\n      const g = hex[1];\n      const b = hex[2];\n      const a = hex[3];\n      const alpha = Math.round(Number.parseInt(`${a}${a}`, 16) / 2).toString(16).padStart(2, \"0\");\n      return `#${r}${r}${g}${g}${b}${b}${alpha}`;\n    } else if (hex.length === 3) {\n      const r = hex[0];\n      const g = hex[1];\n      const b = hex[2];\n      return `#${r}${r}${g}${g}${b}${b}80`;\n    }\n  }\n  const cssVarMatch = color.match(/var\\((--[\\w-]+-ansi-[\\w-]+)\\)/);\n  if (cssVarMatch)\n    return `var(${cssVarMatch[1]}-dim)`;\n  return color;\n}\n\nfunction codeToTokensBase(internal, code, options = {}) {\n  const {\n    theme: themeName = internal.getLoadedThemes()[0]\n  } = options;\n  const lang = internal.resolveLangAlias(options.lang || \"text\");\n  if (isPlainLang(lang) || isNoneTheme(themeName))\n    return splitLines(code).map((line) => [{ content: line[0], offset: line[1] }]);\n  const { theme, colorMap } = internal.setTheme(themeName);\n  if (lang === \"ansi\")\n    return tokenizeAnsiWithTheme(theme, code, options);\n  const _grammar = internal.getLanguage(options.lang || \"text\");\n  if (options.grammarState) {\n    if (options.grammarState.lang !== _grammar.name) {\n      throw new ShikiError$1(`Grammar state language \"${options.grammarState.lang}\" does not match highlight language \"${_grammar.name}\"`);\n    }\n    if (!options.grammarState.themes.includes(theme.name)) {\n      throw new ShikiError$1(`Grammar state themes \"${options.grammarState.themes}\" do not contain highlight theme \"${theme.name}\"`);\n    }\n  }\n  return tokenizeWithTheme(code, _grammar, theme, colorMap, options);\n}\nfunction getLastGrammarState(...args) {\n  if (args.length === 2) {\n    return getLastGrammarStateFromMap(args[1]);\n  }\n  const [internal, code, options = {}] = args;\n  const {\n    lang = \"text\",\n    theme: themeName = internal.getLoadedThemes()[0]\n  } = options;\n  if (isPlainLang(lang) || isNoneTheme(themeName))\n    throw new ShikiError$1(\"Plain language does not have grammar state\");\n  if (lang === \"ansi\")\n    throw new ShikiError$1(\"ANSI language does not have grammar state\");\n  const { theme, colorMap } = internal.setTheme(themeName);\n  const _grammar = internal.getLanguage(lang);\n  return new GrammarState(\n    _tokenizeWithTheme(code, _grammar, theme, colorMap, options).stateStack,\n    _grammar.name,\n    theme.name\n  );\n}\nfunction tokenizeWithTheme(code, grammar, theme, colorMap, options) {\n  const result = _tokenizeWithTheme(code, grammar, theme, colorMap, options);\n  const grammarState = new GrammarState(\n    result.stateStack,\n    grammar.name,\n    theme.name\n  );\n  setLastGrammarStateToMap(result.tokens, grammarState);\n  return result.tokens;\n}\nfunction _tokenizeWithTheme(code, grammar, theme, colorMap, options) {\n  const colorReplacements = resolveColorReplacements(theme, options);\n  const {\n    tokenizeMaxLineLength = 0,\n    tokenizeTimeLimit = 500\n  } = options;\n  const lines = splitLines(code);\n  let stateStack = options.grammarState ? getGrammarStack(options.grammarState, theme.name) ?? INITIAL : options.grammarContextCode != null ? _tokenizeWithTheme(\n    options.grammarContextCode,\n    grammar,\n    theme,\n    colorMap,\n    {\n      ...options,\n      grammarState: void 0,\n      grammarContextCode: void 0\n    }\n  ).stateStack : INITIAL;\n  let actual = [];\n  const final = [];\n  for (let i = 0, len = lines.length; i < len; i++) {\n    const [line, lineOffset] = lines[i];\n    if (line === \"\") {\n      actual = [];\n      final.push([]);\n      continue;\n    }\n    if (tokenizeMaxLineLength > 0 && line.length >= tokenizeMaxLineLength) {\n      actual = [];\n      final.push([{\n        content: line,\n        offset: lineOffset,\n        color: \"\",\n        fontStyle: 0\n      }]);\n      continue;\n    }\n    let resultWithScopes;\n    let tokensWithScopes;\n    let tokensWithScopesIndex;\n    if (options.includeExplanation) {\n      resultWithScopes = grammar.tokenizeLine(line, stateStack, tokenizeTimeLimit);\n      tokensWithScopes = resultWithScopes.tokens;\n      tokensWithScopesIndex = 0;\n    }\n    const result = grammar.tokenizeLine2(line, stateStack, tokenizeTimeLimit);\n    const tokensLength = result.tokens.length / 2;\n    for (let j = 0; j < tokensLength; j++) {\n      const startIndex = result.tokens[2 * j];\n      const nextStartIndex = j + 1 < tokensLength ? result.tokens[2 * j + 2] : line.length;\n      if (startIndex === nextStartIndex)\n        continue;\n      const metadata = result.tokens[2 * j + 1];\n      const color = applyColorReplacements(\n        colorMap[EncodedTokenMetadata.getForeground(metadata)],\n        colorReplacements\n      );\n      const fontStyle = EncodedTokenMetadata.getFontStyle(metadata);\n      const token = {\n        content: line.substring(startIndex, nextStartIndex),\n        offset: lineOffset + startIndex,\n        color,\n        fontStyle\n      };\n      if (options.includeExplanation) {\n        const themeSettingsSelectors = [];\n        if (options.includeExplanation !== \"scopeName\") {\n          for (const setting of theme.settings) {\n            let selectors;\n            switch (typeof setting.scope) {\n              case \"string\":\n                selectors = setting.scope.split(/,/).map((scope) => scope.trim());\n                break;\n              case \"object\":\n                selectors = setting.scope;\n                break;\n              default:\n                continue;\n            }\n            themeSettingsSelectors.push({\n              settings: setting,\n              selectors: selectors.map((selector) => selector.split(/ /))\n            });\n          }\n        }\n        token.explanation = [];\n        let offset = 0;\n        while (startIndex + offset < nextStartIndex) {\n          const tokenWithScopes = tokensWithScopes[tokensWithScopesIndex];\n          const tokenWithScopesText = line.substring(\n            tokenWithScopes.startIndex,\n            tokenWithScopes.endIndex\n          );\n          offset += tokenWithScopesText.length;\n          token.explanation.push({\n            content: tokenWithScopesText,\n            scopes: options.includeExplanation === \"scopeName\" ? explainThemeScopesNameOnly(\n              tokenWithScopes.scopes\n            ) : explainThemeScopesFull(\n              themeSettingsSelectors,\n              tokenWithScopes.scopes\n            )\n          });\n          tokensWithScopesIndex += 1;\n        }\n      }\n      actual.push(token);\n    }\n    final.push(actual);\n    actual = [];\n    stateStack = result.ruleStack;\n  }\n  return {\n    tokens: final,\n    stateStack\n  };\n}\nfunction explainThemeScopesNameOnly(scopes) {\n  return scopes.map((scope) => ({ scopeName: scope }));\n}\nfunction explainThemeScopesFull(themeSelectors, scopes) {\n  const result = [];\n  for (let i = 0, len = scopes.length; i < len; i++) {\n    const scope = scopes[i];\n    result[i] = {\n      scopeName: scope,\n      themeMatches: explainThemeScope(themeSelectors, scope, scopes.slice(0, i))\n    };\n  }\n  return result;\n}\nfunction matchesOne(selector, scope) {\n  return selector === scope || scope.substring(0, selector.length) === selector && scope[selector.length] === \".\";\n}\nfunction matches(selectors, scope, parentScopes) {\n  if (!matchesOne(selectors[selectors.length - 1], scope))\n    return false;\n  let selectorParentIndex = selectors.length - 2;\n  let parentIndex = parentScopes.length - 1;\n  while (selectorParentIndex >= 0 && parentIndex >= 0) {\n    if (matchesOne(selectors[selectorParentIndex], parentScopes[parentIndex]))\n      selectorParentIndex -= 1;\n    parentIndex -= 1;\n  }\n  if (selectorParentIndex === -1)\n    return true;\n  return false;\n}\nfunction explainThemeScope(themeSettingsSelectors, scope, parentScopes) {\n  const result = [];\n  for (const { selectors, settings } of themeSettingsSelectors) {\n    for (const selectorPieces of selectors) {\n      if (matches(selectorPieces, scope, parentScopes)) {\n        result.push(settings);\n        break;\n      }\n    }\n  }\n  return result;\n}\n\nfunction codeToTokensWithThemes(internal, code, options) {\n  const themes = Object.entries(options.themes).filter((i) => i[1]).map((i) => ({ color: i[0], theme: i[1] }));\n  const themedTokens = themes.map((t) => {\n    const tokens2 = codeToTokensBase(internal, code, {\n      ...options,\n      theme: t.theme\n    });\n    const state = getLastGrammarStateFromMap(tokens2);\n    const theme = typeof t.theme === \"string\" ? t.theme : t.theme.name;\n    return {\n      tokens: tokens2,\n      state,\n      theme\n    };\n  });\n  const tokens = syncThemesTokenization(\n    ...themedTokens.map((i) => i.tokens)\n  );\n  const mergedTokens = tokens[0].map(\n    (line, lineIdx) => line.map((_token, tokenIdx) => {\n      const mergedToken = {\n        content: _token.content,\n        variants: {},\n        offset: _token.offset\n      };\n      if (\"includeExplanation\" in options && options.includeExplanation) {\n        mergedToken.explanation = _token.explanation;\n      }\n      tokens.forEach((t, themeIdx) => {\n        const {\n          content: _,\n          explanation: __,\n          offset: ___,\n          ...styles\n        } = t[lineIdx][tokenIdx];\n        mergedToken.variants[themes[themeIdx].color] = styles;\n      });\n      return mergedToken;\n    })\n  );\n  const mergedGrammarState = themedTokens[0].state ? new GrammarState(\n    Object.fromEntries(themedTokens.map((s) => [s.theme, s.state?.getInternalStack(s.theme)])),\n    themedTokens[0].state.lang\n  ) : void 0;\n  if (mergedGrammarState)\n    setLastGrammarStateToMap(mergedTokens, mergedGrammarState);\n  return mergedTokens;\n}\nfunction syncThemesTokenization(...themes) {\n  const outThemes = themes.map(() => []);\n  const count = themes.length;\n  for (let i = 0; i < themes[0].length; i++) {\n    const lines = themes.map((t) => t[i]);\n    const outLines = outThemes.map(() => []);\n    outThemes.forEach((t, i2) => t.push(outLines[i2]));\n    const indexes = lines.map(() => 0);\n    const current = lines.map((l) => l[0]);\n    while (current.every((t) => t)) {\n      const minLength = Math.min(...current.map((t) => t.content.length));\n      for (let n = 0; n < count; n++) {\n        const token = current[n];\n        if (token.content.length === minLength) {\n          outLines[n].push(token);\n          indexes[n] += 1;\n          current[n] = lines[n][indexes[n]];\n        } else {\n          outLines[n].push({\n            ...token,\n            content: token.content.slice(0, minLength)\n          });\n          current[n] = {\n            ...token,\n            content: token.content.slice(minLength),\n            offset: token.offset + minLength\n          };\n        }\n      }\n    }\n  }\n  return outThemes;\n}\n\nfunction codeToTokens(internal, code, options) {\n  let bg;\n  let fg;\n  let tokens;\n  let themeName;\n  let rootStyle;\n  let grammarState;\n  if (\"themes\" in options) {\n    const {\n      defaultColor = \"light\",\n      cssVariablePrefix = \"--shiki-\",\n      colorsRendering = \"css-vars\"\n    } = options;\n    const themes = Object.entries(options.themes).filter((i) => i[1]).map((i) => ({ color: i[0], theme: i[1] })).sort((a, b) => a.color === defaultColor ? -1 : b.color === defaultColor ? 1 : 0);\n    if (themes.length === 0)\n      throw new ShikiError$1(\"`themes` option must not be empty\");\n    const themeTokens = codeToTokensWithThemes(\n      internal,\n      code,\n      options\n    );\n    grammarState = getLastGrammarStateFromMap(themeTokens);\n    if (defaultColor && DEFAULT_COLOR_LIGHT_DARK !== defaultColor && !themes.find((t) => t.color === defaultColor))\n      throw new ShikiError$1(`\\`themes\\` option must contain the defaultColor key \\`${defaultColor}\\``);\n    const themeRegs = themes.map((t) => internal.getTheme(t.theme));\n    const themesOrder = themes.map((t) => t.color);\n    tokens = themeTokens.map((line) => line.map((token) => flatTokenVariants(token, themesOrder, cssVariablePrefix, defaultColor, colorsRendering)));\n    if (grammarState)\n      setLastGrammarStateToMap(tokens, grammarState);\n    const themeColorReplacements = themes.map((t) => resolveColorReplacements(t.theme, options));\n    fg = mapThemeColors(themes, themeRegs, themeColorReplacements, cssVariablePrefix, defaultColor, \"fg\", colorsRendering);\n    bg = mapThemeColors(themes, themeRegs, themeColorReplacements, cssVariablePrefix, defaultColor, \"bg\", colorsRendering);\n    themeName = `shiki-themes ${themeRegs.map((t) => t.name).join(\" \")}`;\n    rootStyle = defaultColor ? void 0 : [fg, bg].join(\";\");\n  } else if (\"theme\" in options) {\n    const colorReplacements = resolveColorReplacements(options.theme, options);\n    tokens = codeToTokensBase(\n      internal,\n      code,\n      options\n    );\n    const _theme = internal.getTheme(options.theme);\n    bg = applyColorReplacements(_theme.bg, colorReplacements);\n    fg = applyColorReplacements(_theme.fg, colorReplacements);\n    themeName = _theme.name;\n    grammarState = getLastGrammarStateFromMap(tokens);\n  } else {\n    throw new ShikiError$1(\"Invalid options, either `theme` or `themes` must be provided\");\n  }\n  return {\n    tokens,\n    fg,\n    bg,\n    themeName,\n    rootStyle,\n    grammarState\n  };\n}\nfunction mapThemeColors(themes, themeRegs, themeColorReplacements, cssVariablePrefix, defaultColor, property, colorsRendering) {\n  return themes.map((t, idx) => {\n    const value = applyColorReplacements(themeRegs[idx][property], themeColorReplacements[idx]) || \"inherit\";\n    const cssVar = `${cssVariablePrefix + t.color}${property === \"bg\" ? \"-bg\" : \"\"}:${value}`;\n    if (idx === 0 && defaultColor) {\n      if (defaultColor === DEFAULT_COLOR_LIGHT_DARK && themes.length > 1) {\n        const lightIndex = themes.findIndex((t2) => t2.color === \"light\");\n        const darkIndex = themes.findIndex((t2) => t2.color === \"dark\");\n        if (lightIndex === -1 || darkIndex === -1)\n          throw new ShikiError$1('When using `defaultColor: \"light-dark()\"`, you must provide both `light` and `dark` themes');\n        const lightValue = applyColorReplacements(themeRegs[lightIndex][property], themeColorReplacements[lightIndex]) || \"inherit\";\n        const darkValue = applyColorReplacements(themeRegs[darkIndex][property], themeColorReplacements[darkIndex]) || \"inherit\";\n        return `light-dark(${lightValue}, ${darkValue});${cssVar}`;\n      }\n      return value;\n    }\n    if (colorsRendering === \"css-vars\") {\n      return cssVar;\n    }\n    return null;\n  }).filter((i) => !!i).join(\";\");\n}\n\nfunction codeToHast(internal, code, options, transformerContext = {\n  meta: {},\n  options,\n  codeToHast: (_code, _options) => codeToHast(internal, _code, _options),\n  codeToTokens: (_code, _options) => codeToTokens(internal, _code, _options)\n}) {\n  let input = code;\n  for (const transformer of getTransformers(options))\n    input = transformer.preprocess?.call(transformerContext, input, options) || input;\n  let {\n    tokens,\n    fg,\n    bg,\n    themeName,\n    rootStyle,\n    grammarState\n  } = codeToTokens(internal, input, options);\n  const {\n    mergeWhitespaces = true,\n    mergeSameStyleTokens = false\n  } = options;\n  if (mergeWhitespaces === true)\n    tokens = mergeWhitespaceTokens(tokens);\n  else if (mergeWhitespaces === \"never\")\n    tokens = splitWhitespaceTokens(tokens);\n  if (mergeSameStyleTokens) {\n    tokens = mergeAdjacentStyledTokens(tokens);\n  }\n  const contextSource = {\n    ...transformerContext,\n    get source() {\n      return input;\n    }\n  };\n  for (const transformer of getTransformers(options))\n    tokens = transformer.tokens?.call(contextSource, tokens) || tokens;\n  return tokensToHast(\n    tokens,\n    {\n      ...options,\n      fg,\n      bg,\n      themeName,\n      rootStyle: options.rootStyle === false ? false : options.rootStyle ?? rootStyle\n    },\n    contextSource,\n    grammarState\n  );\n}\nfunction tokensToHast(tokens, options, transformerContext, grammarState = getLastGrammarStateFromMap(tokens)) {\n  const transformers = getTransformers(options);\n  const lines = [];\n  const root = {\n    type: \"root\",\n    children: []\n  };\n  const {\n    structure = \"classic\",\n    tabindex = \"0\"\n  } = options;\n  const properties = {\n    class: `shiki ${options.themeName || \"\"}`\n  };\n  if (options.rootStyle !== false) {\n    if (options.rootStyle != null)\n      properties.style = options.rootStyle;\n    else\n      properties.style = `background-color:${options.bg};color:${options.fg}`;\n  }\n  if (tabindex !== false && tabindex != null)\n    properties.tabindex = tabindex.toString();\n  for (const [key, value] of Object.entries(options.meta || {})) {\n    if (!key.startsWith(\"_\"))\n      properties[key] = value;\n  }\n  let preNode = {\n    type: \"element\",\n    tagName: \"pre\",\n    properties,\n    children: [],\n    data: options.data\n  };\n  let codeNode = {\n    type: \"element\",\n    tagName: \"code\",\n    properties: {},\n    children: lines\n  };\n  const lineNodes = [];\n  const context = {\n    ...transformerContext,\n    structure,\n    addClassToHast,\n    get source() {\n      return transformerContext.source;\n    },\n    get tokens() {\n      return tokens;\n    },\n    get options() {\n      return options;\n    },\n    get root() {\n      return root;\n    },\n    get pre() {\n      return preNode;\n    },\n    get code() {\n      return codeNode;\n    },\n    get lines() {\n      return lineNodes;\n    }\n  };\n  tokens.forEach((line, idx) => {\n    if (idx) {\n      if (structure === \"inline\")\n        root.children.push({ type: \"element\", tagName: \"br\", properties: {}, children: [] });\n      else if (structure === \"classic\")\n        lines.push({ type: \"text\", value: \"\\n\" });\n    }\n    let lineNode = {\n      type: \"element\",\n      tagName: \"span\",\n      properties: { class: \"line\" },\n      children: []\n    };\n    let col = 0;\n    for (const token of line) {\n      let tokenNode = {\n        type: \"element\",\n        tagName: \"span\",\n        properties: {\n          ...token.htmlAttrs\n        },\n        children: [{ type: \"text\", value: token.content }]\n      };\n      const style = stringifyTokenStyle(token.htmlStyle || getTokenStyleObject(token));\n      if (style)\n        tokenNode.properties.style = style;\n      for (const transformer of transformers)\n        tokenNode = transformer?.span?.call(context, tokenNode, idx + 1, col, lineNode, token) || tokenNode;\n      if (structure === \"inline\")\n        root.children.push(tokenNode);\n      else if (structure === \"classic\")\n        lineNode.children.push(tokenNode);\n      col += token.content.length;\n    }\n    if (structure === \"classic\") {\n      for (const transformer of transformers)\n        lineNode = transformer?.line?.call(context, lineNode, idx + 1) || lineNode;\n      lineNodes.push(lineNode);\n      lines.push(lineNode);\n    } else if (structure === \"inline\") {\n      lineNodes.push(lineNode);\n    }\n  });\n  if (structure === \"classic\") {\n    for (const transformer of transformers)\n      codeNode = transformer?.code?.call(context, codeNode) || codeNode;\n    preNode.children.push(codeNode);\n    for (const transformer of transformers)\n      preNode = transformer?.pre?.call(context, preNode) || preNode;\n    root.children.push(preNode);\n  } else if (structure === \"inline\") {\n    const syntheticLines = [];\n    let currentLine = {\n      type: \"element\",\n      tagName: \"span\",\n      properties: { class: \"line\" },\n      children: []\n    };\n    for (const child of root.children) {\n      if (child.type === \"element\" && child.tagName === \"br\") {\n        syntheticLines.push(currentLine);\n        currentLine = {\n          type: \"element\",\n          tagName: \"span\",\n          properties: { class: \"line\" },\n          children: []\n        };\n      } else if (child.type === \"element\" || child.type === \"text\") {\n        currentLine.children.push(child);\n      }\n    }\n    syntheticLines.push(currentLine);\n    const syntheticCode = {\n      type: \"element\",\n      tagName: \"code\",\n      properties: {},\n      children: syntheticLines\n    };\n    let transformedCode = syntheticCode;\n    for (const transformer of transformers)\n      transformedCode = transformer?.code?.call(context, transformedCode) || transformedCode;\n    root.children = [];\n    for (let i = 0; i < transformedCode.children.length; i++) {\n      if (i > 0)\n        root.children.push({ type: \"element\", tagName: \"br\", properties: {}, children: [] });\n      const line = transformedCode.children[i];\n      if (line.type === \"element\")\n        root.children.push(...line.children);\n    }\n  }\n  let result = root;\n  for (const transformer of transformers)\n    result = transformer?.root?.call(context, result) || result;\n  if (grammarState)\n    setLastGrammarStateToMap(result, grammarState);\n  return result;\n}\nfunction mergeWhitespaceTokens(tokens) {\n  return tokens.map((line) => {\n    const newLine = [];\n    let carryOnContent = \"\";\n    let firstOffset;\n    line.forEach((token, idx) => {\n      const isDecorated = token.fontStyle && (token.fontStyle & FontStyle.Underline || token.fontStyle & FontStyle.Strikethrough);\n      const couldMerge = !isDecorated;\n      if (couldMerge && token.content.match(/^\\s+$/) && line[idx + 1]) {\n        if (firstOffset === void 0)\n          firstOffset = token.offset;\n        carryOnContent += token.content;\n      } else {\n        if (carryOnContent) {\n          if (couldMerge) {\n            newLine.push({\n              ...token,\n              offset: firstOffset,\n              content: carryOnContent + token.content\n            });\n          } else {\n            newLine.push(\n              {\n                content: carryOnContent,\n                offset: firstOffset\n              },\n              token\n            );\n          }\n          firstOffset = void 0;\n          carryOnContent = \"\";\n        } else {\n          newLine.push(token);\n        }\n      }\n    });\n    return newLine;\n  });\n}\nfunction splitWhitespaceTokens(tokens) {\n  return tokens.map((line) => {\n    return line.flatMap((token) => {\n      if (token.content.match(/^\\s+$/))\n        return token;\n      const match = token.content.match(/^(\\s*)(.*?)(\\s*)$/);\n      if (!match)\n        return token;\n      const [, leading, content, trailing] = match;\n      if (!leading && !trailing)\n        return token;\n      const expanded = [{\n        ...token,\n        offset: token.offset + leading.length,\n        content\n      }];\n      if (leading) {\n        expanded.unshift({\n          content: leading,\n          offset: token.offset\n        });\n      }\n      if (trailing) {\n        expanded.push({\n          content: trailing,\n          offset: token.offset + leading.length + content.length\n        });\n      }\n      return expanded;\n    });\n  });\n}\nfunction mergeAdjacentStyledTokens(tokens) {\n  return tokens.map((line) => {\n    const newLine = [];\n    for (const token of line) {\n      if (newLine.length === 0) {\n        newLine.push({ ...token });\n        continue;\n      }\n      const prevToken = newLine[newLine.length - 1];\n      const prevStyle = stringifyTokenStyle(prevToken.htmlStyle || getTokenStyleObject(prevToken));\n      const currentStyle = stringifyTokenStyle(token.htmlStyle || getTokenStyleObject(token));\n      const isPrevDecorated = prevToken.fontStyle && (prevToken.fontStyle & FontStyle.Underline || prevToken.fontStyle & FontStyle.Strikethrough);\n      const isDecorated = token.fontStyle && (token.fontStyle & FontStyle.Underline || token.fontStyle & FontStyle.Strikethrough);\n      if (!isPrevDecorated && !isDecorated && prevStyle === currentStyle) {\n        prevToken.content += token.content;\n      } else {\n        newLine.push({ ...token });\n      }\n    }\n    return newLine;\n  });\n}\n\nconst hastToHtml = toHtml;\nfunction codeToHtml(internal, code, options) {\n  const context = {\n    meta: {},\n    options,\n    codeToHast: (_code, _options) => codeToHast(internal, _code, _options),\n    codeToTokens: (_code, _options) => codeToTokens(internal, _code, _options)\n  };\n  let result = hastToHtml(codeToHast(internal, code, options, context));\n  for (const transformer of getTransformers(options))\n    result = transformer.postprocess?.call(context, result, options) || result;\n  return result;\n}\n\nconst VSCODE_FALLBACK_EDITOR_FG = { light: \"#333333\", dark: \"#bbbbbb\" };\nconst VSCODE_FALLBACK_EDITOR_BG = { light: \"#fffffe\", dark: \"#1e1e1e\" };\nconst RESOLVED_KEY = \"__shiki_resolved\";\nfunction normalizeTheme(rawTheme) {\n  if (rawTheme?.[RESOLVED_KEY])\n    return rawTheme;\n  const theme = {\n    ...rawTheme\n  };\n  if (theme.tokenColors && !theme.settings) {\n    theme.settings = theme.tokenColors;\n    delete theme.tokenColors;\n  }\n  theme.type ||= \"dark\";\n  theme.colorReplacements = { ...theme.colorReplacements };\n  theme.settings ||= [];\n  let { bg, fg } = theme;\n  if (!bg || !fg) {\n    const globalSetting = theme.settings ? theme.settings.find((s) => !s.name && !s.scope) : void 0;\n    if (globalSetting?.settings?.foreground)\n      fg = globalSetting.settings.foreground;\n    if (globalSetting?.settings?.background)\n      bg = globalSetting.settings.background;\n    if (!fg && theme?.colors?.[\"editor.foreground\"])\n      fg = theme.colors[\"editor.foreground\"];\n    if (!bg && theme?.colors?.[\"editor.background\"])\n      bg = theme.colors[\"editor.background\"];\n    if (!fg)\n      fg = theme.type === \"light\" ? VSCODE_FALLBACK_EDITOR_FG.light : VSCODE_FALLBACK_EDITOR_FG.dark;\n    if (!bg)\n      bg = theme.type === \"light\" ? VSCODE_FALLBACK_EDITOR_BG.light : VSCODE_FALLBACK_EDITOR_BG.dark;\n    theme.fg = fg;\n    theme.bg = bg;\n  }\n  if (!(theme.settings[0] && theme.settings[0].settings && !theme.settings[0].scope)) {\n    theme.settings.unshift({\n      settings: {\n        foreground: theme.fg,\n        background: theme.bg\n      }\n    });\n  }\n  let replacementCount = 0;\n  const replacementMap = /* @__PURE__ */ new Map();\n  function getReplacementColor(value) {\n    if (replacementMap.has(value))\n      return replacementMap.get(value);\n    replacementCount += 1;\n    const hex = `#${replacementCount.toString(16).padStart(8, \"0\").toLowerCase()}`;\n    if (theme.colorReplacements?.[`#${hex}`])\n      return getReplacementColor(value);\n    replacementMap.set(value, hex);\n    return hex;\n  }\n  theme.settings = theme.settings.map((setting) => {\n    const replaceFg = setting.settings?.foreground && !setting.settings.foreground.startsWith(\"#\");\n    const replaceBg = setting.settings?.background && !setting.settings.background.startsWith(\"#\");\n    if (!replaceFg && !replaceBg)\n      return setting;\n    const clone = {\n      ...setting,\n      settings: {\n        ...setting.settings\n      }\n    };\n    if (replaceFg) {\n      const replacement = getReplacementColor(setting.settings.foreground);\n      theme.colorReplacements[replacement] = setting.settings.foreground;\n      clone.settings.foreground = replacement;\n    }\n    if (replaceBg) {\n      const replacement = getReplacementColor(setting.settings.background);\n      theme.colorReplacements[replacement] = setting.settings.background;\n      clone.settings.background = replacement;\n    }\n    return clone;\n  });\n  for (const key of Object.keys(theme.colors || {})) {\n    if (key === \"editor.foreground\" || key === \"editor.background\" || key.startsWith(\"terminal.ansi\")) {\n      if (!theme.colors[key]?.startsWith(\"#\")) {\n        const replacement = getReplacementColor(theme.colors[key]);\n        theme.colorReplacements[replacement] = theme.colors[key];\n        theme.colors[key] = replacement;\n      }\n    }\n  }\n  Object.defineProperty(theme, RESOLVED_KEY, {\n    enumerable: false,\n    writable: false,\n    value: true\n  });\n  return theme;\n}\n\nasync function resolveLangs(langs) {\n  return Array.from(new Set((await Promise.all(\n    langs.filter((l) => !isSpecialLang(l)).map(async (lang) => await normalizeGetter(lang).then((r) => Array.isArray(r) ? r : [r]))\n  )).flat()));\n}\nasync function resolveThemes(themes) {\n  const resolved = await Promise.all(\n    themes.map(\n      async (theme) => isSpecialTheme(theme) ? null : normalizeTheme(await normalizeGetter(theme))\n    )\n  );\n  return resolved.filter((i) => !!i);\n}\n\nlet _emitDeprecation = 3;\nlet _emitError = false;\nfunction enableDeprecationWarnings(emitDeprecation = true, emitError = false) {\n  _emitDeprecation = emitDeprecation;\n  _emitError = emitError;\n}\nfunction warnDeprecated(message, version = 3) {\n  if (!_emitDeprecation)\n    return;\n  if (typeof _emitDeprecation === \"number\" && version > _emitDeprecation)\n    return;\n  if (_emitError) {\n    throw new Error(`[SHIKI DEPRECATE]: ${message}`);\n  } else {\n    console.trace(`[SHIKI DEPRECATE]: ${message}`);\n  }\n}\n\nclass ShikiError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"ShikiError\";\n  }\n}\n\nfunction resolveLangAlias(name, alias) {\n  if (!alias)\n    return name;\n  if (alias[name]) {\n    const resolved = /* @__PURE__ */ new Set([name]);\n    while (alias[name]) {\n      name = alias[name];\n      if (resolved.has(name))\n        throw new ShikiError(`Circular alias \\`${Array.from(resolved).join(\" -> \")} -> ${name}\\``);\n      resolved.add(name);\n    }\n  }\n  return name;\n}\n\nclass Registry extends Registry$1 {\n  constructor(_resolver, _themes, _langs, _alias = {}) {\n    super(_resolver);\n    this._resolver = _resolver;\n    this._themes = _themes;\n    this._langs = _langs;\n    this._alias = _alias;\n    this._themes.map((t) => this.loadTheme(t));\n    this.loadLanguages(this._langs);\n  }\n  _resolvedThemes = /* @__PURE__ */ new Map();\n  _resolvedGrammars = /* @__PURE__ */ new Map();\n  _langMap = /* @__PURE__ */ new Map();\n  _langGraph = /* @__PURE__ */ new Map();\n  _textmateThemeCache = /* @__PURE__ */ new WeakMap();\n  _loadedThemesCache = null;\n  _loadedLanguagesCache = null;\n  getTheme(theme) {\n    if (typeof theme === \"string\")\n      return this._resolvedThemes.get(theme);\n    else\n      return this.loadTheme(theme);\n  }\n  loadTheme(theme) {\n    const _theme = normalizeTheme(theme);\n    if (_theme.name) {\n      this._resolvedThemes.set(_theme.name, _theme);\n      this._loadedThemesCache = null;\n    }\n    return _theme;\n  }\n  getLoadedThemes() {\n    if (!this._loadedThemesCache)\n      this._loadedThemesCache = [...this._resolvedThemes.keys()];\n    return this._loadedThemesCache;\n  }\n  // Override and re-implement this method to cache the textmate themes as `TextMateTheme.createFromRawTheme`\n  // is expensive. Themes can switch often especially for dual-theme support.\n  //\n  // The parent class also accepts `colorMap` as the second parameter, but since we don't use that,\n  // we omit here so it's easier to cache the themes.\n  setTheme(theme) {\n    let textmateTheme = this._textmateThemeCache.get(theme);\n    if (!textmateTheme) {\n      textmateTheme = Theme.createFromRawTheme(theme);\n      this._textmateThemeCache.set(theme, textmateTheme);\n    }\n    this._syncRegistry.setTheme(textmateTheme);\n  }\n  getGrammar(name) {\n    name = resolveLangAlias(name, this._alias);\n    return this._resolvedGrammars.get(name);\n  }\n  loadLanguage(lang) {\n    if (this.getGrammar(lang.name))\n      return;\n    const embeddedLazilyBy = new Set(\n      [...this._langMap.values()].filter((i) => i.embeddedLangsLazy?.includes(lang.name))\n    );\n    this._resolver.addLanguage(lang);\n    const grammarConfig = {\n      balancedBracketSelectors: lang.balancedBracketSelectors || [\"*\"],\n      unbalancedBracketSelectors: lang.unbalancedBracketSelectors || []\n    };\n    this._syncRegistry._rawGrammars.set(lang.scopeName, lang);\n    const g = this.loadGrammarWithConfiguration(lang.scopeName, 1, grammarConfig);\n    g.name = lang.name;\n    this._resolvedGrammars.set(lang.name, g);\n    if (lang.aliases) {\n      lang.aliases.forEach((alias) => {\n        this._alias[alias] = lang.name;\n      });\n    }\n    this._loadedLanguagesCache = null;\n    if (embeddedLazilyBy.size) {\n      for (const e of embeddedLazilyBy) {\n        this._resolvedGrammars.delete(e.name);\n        this._loadedLanguagesCache = null;\n        this._syncRegistry?._injectionGrammars?.delete(e.scopeName);\n        this._syncRegistry?._grammars?.delete(e.scopeName);\n        this.loadLanguage(this._langMap.get(e.name));\n      }\n    }\n  }\n  dispose() {\n    super.dispose();\n    this._resolvedThemes.clear();\n    this._resolvedGrammars.clear();\n    this._langMap.clear();\n    this._langGraph.clear();\n    this._loadedThemesCache = null;\n  }\n  loadLanguages(langs) {\n    for (const lang of langs)\n      this.resolveEmbeddedLanguages(lang);\n    const langsGraphArray = Array.from(this._langGraph.entries());\n    const missingLangs = langsGraphArray.filter(([_, lang]) => !lang);\n    if (missingLangs.length) {\n      const dependents = langsGraphArray.filter(([_, lang]) => {\n        if (!lang)\n          return false;\n        const embedded = lang.embeddedLanguages || lang.embeddedLangs;\n        return embedded?.some((l) => missingLangs.map(([name]) => name).includes(l));\n      }).filter((lang) => !missingLangs.includes(lang));\n      throw new ShikiError(`Missing languages ${missingLangs.map(([name]) => `\\`${name}\\``).join(\", \")}, required by ${dependents.map(([name]) => `\\`${name}\\``).join(\", \")}`);\n    }\n    for (const [_, lang] of langsGraphArray)\n      this._resolver.addLanguage(lang);\n    for (const [_, lang] of langsGraphArray)\n      this.loadLanguage(lang);\n  }\n  getLoadedLanguages() {\n    if (!this._loadedLanguagesCache) {\n      this._loadedLanguagesCache = [\n        .../* @__PURE__ */ new Set([...this._resolvedGrammars.keys(), ...Object.keys(this._alias)])\n      ];\n    }\n    return this._loadedLanguagesCache;\n  }\n  resolveEmbeddedLanguages(lang) {\n    this._langMap.set(lang.name, lang);\n    this._langGraph.set(lang.name, lang);\n    const embedded = lang.embeddedLanguages ?? lang.embeddedLangs;\n    if (embedded) {\n      for (const embeddedLang of embedded)\n        this._langGraph.set(embeddedLang, this._langMap.get(embeddedLang));\n    }\n  }\n}\n\nclass Resolver {\n  _langs = /* @__PURE__ */ new Map();\n  _scopeToLang = /* @__PURE__ */ new Map();\n  _injections = /* @__PURE__ */ new Map();\n  _onigLib;\n  constructor(engine, langs) {\n    this._onigLib = {\n      createOnigScanner: (patterns) => engine.createScanner(patterns),\n      createOnigString: (s) => engine.createString(s)\n    };\n    langs.forEach((i) => this.addLanguage(i));\n  }\n  get onigLib() {\n    return this._onigLib;\n  }\n  getLangRegistration(langIdOrAlias) {\n    return this._langs.get(langIdOrAlias);\n  }\n  loadGrammar(scopeName) {\n    return this._scopeToLang.get(scopeName);\n  }\n  addLanguage(l) {\n    this._langs.set(l.name, l);\n    if (l.aliases) {\n      l.aliases.forEach((a) => {\n        this._langs.set(a, l);\n      });\n    }\n    this._scopeToLang.set(l.scopeName, l);\n    if (l.injectTo) {\n      l.injectTo.forEach((i) => {\n        if (!this._injections.get(i))\n          this._injections.set(i, []);\n        this._injections.get(i).push(l.scopeName);\n      });\n    }\n  }\n  getInjections(scopeName) {\n    const scopeParts = scopeName.split(\".\");\n    let injections = [];\n    for (let i = 1; i <= scopeParts.length; i++) {\n      const subScopeName = scopeParts.slice(0, i).join(\".\");\n      injections = [...injections, ...this._injections.get(subScopeName) || []];\n    }\n    return injections;\n  }\n}\n\nlet instancesCount = 0;\nfunction createShikiInternalSync(options) {\n  instancesCount += 1;\n  if (options.warnings !== false && instancesCount >= 10 && instancesCount % 10 === 0)\n    console.warn(`[Shiki] ${instancesCount} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \\`highlighter.dispose()\\` to release unused instances.`);\n  let isDisposed = false;\n  if (!options.engine)\n    throw new ShikiError(\"`engine` option is required for synchronous mode\");\n  const langs = (options.langs || []).flat(1);\n  const themes = (options.themes || []).flat(1).map(normalizeTheme);\n  const resolver = new Resolver(options.engine, langs);\n  const _registry = new Registry(resolver, themes, langs, options.langAlias);\n  let _lastTheme;\n  function resolveLangAlias$1(name) {\n    return resolveLangAlias(name, options.langAlias);\n  }\n  function getLanguage(name) {\n    ensureNotDisposed();\n    const _lang = _registry.getGrammar(typeof name === \"string\" ? name : name.name);\n    if (!_lang)\n      throw new ShikiError(`Language \\`${name}\\` not found, you may need to load it first`);\n    return _lang;\n  }\n  function getTheme(name) {\n    if (name === \"none\")\n      return { bg: \"\", fg: \"\", name: \"none\", settings: [], type: \"dark\" };\n    ensureNotDisposed();\n    const _theme = _registry.getTheme(name);\n    if (!_theme)\n      throw new ShikiError(`Theme \\`${name}\\` not found, you may need to load it first`);\n    return _theme;\n  }\n  function setTheme(name) {\n    ensureNotDisposed();\n    const theme = getTheme(name);\n    if (_lastTheme !== name) {\n      _registry.setTheme(theme);\n      _lastTheme = name;\n    }\n    const colorMap = _registry.getColorMap();\n    return {\n      theme,\n      colorMap\n    };\n  }\n  function getLoadedThemes() {\n    ensureNotDisposed();\n    return _registry.getLoadedThemes();\n  }\n  function getLoadedLanguages() {\n    ensureNotDisposed();\n    return _registry.getLoadedLanguages();\n  }\n  function loadLanguageSync(...langs2) {\n    ensureNotDisposed();\n    _registry.loadLanguages(langs2.flat(1));\n  }\n  async function loadLanguage(...langs2) {\n    return loadLanguageSync(await resolveLangs(langs2));\n  }\n  function loadThemeSync(...themes2) {\n    ensureNotDisposed();\n    for (const theme of themes2.flat(1)) {\n      _registry.loadTheme(theme);\n    }\n  }\n  async function loadTheme(...themes2) {\n    ensureNotDisposed();\n    return loadThemeSync(await resolveThemes(themes2));\n  }\n  function ensureNotDisposed() {\n    if (isDisposed)\n      throw new ShikiError(\"Shiki instance has been disposed\");\n  }\n  function dispose() {\n    if (isDisposed)\n      return;\n    isDisposed = true;\n    _registry.dispose();\n    instancesCount -= 1;\n  }\n  return {\n    setTheme,\n    getTheme,\n    getLanguage,\n    getLoadedThemes,\n    getLoadedLanguages,\n    resolveLangAlias: resolveLangAlias$1,\n    loadLanguage,\n    loadLanguageSync,\n    loadTheme,\n    loadThemeSync,\n    dispose,\n    [Symbol.dispose]: dispose\n  };\n}\n\nasync function createShikiInternal(options) {\n  if (!options.engine) {\n    warnDeprecated(\"`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.\");\n  }\n  const [\n    themes,\n    langs,\n    engine\n  ] = await Promise.all([\n    resolveThemes(options.themes || []),\n    resolveLangs(options.langs || []),\n    options.engine\n  ]);\n  return createShikiInternalSync({\n    ...options,\n    themes,\n    langs,\n    engine\n  });\n}\n\nasync function createHighlighterCore(options) {\n  const internal = await createShikiInternal(options);\n  return {\n    getLastGrammarState: (...args) => getLastGrammarState(internal, ...args),\n    codeToTokensBase: (code, options2) => codeToTokensBase(internal, code, options2),\n    codeToTokensWithThemes: (code, options2) => codeToTokensWithThemes(internal, code, options2),\n    codeToTokens: (code, options2) => codeToTokens(internal, code, options2),\n    codeToHast: (code, options2) => codeToHast(internal, code, options2),\n    codeToHtml: (code, options2) => codeToHtml(internal, code, options2),\n    getBundledLanguages: () => ({}),\n    getBundledThemes: () => ({}),\n    ...internal,\n    getInternalContext: () => internal\n  };\n}\nfunction createHighlighterCoreSync(options) {\n  const internal = createShikiInternalSync(options);\n  return {\n    getLastGrammarState: (...args) => getLastGrammarState(internal, ...args),\n    codeToTokensBase: (code, options2) => codeToTokensBase(internal, code, options2),\n    codeToTokensWithThemes: (code, options2) => codeToTokensWithThemes(internal, code, options2),\n    codeToTokens: (code, options2) => codeToTokens(internal, code, options2),\n    codeToHast: (code, options2) => codeToHast(internal, code, options2),\n    codeToHtml: (code, options2) => codeToHtml(internal, code, options2),\n    getBundledLanguages: () => ({}),\n    getBundledThemes: () => ({}),\n    ...internal,\n    getInternalContext: () => internal\n  };\n}\nfunction makeSingletonHighlighterCore(createHighlighter) {\n  let _shiki;\n  async function getSingletonHighlighterCore2(options) {\n    if (!_shiki) {\n      _shiki = createHighlighter({\n        ...options,\n        themes: options.themes || [],\n        langs: options.langs || []\n      });\n      return _shiki;\n    } else {\n      const s = await _shiki;\n      await Promise.all([\n        s.loadTheme(...options.themes || []),\n        s.loadLanguage(...options.langs || [])\n      ]);\n      return s;\n    }\n  }\n  return getSingletonHighlighterCore2;\n}\nconst getSingletonHighlighterCore = /* @__PURE__ */ makeSingletonHighlighterCore(createHighlighterCore);\n\nfunction createBundledHighlighter(options) {\n  const bundledLanguages = options.langs;\n  const bundledThemes = options.themes;\n  const engine = options.engine;\n  async function createHighlighter(options2) {\n    function resolveLang(lang) {\n      if (typeof lang === \"string\") {\n        lang = options2.langAlias?.[lang] || lang;\n        if (isSpecialLang(lang))\n          return [];\n        const bundle = bundledLanguages[lang];\n        if (!bundle)\n          throw new ShikiError$1(`Language \\`${lang}\\` is not included in this bundle. You may want to load it from external source.`);\n        return bundle;\n      }\n      return lang;\n    }\n    function resolveTheme(theme) {\n      if (isSpecialTheme(theme))\n        return \"none\";\n      if (typeof theme === \"string\") {\n        const bundle = bundledThemes[theme];\n        if (!bundle)\n          throw new ShikiError$1(`Theme \\`${theme}\\` is not included in this bundle. You may want to load it from external source.`);\n        return bundle;\n      }\n      return theme;\n    }\n    const _themes = (options2.themes ?? []).map((i) => resolveTheme(i));\n    const langs = (options2.langs ?? []).map((i) => resolveLang(i));\n    const core = await createHighlighterCore({\n      engine: options2.engine ?? engine(),\n      ...options2,\n      themes: _themes,\n      langs\n    });\n    return {\n      ...core,\n      loadLanguage(...langs2) {\n        return core.loadLanguage(...langs2.map(resolveLang));\n      },\n      loadTheme(...themes) {\n        return core.loadTheme(...themes.map(resolveTheme));\n      },\n      getBundledLanguages() {\n        return bundledLanguages;\n      },\n      getBundledThemes() {\n        return bundledThemes;\n      }\n    };\n  }\n  return createHighlighter;\n}\nfunction makeSingletonHighlighter(createHighlighter) {\n  let _shiki;\n  async function getSingletonHighlighter(options = {}) {\n    if (!_shiki) {\n      _shiki = createHighlighter({\n        ...options,\n        themes: [],\n        langs: []\n      });\n      const s = await _shiki;\n      await Promise.all([\n        s.loadTheme(...options.themes || []),\n        s.loadLanguage(...options.langs || [])\n      ]);\n      return s;\n    } else {\n      const s = await _shiki;\n      await Promise.all([\n        s.loadTheme(...options.themes || []),\n        s.loadLanguage(...options.langs || [])\n      ]);\n      return s;\n    }\n  }\n  return getSingletonHighlighter;\n}\nfunction createSingletonShorthands(createHighlighter, config) {\n  const getSingletonHighlighter = makeSingletonHighlighter(createHighlighter);\n  async function get(code, options) {\n    const shiki = await getSingletonHighlighter({\n      langs: [options.lang],\n      themes: \"theme\" in options ? [options.theme] : Object.values(options.themes)\n    });\n    const langs = await config?.guessEmbeddedLanguages?.(code, options.lang, shiki);\n    if (langs) {\n      await shiki.loadLanguage(...langs);\n    }\n    return shiki;\n  }\n  return {\n    getSingletonHighlighter(options) {\n      return getSingletonHighlighter(options);\n    },\n    async codeToHtml(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToHtml(code, options);\n    },\n    async codeToHast(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToHast(code, options);\n    },\n    async codeToTokens(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToTokens(code, options);\n    },\n    async codeToTokensBase(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToTokensBase(code, options);\n    },\n    async codeToTokensWithThemes(code, options) {\n      const shiki = await get(code, options);\n      return shiki.codeToTokensWithThemes(code, options);\n    },\n    async getLastGrammarState(code, options) {\n      const shiki = await getSingletonHighlighter({\n        langs: [options.lang],\n        themes: [options.theme]\n      });\n      return shiki.getLastGrammarState(code, options);\n    }\n  };\n}\nconst createdBundledHighlighter = createBundledHighlighter;\n\nfunction createCssVariablesTheme(options = {}) {\n  const {\n    name = \"css-variables\",\n    variablePrefix = \"--shiki-\",\n    fontStyle = true\n  } = options;\n  const variable = (name2) => {\n    if (options.variableDefaults?.[name2])\n      return `var(${variablePrefix}${name2}, ${options.variableDefaults[name2]})`;\n    return `var(${variablePrefix}${name2})`;\n  };\n  const theme = {\n    name,\n    type: \"dark\",\n    colors: {\n      \"editor.foreground\": variable(\"foreground\"),\n      \"editor.background\": variable(\"background\"),\n      \"terminal.ansiBlack\": variable(\"ansi-black\"),\n      \"terminal.ansiRed\": variable(\"ansi-red\"),\n      \"terminal.ansiGreen\": variable(\"ansi-green\"),\n      \"terminal.ansiYellow\": variable(\"ansi-yellow\"),\n      \"terminal.ansiBlue\": variable(\"ansi-blue\"),\n      \"terminal.ansiMagenta\": variable(\"ansi-magenta\"),\n      \"terminal.ansiCyan\": variable(\"ansi-cyan\"),\n      \"terminal.ansiWhite\": variable(\"ansi-white\"),\n      \"terminal.ansiBrightBlack\": variable(\"ansi-bright-black\"),\n      \"terminal.ansiBrightRed\": variable(\"ansi-bright-red\"),\n      \"terminal.ansiBrightGreen\": variable(\"ansi-bright-green\"),\n      \"terminal.ansiBrightYellow\": variable(\"ansi-bright-yellow\"),\n      \"terminal.ansiBrightBlue\": variable(\"ansi-bright-blue\"),\n      \"terminal.ansiBrightMagenta\": variable(\"ansi-bright-magenta\"),\n      \"terminal.ansiBrightCyan\": variable(\"ansi-bright-cyan\"),\n      \"terminal.ansiBrightWhite\": variable(\"ansi-bright-white\")\n    },\n    tokenColors: [\n      {\n        scope: [\n          \"keyword.operator.accessor\",\n          \"meta.group.braces.round.function.arguments\",\n          \"meta.template.expression\",\n          \"markup.fenced_code meta.embedded.block\"\n        ],\n        settings: {\n          foreground: variable(\"foreground\")\n        }\n      },\n      {\n        scope: \"emphasis\",\n        settings: {\n          fontStyle: \"italic\"\n        }\n      },\n      {\n        scope: [\"strong\", \"markup.heading.markdown\", \"markup.bold.markdown\"],\n        settings: {\n          fontStyle: \"bold\"\n        }\n      },\n      {\n        scope: [\"markup.italic.markdown\"],\n        settings: {\n          fontStyle: \"italic\"\n        }\n      },\n      {\n        scope: \"meta.link.inline.markdown\",\n        settings: {\n          fontStyle: \"underline\",\n          foreground: variable(\"token-link\")\n        }\n      },\n      {\n        scope: [\"string\", \"markup.fenced_code\", \"markup.inline\"],\n        settings: {\n          foreground: variable(\"token-string\")\n        }\n      },\n      {\n        scope: [\"comment\", \"string.quoted.docstring.multi\"],\n        settings: {\n          foreground: variable(\"token-comment\")\n        }\n      },\n      {\n        scope: [\n          \"constant.numeric\",\n          \"constant.language\",\n          \"constant.other.placeholder\",\n          \"constant.character.format.placeholder\",\n          \"variable.language.this\",\n          \"variable.other.object\",\n          \"variable.other.class\",\n          \"variable.other.constant\",\n          \"meta.property-name\",\n          \"meta.property-value\",\n          \"support\"\n        ],\n        settings: {\n          foreground: variable(\"token-constant\")\n        }\n      },\n      {\n        scope: [\n          \"keyword\",\n          \"storage.modifier\",\n          \"storage.type\",\n          \"storage.control.clojure\",\n          \"entity.name.function.clojure\",\n          \"entity.name.tag.yaml\",\n          \"support.function.node\",\n          \"support.type.property-name.json\",\n          \"punctuation.separator.key-value\",\n          \"punctuation.definition.template-expression\"\n        ],\n        settings: {\n          foreground: variable(\"token-keyword\")\n        }\n      },\n      {\n        scope: \"variable.parameter.function\",\n        settings: {\n          foreground: variable(\"token-parameter\")\n        }\n      },\n      {\n        scope: [\n          \"support.function\",\n          \"entity.name.type\",\n          \"entity.other.inherited-class\",\n          \"meta.function-call\",\n          \"meta.instance.constructor\",\n          \"entity.other.attribute-name\",\n          \"entity.name.function\",\n          \"constant.keyword.clojure\"\n        ],\n        settings: {\n          foreground: variable(\"token-function\")\n        }\n      },\n      {\n        scope: [\n          \"entity.name.tag\",\n          \"string.quoted\",\n          \"string.regexp\",\n          \"string.interpolated\",\n          \"string.template\",\n          \"string.unquoted.plain.out.yaml\",\n          \"keyword.other.template\"\n        ],\n        settings: {\n          foreground: variable(\"token-string-expression\")\n        }\n      },\n      {\n        scope: [\n          \"punctuation.definition.arguments\",\n          \"punctuation.definition.dict\",\n          \"punctuation.separator\",\n          \"meta.function-call.arguments\"\n        ],\n        settings: {\n          foreground: variable(\"token-punctuation\")\n        }\n      },\n      {\n        // [Custom] Markdown links\n        scope: [\n          \"markup.underline.link\",\n          \"punctuation.definition.metadata.markdown\"\n        ],\n        settings: {\n          foreground: variable(\"token-link\")\n        }\n      },\n      {\n        // [Custom] Markdown list\n        scope: [\"beginning.punctuation.definition.list.markdown\"],\n        settings: {\n          foreground: variable(\"token-string\")\n        }\n      },\n      {\n        // [Custom] Markdown punctuation definition brackets\n        scope: [\n          \"punctuation.definition.string.begin.markdown\",\n          \"punctuation.definition.string.end.markdown\",\n          \"string.other.link.title.markdown\",\n          \"string.other.link.description.markdown\"\n        ],\n        settings: {\n          foreground: variable(\"token-keyword\")\n        }\n      },\n      {\n        // [Custom] Diff\n        scope: [\n          \"markup.inserted\",\n          \"meta.diff.header.to-file\",\n          \"punctuation.definition.inserted\"\n        ],\n        settings: {\n          foreground: variable(\"token-inserted\")\n        }\n      },\n      {\n        scope: [\n          \"markup.deleted\",\n          \"meta.diff.header.from-file\",\n          \"punctuation.definition.deleted\"\n        ],\n        settings: {\n          foreground: variable(\"token-deleted\")\n        }\n      },\n      {\n        scope: [\n          \"markup.changed\",\n          \"punctuation.definition.changed\"\n        ],\n        settings: {\n          foreground: variable(\"token-changed\")\n        }\n      }\n    ]\n  };\n  if (!fontStyle) {\n    theme.tokenColors = theme.tokenColors?.map((tokenColor) => {\n      if (tokenColor.settings?.fontStyle)\n        delete tokenColor.settings.fontStyle;\n      return tokenColor;\n    });\n  }\n  return theme;\n}\n\nexport { addClassToHast, applyColorReplacements, codeToHast, codeToHtml, codeToTokens, codeToTokensBase, codeToTokensWithThemes, createBundledHighlighter, createCssVariablesTheme, createHighlighterCore, createHighlighterCoreSync, createPositionConverter, createShikiInternal, createShikiInternalSync, createSingletonShorthands, createdBundledHighlighter, enableDeprecationWarnings, flatTokenVariants, getSingletonHighlighterCore, getTokenStyleObject, guessEmbeddedLanguages, hastToHtml, isNoneTheme, isPlainLang, isSpecialLang, isSpecialTheme, makeSingletonHighlighter, makeSingletonHighlighterCore, normalizeGetter, normalizeTheme, resolveColorReplacements, splitLines, splitToken, splitTokens, stringifyTokenStyle, toArray, tokenizeAnsiWithTheme, tokenizeWithTheme, tokensToHast, transformerDecorations, warnDeprecated };\n","const bundledThemesInfo = [\n  {\n    \"id\": \"andromeeda\",\n    \"displayName\": \"Andromeeda\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/andromeeda'))\n  },\n  {\n    \"id\": \"aurora-x\",\n    \"displayName\": \"Aurora X\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/aurora-x'))\n  },\n  {\n    \"id\": \"ayu-dark\",\n    \"displayName\": \"Ayu Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/ayu-dark'))\n  },\n  {\n    \"id\": \"ayu-light\",\n    \"displayName\": \"Ayu Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/ayu-light'))\n  },\n  {\n    \"id\": \"ayu-mirage\",\n    \"displayName\": \"Ayu Mirage\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/ayu-mirage'))\n  },\n  {\n    \"id\": \"catppuccin-frappe\",\n    \"displayName\": \"Catppuccin Frapp\\xE9\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-frappe'))\n  },\n  {\n    \"id\": \"catppuccin-latte\",\n    \"displayName\": \"Catppuccin Latte\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-latte'))\n  },\n  {\n    \"id\": \"catppuccin-macchiato\",\n    \"displayName\": \"Catppuccin Macchiato\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-macchiato'))\n  },\n  {\n    \"id\": \"catppuccin-mocha\",\n    \"displayName\": \"Catppuccin Mocha\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/catppuccin-mocha'))\n  },\n  {\n    \"id\": \"dark-plus\",\n    \"displayName\": \"Dark Plus\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/dark-plus'))\n  },\n  {\n    \"id\": \"dracula\",\n    \"displayName\": \"Dracula Theme\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/dracula'))\n  },\n  {\n    \"id\": \"dracula-soft\",\n    \"displayName\": \"Dracula Theme Soft\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/dracula-soft'))\n  },\n  {\n    \"id\": \"everforest-dark\",\n    \"displayName\": \"Everforest Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/everforest-dark'))\n  },\n  {\n    \"id\": \"everforest-light\",\n    \"displayName\": \"Everforest Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/everforest-light'))\n  },\n  {\n    \"id\": \"github-dark\",\n    \"displayName\": \"GitHub Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark'))\n  },\n  {\n    \"id\": \"github-dark-default\",\n    \"displayName\": \"GitHub Dark Default\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark-default'))\n  },\n  {\n    \"id\": \"github-dark-dimmed\",\n    \"displayName\": \"GitHub Dark Dimmed\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark-dimmed'))\n  },\n  {\n    \"id\": \"github-dark-high-contrast\",\n    \"displayName\": \"GitHub Dark High Contrast\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/github-dark-high-contrast'))\n  },\n  {\n    \"id\": \"github-light\",\n    \"displayName\": \"GitHub Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/github-light'))\n  },\n  {\n    \"id\": \"github-light-default\",\n    \"displayName\": \"GitHub Light Default\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/github-light-default'))\n  },\n  {\n    \"id\": \"github-light-high-contrast\",\n    \"displayName\": \"GitHub Light High Contrast\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/github-light-high-contrast'))\n  },\n  {\n    \"id\": \"gruvbox-dark-hard\",\n    \"displayName\": \"Gruvbox Dark Hard\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-dark-hard'))\n  },\n  {\n    \"id\": \"gruvbox-dark-medium\",\n    \"displayName\": \"Gruvbox Dark Medium\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-dark-medium'))\n  },\n  {\n    \"id\": \"gruvbox-dark-soft\",\n    \"displayName\": \"Gruvbox Dark Soft\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-dark-soft'))\n  },\n  {\n    \"id\": \"gruvbox-light-hard\",\n    \"displayName\": \"Gruvbox Light Hard\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-light-hard'))\n  },\n  {\n    \"id\": \"gruvbox-light-medium\",\n    \"displayName\": \"Gruvbox Light Medium\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-light-medium'))\n  },\n  {\n    \"id\": \"gruvbox-light-soft\",\n    \"displayName\": \"Gruvbox Light Soft\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/gruvbox-light-soft'))\n  },\n  {\n    \"id\": \"horizon\",\n    \"displayName\": \"Horizon\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/horizon'))\n  },\n  {\n    \"id\": \"houston\",\n    \"displayName\": \"Houston\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/houston'))\n  },\n  {\n    \"id\": \"kanagawa-dragon\",\n    \"displayName\": \"Kanagawa Dragon\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/kanagawa-dragon'))\n  },\n  {\n    \"id\": \"kanagawa-lotus\",\n    \"displayName\": \"Kanagawa Lotus\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/kanagawa-lotus'))\n  },\n  {\n    \"id\": \"kanagawa-wave\",\n    \"displayName\": \"Kanagawa Wave\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/kanagawa-wave'))\n  },\n  {\n    \"id\": \"laserwave\",\n    \"displayName\": \"LaserWave\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/laserwave'))\n  },\n  {\n    \"id\": \"light-plus\",\n    \"displayName\": \"Light Plus\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/light-plus'))\n  },\n  {\n    \"id\": \"material-theme\",\n    \"displayName\": \"Material Theme\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme'))\n  },\n  {\n    \"id\": \"material-theme-darker\",\n    \"displayName\": \"Material Theme Darker\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme-darker'))\n  },\n  {\n    \"id\": \"material-theme-lighter\",\n    \"displayName\": \"Material Theme Lighter\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/material-theme-lighter'))\n  },\n  {\n    \"id\": \"material-theme-ocean\",\n    \"displayName\": \"Material Theme Ocean\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme-ocean'))\n  },\n  {\n    \"id\": \"material-theme-palenight\",\n    \"displayName\": \"Material Theme Palenight\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/material-theme-palenight'))\n  },\n  {\n    \"id\": \"min-dark\",\n    \"displayName\": \"Min Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/min-dark'))\n  },\n  {\n    \"id\": \"min-light\",\n    \"displayName\": \"Min Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/min-light'))\n  },\n  {\n    \"id\": \"monokai\",\n    \"displayName\": \"Monokai\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/monokai'))\n  },\n  {\n    \"id\": \"night-owl\",\n    \"displayName\": \"Night Owl\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/night-owl'))\n  },\n  {\n    \"id\": \"night-owl-light\",\n    \"displayName\": \"Night Owl Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/night-owl-light'))\n  },\n  {\n    \"id\": \"nord\",\n    \"displayName\": \"Nord\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/nord'))\n  },\n  {\n    \"id\": \"one-dark-pro\",\n    \"displayName\": \"One Dark Pro\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/one-dark-pro'))\n  },\n  {\n    \"id\": \"one-light\",\n    \"displayName\": \"One Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/one-light'))\n  },\n  {\n    \"id\": \"plastic\",\n    \"displayName\": \"Plastic\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/plastic'))\n  },\n  {\n    \"id\": \"poimandres\",\n    \"displayName\": \"Poimandres\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/poimandres'))\n  },\n  {\n    \"id\": \"red\",\n    \"displayName\": \"Red\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/red'))\n  },\n  {\n    \"id\": \"rose-pine\",\n    \"displayName\": \"Ros\\xE9 Pine\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/rose-pine'))\n  },\n  {\n    \"id\": \"rose-pine-dawn\",\n    \"displayName\": \"Ros\\xE9 Pine Dawn\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/rose-pine-dawn'))\n  },\n  {\n    \"id\": \"rose-pine-moon\",\n    \"displayName\": \"Ros\\xE9 Pine Moon\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/rose-pine-moon'))\n  },\n  {\n    \"id\": \"slack-dark\",\n    \"displayName\": \"Slack Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/slack-dark'))\n  },\n  {\n    \"id\": \"slack-ochin\",\n    \"displayName\": \"Slack Ochin\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/slack-ochin'))\n  },\n  {\n    \"id\": \"snazzy-light\",\n    \"displayName\": \"Snazzy Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/snazzy-light'))\n  },\n  {\n    \"id\": \"solarized-dark\",\n    \"displayName\": \"Solarized Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/solarized-dark'))\n  },\n  {\n    \"id\": \"solarized-light\",\n    \"displayName\": \"Solarized Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/solarized-light'))\n  },\n  {\n    \"id\": \"synthwave-84\",\n    \"displayName\": \"Synthwave '84\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/synthwave-84'))\n  },\n  {\n    \"id\": \"tokyo-night\",\n    \"displayName\": \"Tokyo Night\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/tokyo-night'))\n  },\n  {\n    \"id\": \"vesper\",\n    \"displayName\": \"Vesper\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/vesper'))\n  },\n  {\n    \"id\": \"vitesse-black\",\n    \"displayName\": \"Vitesse Black\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/vitesse-black'))\n  },\n  {\n    \"id\": \"vitesse-dark\",\n    \"displayName\": \"Vitesse Dark\",\n    \"type\": \"dark\",\n    \"import\": (() => import('@shikijs/themes/vitesse-dark'))\n  },\n  {\n    \"id\": \"vitesse-light\",\n    \"displayName\": \"Vitesse Light\",\n    \"type\": \"light\",\n    \"import\": (() => import('@shikijs/themes/vitesse-light'))\n  }\n];\nconst bundledThemes = Object.fromEntries(bundledThemesInfo.map((i) => [i.id, i.import]));\n\nexport { bundledThemes, bundledThemesInfo };\n","class ShikiError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"ShikiError\";\n  }\n}\n\nfunction getHeapMax() {\n  return 2147483648;\n}\nfunction _emscripten_get_now() {\n  return typeof performance !== \"undefined\" ? performance.now() : Date.now();\n}\nconst alignUp = (x, multiple) => x + (multiple - x % multiple) % multiple;\nasync function main(init) {\n  let wasmMemory;\n  let buffer;\n  const binding = {};\n  function updateGlobalBufferAndViews(buf) {\n    buffer = buf;\n    binding.HEAPU8 = new Uint8Array(buf);\n    binding.HEAPU32 = new Uint32Array(buf);\n  }\n  function _emscripten_memcpy_big(dest, src, num) {\n    binding.HEAPU8.copyWithin(dest, src, src + num);\n  }\n  function emscripten_realloc_buffer(size) {\n    try {\n      wasmMemory.grow(size - buffer.byteLength + 65535 >>> 16);\n      updateGlobalBufferAndViews(wasmMemory.buffer);\n      return 1;\n    } catch {\n    }\n  }\n  function _emscripten_resize_heap(requestedSize) {\n    const oldSize = binding.HEAPU8.length;\n    requestedSize = requestedSize >>> 0;\n    const maxHeapSize = getHeapMax();\n    if (requestedSize > maxHeapSize)\n      return false;\n    for (let cutDown = 1; cutDown <= 4; cutDown *= 2) {\n      let overGrownHeapSize = oldSize * (1 + 0.2 / cutDown);\n      overGrownHeapSize = Math.min(overGrownHeapSize, requestedSize + 100663296);\n      const newSize = Math.min(maxHeapSize, alignUp(Math.max(requestedSize, overGrownHeapSize), 65536));\n      const replacement = emscripten_realloc_buffer(newSize);\n      if (replacement)\n        return true;\n    }\n    return false;\n  }\n  const UTF8Decoder = typeof TextDecoder != \"undefined\" ? new TextDecoder(\"utf8\") : void 0;\n  function UTF8ArrayToString(heapOrArray, idx, maxBytesToRead = 1024) {\n    const endIdx = idx + maxBytesToRead;\n    let endPtr = idx;\n    while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n    if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n      return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n    }\n    let str = \"\";\n    while (idx < endPtr) {\n      let u0 = heapOrArray[idx++];\n      if (!(u0 & 128)) {\n        str += String.fromCharCode(u0);\n        continue;\n      }\n      const u1 = heapOrArray[idx++] & 63;\n      if ((u0 & 224) === 192) {\n        str += String.fromCharCode((u0 & 31) << 6 | u1);\n        continue;\n      }\n      const u2 = heapOrArray[idx++] & 63;\n      if ((u0 & 240) === 224) {\n        u0 = (u0 & 15) << 12 | u1 << 6 | u2;\n      } else {\n        u0 = (u0 & 7) << 18 | u1 << 12 | u2 << 6 | heapOrArray[idx++] & 63;\n      }\n      if (u0 < 65536) {\n        str += String.fromCharCode(u0);\n      } else {\n        const ch = u0 - 65536;\n        str += String.fromCharCode(55296 | ch >> 10, 56320 | ch & 1023);\n      }\n    }\n    return str;\n  }\n  function UTF8ToString(ptr, maxBytesToRead) {\n    return ptr ? UTF8ArrayToString(binding.HEAPU8, ptr, maxBytesToRead) : \"\";\n  }\n  const asmLibraryArg = {\n    emscripten_get_now: _emscripten_get_now,\n    emscripten_memcpy_big: _emscripten_memcpy_big,\n    emscripten_resize_heap: _emscripten_resize_heap,\n    fd_write: () => 0\n  };\n  async function createWasm() {\n    const info = {\n      env: asmLibraryArg,\n      wasi_snapshot_preview1: asmLibraryArg\n    };\n    const exports$1 = await init(info);\n    wasmMemory = exports$1.memory;\n    updateGlobalBufferAndViews(wasmMemory.buffer);\n    Object.assign(binding, exports$1);\n    binding.UTF8ToString = UTF8ToString;\n  }\n  await createWasm();\n  return binding;\n}\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nlet onigBinding = null;\nfunction throwLastOnigError(onigBinding2) {\n  throw new ShikiError(onigBinding2.UTF8ToString(onigBinding2.getLastOnigError()));\n}\nclass UtfString {\n  constructor(str) {\n    __publicField(this, \"utf16Length\");\n    __publicField(this, \"utf8Length\");\n    __publicField(this, \"utf16Value\");\n    __publicField(this, \"utf8Value\");\n    __publicField(this, \"utf16OffsetToUtf8\");\n    __publicField(this, \"utf8OffsetToUtf16\");\n    const utf16Length = str.length;\n    const utf8Length = UtfString._utf8ByteLength(str);\n    const computeIndicesMapping = utf8Length !== utf16Length;\n    const utf16OffsetToUtf8 = computeIndicesMapping ? new Uint32Array(utf16Length + 1) : null;\n    if (computeIndicesMapping)\n      utf16OffsetToUtf8[utf16Length] = utf8Length;\n    const utf8OffsetToUtf16 = computeIndicesMapping ? new Uint32Array(utf8Length + 1) : null;\n    if (computeIndicesMapping)\n      utf8OffsetToUtf16[utf8Length] = utf16Length;\n    const utf8Value = new Uint8Array(utf8Length);\n    let i8 = 0;\n    for (let i16 = 0; i16 < utf16Length; i16++) {\n      const charCode = str.charCodeAt(i16);\n      let codePoint = charCode;\n      let wasSurrogatePair = false;\n      if (charCode >= 55296 && charCode <= 56319) {\n        if (i16 + 1 < utf16Length) {\n          const nextCharCode = str.charCodeAt(i16 + 1);\n          if (nextCharCode >= 56320 && nextCharCode <= 57343) {\n            codePoint = (charCode - 55296 << 10) + 65536 | nextCharCode - 56320;\n            wasSurrogatePair = true;\n          }\n        }\n      }\n      if (computeIndicesMapping) {\n        utf16OffsetToUtf8[i16] = i8;\n        if (wasSurrogatePair)\n          utf16OffsetToUtf8[i16 + 1] = i8;\n        if (codePoint <= 127) {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n        } else if (codePoint <= 2047) {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n          utf8OffsetToUtf16[i8 + 1] = i16;\n        } else if (codePoint <= 65535) {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n          utf8OffsetToUtf16[i8 + 1] = i16;\n          utf8OffsetToUtf16[i8 + 2] = i16;\n        } else {\n          utf8OffsetToUtf16[i8 + 0] = i16;\n          utf8OffsetToUtf16[i8 + 1] = i16;\n          utf8OffsetToUtf16[i8 + 2] = i16;\n          utf8OffsetToUtf16[i8 + 3] = i16;\n        }\n      }\n      if (codePoint <= 127) {\n        utf8Value[i8++] = codePoint;\n      } else if (codePoint <= 2047) {\n        utf8Value[i8++] = 192 | (codePoint & 1984) >>> 6;\n        utf8Value[i8++] = 128 | (codePoint & 63) >>> 0;\n      } else if (codePoint <= 65535) {\n        utf8Value[i8++] = 224 | (codePoint & 61440) >>> 12;\n        utf8Value[i8++] = 128 | (codePoint & 4032) >>> 6;\n        utf8Value[i8++] = 128 | (codePoint & 63) >>> 0;\n      } else {\n        utf8Value[i8++] = 240 | (codePoint & 1835008) >>> 18;\n        utf8Value[i8++] = 128 | (codePoint & 258048) >>> 12;\n        utf8Value[i8++] = 128 | (codePoint & 4032) >>> 6;\n        utf8Value[i8++] = 128 | (codePoint & 63) >>> 0;\n      }\n      if (wasSurrogatePair)\n        i16++;\n    }\n    this.utf16Length = utf16Length;\n    this.utf8Length = utf8Length;\n    this.utf16Value = str;\n    this.utf8Value = utf8Value;\n    this.utf16OffsetToUtf8 = utf16OffsetToUtf8;\n    this.utf8OffsetToUtf16 = utf8OffsetToUtf16;\n  }\n  static _utf8ByteLength(str) {\n    let result = 0;\n    for (let i = 0, len = str.length; i < len; i++) {\n      const charCode = str.charCodeAt(i);\n      let codepoint = charCode;\n      let wasSurrogatePair = false;\n      if (charCode >= 55296 && charCode <= 56319) {\n        if (i + 1 < len) {\n          const nextCharCode = str.charCodeAt(i + 1);\n          if (nextCharCode >= 56320 && nextCharCode <= 57343) {\n            codepoint = (charCode - 55296 << 10) + 65536 | nextCharCode - 56320;\n            wasSurrogatePair = true;\n          }\n        }\n      }\n      if (codepoint <= 127)\n        result += 1;\n      else if (codepoint <= 2047)\n        result += 2;\n      else if (codepoint <= 65535)\n        result += 3;\n      else\n        result += 4;\n      if (wasSurrogatePair)\n        i++;\n    }\n    return result;\n  }\n  createString(onigBinding2) {\n    const result = onigBinding2.omalloc(this.utf8Length);\n    onigBinding2.HEAPU8.set(this.utf8Value, result);\n    return result;\n  }\n}\nconst _OnigString = class _OnigString {\n  constructor(str) {\n    __publicField(this, \"id\", ++_OnigString.LAST_ID);\n    __publicField(this, \"_onigBinding\");\n    __publicField(this, \"content\");\n    __publicField(this, \"utf16Length\");\n    __publicField(this, \"utf8Length\");\n    __publicField(this, \"utf16OffsetToUtf8\");\n    __publicField(this, \"utf8OffsetToUtf16\");\n    __publicField(this, \"ptr\");\n    if (!onigBinding)\n      throw new ShikiError(\"Must invoke loadWasm first.\");\n    this._onigBinding = onigBinding;\n    this.content = str;\n    const utfString = new UtfString(str);\n    this.utf16Length = utfString.utf16Length;\n    this.utf8Length = utfString.utf8Length;\n    this.utf16OffsetToUtf8 = utfString.utf16OffsetToUtf8;\n    this.utf8OffsetToUtf16 = utfString.utf8OffsetToUtf16;\n    if (this.utf8Length < 1e4 && !_OnigString._sharedPtrInUse) {\n      if (!_OnigString._sharedPtr)\n        _OnigString._sharedPtr = onigBinding.omalloc(1e4);\n      _OnigString._sharedPtrInUse = true;\n      onigBinding.HEAPU8.set(utfString.utf8Value, _OnigString._sharedPtr);\n      this.ptr = _OnigString._sharedPtr;\n    } else {\n      this.ptr = utfString.createString(onigBinding);\n    }\n  }\n  convertUtf8OffsetToUtf16(utf8Offset) {\n    if (this.utf8OffsetToUtf16) {\n      if (utf8Offset < 0)\n        return 0;\n      if (utf8Offset > this.utf8Length)\n        return this.utf16Length;\n      return this.utf8OffsetToUtf16[utf8Offset];\n    }\n    return utf8Offset;\n  }\n  convertUtf16OffsetToUtf8(utf16Offset) {\n    if (this.utf16OffsetToUtf8) {\n      if (utf16Offset < 0)\n        return 0;\n      if (utf16Offset > this.utf16Length)\n        return this.utf8Length;\n      return this.utf16OffsetToUtf8[utf16Offset];\n    }\n    return utf16Offset;\n  }\n  dispose() {\n    if (this.ptr === _OnigString._sharedPtr)\n      _OnigString._sharedPtrInUse = false;\n    else\n      this._onigBinding.ofree(this.ptr);\n  }\n};\n__publicField(_OnigString, \"LAST_ID\", 0);\n__publicField(_OnigString, \"_sharedPtr\", 0);\n// a pointer to a string of 10000 bytes\n__publicField(_OnigString, \"_sharedPtrInUse\", false);\nlet OnigString = _OnigString;\nclass OnigScanner {\n  constructor(patterns) {\n    __publicField(this, \"_onigBinding\");\n    __publicField(this, \"_ptr\");\n    if (!onigBinding)\n      throw new ShikiError(\"Must invoke loadWasm first.\");\n    const strPtrsArr = [];\n    const strLenArr = [];\n    for (let i = 0, len = patterns.length; i < len; i++) {\n      const utfString = new UtfString(patterns[i]);\n      strPtrsArr[i] = utfString.createString(onigBinding);\n      strLenArr[i] = utfString.utf8Length;\n    }\n    const strPtrsPtr = onigBinding.omalloc(4 * patterns.length);\n    onigBinding.HEAPU32.set(strPtrsArr, strPtrsPtr / 4);\n    const strLenPtr = onigBinding.omalloc(4 * patterns.length);\n    onigBinding.HEAPU32.set(strLenArr, strLenPtr / 4);\n    const scannerPtr = onigBinding.createOnigScanner(strPtrsPtr, strLenPtr, patterns.length);\n    for (let i = 0, len = patterns.length; i < len; i++)\n      onigBinding.ofree(strPtrsArr[i]);\n    onigBinding.ofree(strLenPtr);\n    onigBinding.ofree(strPtrsPtr);\n    if (scannerPtr === 0)\n      throwLastOnigError(onigBinding);\n    this._onigBinding = onigBinding;\n    this._ptr = scannerPtr;\n  }\n  dispose() {\n    this._onigBinding.freeOnigScanner(this._ptr);\n  }\n  findNextMatchSync(string, startPosition, arg) {\n    let options = 0 /* None */;\n    if (typeof arg === \"number\") {\n      options = arg;\n    }\n    if (typeof string === \"string\") {\n      string = new OnigString(string);\n      const result = this._findNextMatchSync(string, startPosition, false, options);\n      string.dispose();\n      return result;\n    }\n    return this._findNextMatchSync(string, startPosition, false, options);\n  }\n  _findNextMatchSync(string, startPosition, debugCall, options) {\n    const onigBinding2 = this._onigBinding;\n    const resultPtr = onigBinding2.findNextOnigScannerMatch(this._ptr, string.id, string.ptr, string.utf8Length, string.convertUtf16OffsetToUtf8(startPosition), options);\n    if (resultPtr === 0) {\n      return null;\n    }\n    const HEAPU32 = onigBinding2.HEAPU32;\n    let offset = resultPtr / 4;\n    const index = HEAPU32[offset++];\n    const count = HEAPU32[offset++];\n    const captureIndices = [];\n    for (let i = 0; i < count; i++) {\n      const beg = string.convertUtf8OffsetToUtf16(HEAPU32[offset++]);\n      const end = string.convertUtf8OffsetToUtf16(HEAPU32[offset++]);\n      captureIndices[i] = {\n        start: beg,\n        end,\n        length: end - beg\n      };\n    }\n    return {\n      index,\n      captureIndices\n    };\n  }\n}\nfunction isInstantiatorOptionsObject(dataOrOptions) {\n  return typeof dataOrOptions.instantiator === \"function\";\n}\nfunction isInstantiatorModule(dataOrOptions) {\n  return typeof dataOrOptions.default === \"function\";\n}\nfunction isDataOptionsObject(dataOrOptions) {\n  return typeof dataOrOptions.data !== \"undefined\";\n}\nfunction isResponse(dataOrOptions) {\n  return typeof Response !== \"undefined\" && dataOrOptions instanceof Response;\n}\nfunction isArrayBuffer(data) {\n  return typeof ArrayBuffer !== \"undefined\" && (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) || typeof Buffer !== \"undefined\" && Buffer.isBuffer?.(data) || typeof SharedArrayBuffer !== \"undefined\" && data instanceof SharedArrayBuffer || typeof Uint32Array !== \"undefined\" && data instanceof Uint32Array;\n}\nlet initPromise;\nfunction loadWasm(options) {\n  if (initPromise)\n    return initPromise;\n  async function _load() {\n    onigBinding = await main(async (info) => {\n      let instance = options;\n      instance = await instance;\n      if (typeof instance === \"function\")\n        instance = await instance(info);\n      if (typeof instance === \"function\")\n        instance = await instance(info);\n      if (isInstantiatorOptionsObject(instance)) {\n        instance = await instance.instantiator(info);\n      } else if (isInstantiatorModule(instance)) {\n        instance = await instance.default(info);\n      } else {\n        if (isDataOptionsObject(instance))\n          instance = instance.data;\n        if (isResponse(instance)) {\n          if (typeof WebAssembly.instantiateStreaming === \"function\")\n            instance = await _makeResponseStreamingLoader(instance)(info);\n          else\n            instance = await _makeResponseNonStreamingLoader(instance)(info);\n        } else if (isArrayBuffer(instance)) {\n          instance = await _makeArrayBufferLoader(instance)(info);\n        } else if (instance instanceof WebAssembly.Module) {\n          instance = await _makeArrayBufferLoader(instance)(info);\n        } else if (\"default\" in instance && instance.default instanceof WebAssembly.Module) {\n          instance = await _makeArrayBufferLoader(instance.default)(info);\n        }\n      }\n      if (\"instance\" in instance)\n        instance = instance.instance;\n      if (\"exports\" in instance)\n        instance = instance.exports;\n      return instance;\n    });\n  }\n  initPromise = _load();\n  return initPromise;\n}\nfunction _makeArrayBufferLoader(data) {\n  return (importObject) => WebAssembly.instantiate(data, importObject);\n}\nfunction _makeResponseStreamingLoader(data) {\n  return (importObject) => WebAssembly.instantiateStreaming(data, importObject);\n}\nfunction _makeResponseNonStreamingLoader(data) {\n  return async (importObject) => {\n    const arrayBuffer = await data.arrayBuffer();\n    return WebAssembly.instantiate(arrayBuffer, importObject);\n  };\n}\n\nlet _defaultWasmLoader;\nfunction setDefaultWasmLoader(_loader) {\n  _defaultWasmLoader = _loader;\n}\nfunction getDefaultWasmLoader() {\n  return _defaultWasmLoader;\n}\nasync function createOnigurumaEngine(options) {\n  if (options)\n    await loadWasm(options);\n  return {\n    createScanner(patterns) {\n      return new OnigScanner(patterns.map((p) => typeof p === \"string\" ? p : p.source));\n    },\n    createString(s) {\n      return new OnigString(s);\n    }\n  };\n}\n\nexport { createOnigurumaEngine, getDefaultWasmLoader, loadWasm, setDefaultWasmLoader };\n","import { createSingletonShorthands, guessEmbeddedLanguages, createBundledHighlighter } from '@shikijs/core';\nexport * from '@shikijs/core';\nimport { bundledThemes } from './themes.mjs';\nexport { bundledThemesInfo } from './themes.mjs';\nimport { createOnigurumaEngine } from '@shikijs/engine-oniguruma';\n\nconst bundledLanguagesInfo = [\n  {\n    \"id\": \"angular-html\",\n    \"name\": \"Angular HTML\",\n    \"import\": (() => import('@shikijs/langs/angular-html'))\n  },\n  {\n    \"id\": \"angular-ts\",\n    \"name\": \"Angular TypeScript\",\n    \"import\": (() => import('@shikijs/langs/angular-ts'))\n  },\n  {\n    \"id\": \"astro\",\n    \"name\": \"Astro\",\n    \"import\": (() => import('@shikijs/langs/astro'))\n  },\n  {\n    \"id\": \"blade\",\n    \"name\": \"Blade\",\n    \"import\": (() => import('@shikijs/langs/blade'))\n  },\n  {\n    \"id\": \"c\",\n    \"name\": \"C\",\n    \"import\": (() => import('@shikijs/langs/c'))\n  },\n  {\n    \"id\": \"coffee\",\n    \"name\": \"CoffeeScript\",\n    \"aliases\": [\n      \"coffeescript\"\n    ],\n    \"import\": (() => import('@shikijs/langs/coffee'))\n  },\n  {\n    \"id\": \"cpp\",\n    \"name\": \"C++\",\n    \"aliases\": [\n      \"c++\"\n    ],\n    \"import\": (() => import('@shikijs/langs/cpp'))\n  },\n  {\n    \"id\": \"css\",\n    \"name\": \"CSS\",\n    \"import\": (() => import('@shikijs/langs/css'))\n  },\n  {\n    \"id\": \"csv\",\n    \"name\": \"CSV\",\n    \"import\": (() => import('@shikijs/langs/csv'))\n  },\n  {\n    \"id\": \"glsl\",\n    \"name\": \"GLSL\",\n    \"import\": (() => import('@shikijs/langs/glsl'))\n  },\n  {\n    \"id\": \"graphql\",\n    \"name\": \"GraphQL\",\n    \"aliases\": [\n      \"gql\"\n    ],\n    \"import\": (() => import('@shikijs/langs/graphql'))\n  },\n  {\n    \"id\": \"haml\",\n    \"name\": \"Ruby Haml\",\n    \"import\": (() => import('@shikijs/langs/haml'))\n  },\n  {\n    \"id\": \"handlebars\",\n    \"name\": \"Handlebars\",\n    \"aliases\": [\n      \"hbs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/handlebars'))\n  },\n  {\n    \"id\": \"html\",\n    \"name\": \"HTML\",\n    \"import\": (() => import('@shikijs/langs/html'))\n  },\n  {\n    \"id\": \"html-derivative\",\n    \"name\": \"HTML (Derivative)\",\n    \"import\": (() => import('@shikijs/langs/html-derivative'))\n  },\n  {\n    \"id\": \"http\",\n    \"name\": \"HTTP\",\n    \"import\": (() => import('@shikijs/langs/http'))\n  },\n  {\n    \"id\": \"hurl\",\n    \"name\": \"Hurl\",\n    \"import\": (() => import('@shikijs/langs/hurl'))\n  },\n  {\n    \"id\": \"imba\",\n    \"name\": \"Imba\",\n    \"import\": (() => import('@shikijs/langs/imba'))\n  },\n  {\n    \"id\": \"java\",\n    \"name\": \"Java\",\n    \"import\": (() => import('@shikijs/langs/java'))\n  },\n  {\n    \"id\": \"javascript\",\n    \"name\": \"JavaScript\",\n    \"aliases\": [\n      \"js\",\n      \"cjs\",\n      \"mjs\"\n    ],\n    \"import\": (() => import('@shikijs/langs/javascript'))\n  },\n  {\n    \"id\": \"jinja\",\n    \"name\": \"Jinja\",\n    \"import\": (() => import('@shikijs/langs/jinja'))\n  },\n  {\n    \"id\": \"jison\",\n    \"name\": \"Jison\",\n    \"import\": (() => import('@shikijs/langs/jison'))\n  },\n  {\n    \"id\": \"json\",\n    \"name\": \"JSON\",\n    \"import\": (() => import('@shikijs/langs/json'))\n  },\n  {\n    \"id\": \"json5\",\n    \"name\": \"JSON5\",\n    \"import\": (() => import('@shikijs/langs/json5'))\n  },\n  {\n    \"id\": \"jsonc\",\n    \"name\": \"JSON with Comments\",\n    \"import\": (() => import('@shikijs/langs/jsonc'))\n  },\n  {\n    \"id\": \"jsonl\",\n    \"name\": \"JSON Lines\",\n    \"import\": (() => import('@shikijs/langs/jsonl'))\n  },\n  {\n    \"id\": \"jsx\",\n    \"name\": \"JSX\",\n    \"import\": (() => import('@shikijs/langs/jsx'))\n  },\n  {\n    \"id\": \"julia\",\n    \"name\": \"Julia\",\n    \"aliases\": [\n      \"jl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/julia'))\n  },\n  {\n    \"id\": \"less\",\n    \"name\": \"Less\",\n    \"import\": (() => import('@shikijs/langs/less'))\n  },\n  {\n    \"id\": \"markdown\",\n    \"name\": \"Markdown\",\n    \"aliases\": [\n      \"md\"\n    ],\n    \"import\": (() => import('@shikijs/langs/markdown'))\n  },\n  {\n    \"id\": \"marko\",\n    \"name\": \"Marko\",\n    \"import\": (() => import('@shikijs/langs/marko'))\n  },\n  {\n    \"id\": \"mdc\",\n    \"name\": \"MDC\",\n    \"import\": (() => import('@shikijs/langs/mdc'))\n  },\n  {\n    \"id\": \"mdx\",\n    \"name\": \"MDX\",\n    \"import\": (() => import('@shikijs/langs/mdx'))\n  },\n  {\n    \"id\": \"php\",\n    \"name\": \"PHP\",\n    \"import\": (() => import('@shikijs/langs/php'))\n  },\n  {\n    \"id\": \"postcss\",\n    \"name\": \"PostCSS\",\n    \"import\": (() => import('@shikijs/langs/postcss'))\n  },\n  {\n    \"id\": \"pug\",\n    \"name\": \"Pug\",\n    \"aliases\": [\n      \"jade\"\n    ],\n    \"import\": (() => import('@shikijs/langs/pug'))\n  },\n  {\n    \"id\": \"python\",\n    \"name\": \"Python\",\n    \"aliases\": [\n      \"py\"\n    ],\n    \"import\": (() => import('@shikijs/langs/python'))\n  },\n  {\n    \"id\": \"r\",\n    \"name\": \"R\",\n    \"import\": (() => import('@shikijs/langs/r'))\n  },\n  {\n    \"id\": \"regexp\",\n    \"name\": \"RegExp\",\n    \"aliases\": [\n      \"regex\"\n    ],\n    \"import\": (() => import('@shikijs/langs/regexp'))\n  },\n  {\n    \"id\": \"sass\",\n    \"name\": \"Sass\",\n    \"import\": (() => import('@shikijs/langs/sass'))\n  },\n  {\n    \"id\": \"scss\",\n    \"name\": \"SCSS\",\n    \"import\": (() => import('@shikijs/langs/scss'))\n  },\n  {\n    \"id\": \"shellscript\",\n    \"name\": \"Shell\",\n    \"aliases\": [\n      \"bash\",\n      \"sh\",\n      \"shell\",\n      \"zsh\"\n    ],\n    \"import\": (() => import('@shikijs/langs/shellscript'))\n  },\n  {\n    \"id\": \"sql\",\n    \"name\": \"SQL\",\n    \"import\": (() => import('@shikijs/langs/sql'))\n  },\n  {\n    \"id\": \"stylus\",\n    \"name\": \"Stylus\",\n    \"aliases\": [\n      \"styl\"\n    ],\n    \"import\": (() => import('@shikijs/langs/stylus'))\n  },\n  {\n    \"id\": \"svelte\",\n    \"name\": \"Svelte\",\n    \"import\": (() => import('@shikijs/langs/svelte'))\n  },\n  {\n    \"id\": \"ts-tags\",\n    \"name\": \"TypeScript with Tags\",\n    \"aliases\": [\n      \"lit\"\n    ],\n    \"import\": (() => import('@shikijs/langs/ts-tags'))\n  },\n  {\n    \"id\": \"tsx\",\n    \"name\": \"TSX\",\n    \"import\": (() => import('@shikijs/langs/tsx'))\n  },\n  {\n    \"id\": \"typescript\",\n    \"name\": \"TypeScript\",\n    \"aliases\": [\n      \"ts\",\n      \"cts\",\n      \"mts\"\n    ],\n    \"import\": (() => import('@shikijs/langs/typescript'))\n  },\n  {\n    \"id\": \"vue\",\n    \"name\": \"Vue\",\n    \"import\": (() => import('@shikijs/langs/vue'))\n  },\n  {\n    \"id\": \"vue-html\",\n    \"name\": \"Vue HTML\",\n    \"import\": (() => import('@shikijs/langs/vue-html'))\n  },\n  {\n    \"id\": \"vue-vine\",\n    \"name\": \"Vue Vine\",\n    \"import\": (() => import('@shikijs/langs/vue-vine'))\n  },\n  {\n    \"id\": \"wasm\",\n    \"name\": \"WebAssembly\",\n    \"import\": (() => import('@shikijs/langs/wasm'))\n  },\n  {\n    \"id\": \"wgsl\",\n    \"name\": \"WGSL\",\n    \"import\": (() => import('@shikijs/langs/wgsl'))\n  },\n  {\n    \"id\": \"wit\",\n    \"name\": \"WebAssembly Interface Types\",\n    \"import\": (() => import('@shikijs/langs/wit'))\n  },\n  {\n    \"id\": \"xml\",\n    \"name\": \"XML\",\n    \"import\": (() => import('@shikijs/langs/xml'))\n  },\n  {\n    \"id\": \"yaml\",\n    \"name\": \"YAML\",\n    \"aliases\": [\n      \"yml\"\n    ],\n    \"import\": (() => import('@shikijs/langs/yaml'))\n  }\n];\nconst bundledLanguagesBase = Object.fromEntries(bundledLanguagesInfo.map((i) => [i.id, i.import]));\nconst bundledLanguagesAlias = Object.fromEntries(bundledLanguagesInfo.flatMap((i) => i.aliases?.map((a) => [a, i.import]) || []));\nconst bundledLanguages = {\n  ...bundledLanguagesBase,\n  ...bundledLanguagesAlias\n};\n\nconst createHighlighter = /* @__PURE__ */ createBundledHighlighter({\n  langs: bundledLanguages,\n  themes: bundledThemes,\n  engine: () => createOnigurumaEngine(import('shiki/wasm'))\n});\nconst {\n  codeToHtml,\n  codeToHast,\n  codeToTokensBase,\n  codeToTokens,\n  codeToTokensWithThemes,\n  getSingletonHighlighter,\n  getLastGrammarState\n} = /* @__PURE__ */ createSingletonShorthands(\n  createHighlighter,\n  { guessEmbeddedLanguages }\n);\n\nexport { bundledLanguages, bundledLanguagesAlias, bundledLanguagesBase, bundledLanguagesInfo, bundledThemes, codeToHast, codeToHtml, codeToTokens, codeToTokensBase, codeToTokensWithThemes, createHighlighter, getLastGrammarState, getSingletonHighlighter };\n"],"names":["ShikiError","Error","constructor","message","super","this","name","doClone","something","Array","isArray","arr","r","i","len","length","cloneArray","RegExp","obj","key","cloneObj","mergeObjects","target","sources","forEach","source","basename","path","idx","lastIndexOf","substring","substr","CAPTURING_REGEX_SOURCE","RegexSource","hasCaptures","regexSource","lastIndex","test","replaceCaptures","captureSource","captureIndices","replace","match","index","commandIndex","command","capture","parseInt","result","start","end","toLowerCase","toUpperCase","strcmp","a","b","strArrCmp","len1","len2","res","isValidHexColor","hex","escapeRegExpCharacters","value","CachedFn","fn","cache","Map","get","has","set","Theme","_colorMap","_defaults","_root","createFromRawTheme","colorMap","createFromParsedTheme","settings","resultLen","scopes","entry","scope","_scope","split","fontStyle","segments","j","lenJ","foreground","background","trim","parentScopes","slice","reverse","ParsedThemeRule","parseTheme","parsedThemeRules","sort","defaultFontStyle","defaultForeground","defaultBackground","incomingDefaults","shift","ColorMap","defaults","StyleAttributes","getId","root","ThemeTrieElement","ThemeTrieElementRule","rule","insert","resolveParsedThemeRules","_cachedMatchRoot","scopeName","getColorMap","getDefaults","scopePath","effectiveRule","find","v","scopePattern","scopeMustMatch","_matchesScope","parent","_scopePathMatchesParentScopes","ScopeStack","_ScopeStack","push","scopeNames","from","getSegments","item","toString","join","other","extends","getExtensionIfDefined","base","startsWith","foregroundId","backgroundId","FontStyle","FontStyle2","_isFrozen","_lastColorId","_id2color","_color2id","Object","create","color","emptyParentScopes","freeze","_ThemeTrieElementRule","scopeDepth","clone","cloneArr","acceptOverwrite","console","log","_ThemeTrieElement","_mainRule","rulesWithParentScopes","_children","_rulesWithParentScopes","_cmpBySpecificity","aParentIndex","bParentIndex","parentScopeLengthDiff","head","tail","dotIndex","indexOf","hasOwnProperty","rules","concat","_doInsertHere","child","EncodedTokenMetadata","_EncodedTokenMetadata","toBinaryStr","encodedTokenAttributes","padStart","print","languageId","getLanguageId","tokenType","getTokenType","getFontStyle","getForeground","getBackground","containsBalancedBrackets","_languageId","_tokenType","_containsBalancedBracketsBit","_fontStyle","_foreground","_background","toOptionalTokenType","standardType","createMatchers","selector","matchesName","results","tokenizer","input","regex","exec","next","newTokenizer","token","priority","charAt","matcher","parseConjunction","parseOperand","expressionToNegate","matcherInput","expressionInParents","matchers","some","matcher2","parseInnerExpression","isIdentifier","identifiers","every","disposeOnigString","str","dispose","TopLevelRuleReference","toKey","TopLevelRepositoryRuleReference","ruleName","ExternalReferenceCollector","_references","_seenReferenceKeys","Set","references","visitedRule","add","reference","ScopeDependencyProcessor","repo","initialScopeName","seenFullScopeRequests","Q","seenPartialScopeRequests","processQueue","q","deps","dep","collectReferencesOfReference","baseGrammarScopeName","selfGrammar","lookup","baseGrammar","collectExternalReferencesInTopLevelRule","collectExternalReferencesInTopLevelRepositoryRule","repository","injections","injection","context","collectExternalReferencesInRules","patterns","values","patternRepository","include","parseInclude","kind","newContext","BaseReference","SelfReference","RelativeReference","TopLevelReference","TopLevelRepositoryReference","indexOfSharp","HAS_BACK_REFERENCES","BACK_REFERENCING_END","Symbol","Rule","$location","id","_nameIsCapturing","_name","_contentNameIsCapturing","_contentName","contentName","debugName","location","filename","line","getName","lineText","getContentName","CaptureRule","retokenizeCapturedWithRuleId","collectPatterns","grammar","out","compile","endRegexSource","compileAG","allowA","allowG","MatchRule","_match","captures","_cachedCompiledPatterns","RegExpSource","debugMatchRegExp","_getCachedCompiledPatterns","RegExpSourceList","IncludeOnlyRule","hasMissingPatterns","pattern","getRule","BeginEndRule","_begin","beginCaptures","_end","endHasBackReferences","endCaptures","applyEndPatternLast","begin","hasBackReferences","debugBeginRegExp","debugEndRegExp","getEndWithResolvedBackReferences","resolveBackReferences","unshift","setSource","BeginWhileRule","whileCaptures","_while","whileHasBackReferences","_cachedCompiledWhilePatterns","debugWhileRegExp","getWhileWithResolvedBackReferences","compileWhile","_getCachedCompiledWhilePatterns","compileWhileAG","RuleFactory","_RuleFactory","createCaptureRule","helper","registerRule","getCompiledRuleId","desc","$vscodeTextmateLocation","_compileCaptures","_compilePatterns","while","maximumCaptureId","captureId","numericCaptureId","ruleId","localIncludedRule","externalGrammarName","externalGrammarInclude","externalGrammar","getExternalGrammar","externalIncludedRule","$self","skipRule","_RegExpSource","hasAnchor","_anchorCache","regExpSource","lastPushedPos","output","pos","nextCh","_buildAnchorCache","newSource","capturedValues","map","g1","ch","A0_G0_result","A0_G1_result","A1_G0_result","A1_G1_result","A0_G0","A0_G1","A1_G0","A1_G1","resolveAnchors","_items","_hasAnchors","_cached","_disposeCaches","onigLib","regExps","e","CompiledRule","_resolveAnchors","scanner","createOnigScanner","findNextMatchSync","string","startPosition","options","BasicScopeAttributes","BasicScopeAttributesProvider","_BasicScopeAttributesProvider","_defaultAttributes","_embeddedLanguagesMatcher","initialLanguageId","embeddedLanguages","ScopeMatcher","entries","getDefaultAttributes","getBasicScopeAttributes","_NULL_SCOPE_METADATA","_getBasicScopeAttributes","static","_scopeToLanguage","standardTokenType","_toStandardTokenType","m","STANDARD_TOKEN_TYPE_REGEXP","scopesRegExp","escapedScopes","TokenizeStringResult","stack","stoppedEarly","_tokenizeString","isFirstLine","linePos","lineTokens","checkWhileConditions","timeLimit","lineLength","content","STOP","anchorPosition","whileCheckResult","beginRuleCapturedEOL","whileRules","node","pop","nodeRule","whileRule","ruleScanner","findOptions","prepareRuleWhileSearch","endRule","produce","handleCaptures","_checkWhileConditions","startTime","Date","now","scanNext","matchResult","prepareRuleSearch","matchedRuleId","matchRule","getInjections","injectionResult","bestMatchRuleId","bestMatchRating","Number","MAX_VALUE","bestMatchCaptureIndices","bestMatchResultPriority","contentNameScopesList","getScopeNames","matchRating","priorityMatch","matchInjections","matchResultScore","injectionResultScore","matchRuleOrInjections","hasAdvanced","poppedRule","withContentNameScopesList","nameScopesList","popped","getAnchorPos","getEnterPos","_rule","beforePush","pushAttributed","pushedRule","withEndRule","hasSameRuleAs","safePop","lineTextContent","Math","min","localStack","maxEnd","captureRule","captureIndex","endPos","produceFromScopes","stackClone","onigSubStr","createOnigString","captureRuleScopeName","captureRuleScopesList","LocalStackElement","collectInjections","ruleFactoryHelper","nameMatcher","debugSelector","identifers","identifier","scopesAreMatching","thisScopeName","Grammar","_rootScopeName","initialLanguage","tokenTypes","balancedBracketSelectors","grammarRepository","_onigLib","_basicScopeAttributesProvider","_rootId","_lastRuleId","_ruleId2desc","_includedGrammars","_grammarRepository","_grammar","initGrammar","_injections","_tokenTypeMatchers","keys","type","themeProvider","getMetadataForScope","_collectInjections","scopeName2","rawInjections","expression","injectionScopeNames","injectionScopeName","injectionGrammar","injectionSelector","i1","i2","factory","rawIncludedGrammar","$base","tokenizeLine","prevState","_tokenize","tokens","getResult","ruleStack","tokenizeLine2","getBinaryResult","emitBinaryTokens","StateStackImpl","NULL","reset","rawDefaultMetadata","defaultStyle","defaultMetadata","rootScopeName","scopeList","AttributedScopeStack","createRootAndLookUpScopeName","createRoot","onigLineText","LineTokens","_AttributedScopeStack","tokenAttributes","fromExtension","namesScopeList","current","frame","rawRootMetadata","rootStyle","themeMatch","resolvedTokenAttributes","mergeAttributes","equals","existingTokenAttributes","basicScopeAttributes","styleAttributes","_pushAttributed","rawMetadata","newPath","scopeThemeMatchResult","metadata","self","_StateStackImpl","enterPos","anchorPos","depth","_enterPos","_anchorPos","_stackElementBrand","_equals","_structuralEquals","_reset","el","_writeString","outIndex","contentNameScopeStack","toStateStackFrame","pushFrame","BalancedBracketSelectors","balancedBracketScopes","unbalancedBracketScopes","allowAny","flatMap","matchesAlways","matchesNever","excluder","includer","tokenTypeOverrides","_emitBinaryTokens","_tokenTypeOverrides","_lineText","_tokens","_binaryTokens","_lastTokenEndIndex","endIndex","scopesList","scopes2","startIndex","Uint32Array","SyncRegistry","theme","_theme","_grammars","_rawGrammars","_injectionGrammars","setTheme","addGrammar","targetScope","grammarForScopeName","rawGrammar","createGrammar","_options","_syncRegistry","_ensureGrammarCache","loadGrammarWithEmbeddedLanguages","loadGrammarWithConfiguration","configuration","_loadGrammar","unbalancedBracketSelectors","loadGrammar","dependencyProcessor","request","_loadSingleGrammar","_grammarForScopeName","_doLoadSingleGrammar","INITIAL","htmlVoidElements","Schema","property","normal","space","merge","definitions","definition","assign","normalize","prototype","undefined","Info","attribute","booleanish","boolean","commaOrSpaceSeparated","commaSeparated","defined","mustUseProperty","number","overloadedBoolean","spaceSeparated","powers","increment","checks","DefinedInfo","mask","mark","check","properties","normals","info","transform","attributes","includes","aria","ariaActiveDescendant","ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaControls","ariaCurrent","ariaDescribedBy","ariaDetails","ariaDisabled","ariaDropEffect","ariaErrorMessage","ariaExpanded","ariaFlowTo","ariaGrabbed","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLabelledBy","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaOwns","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","role","_","caseSensitiveTransform","caseInsensitiveTransform","html","acceptcharset","classname","htmlfor","httpequiv","abbr","accept","acceptCharset","accessKey","action","allow","allowFullScreen","allowPaymentRequest","allowUserMedia","alt","as","async","autoCapitalize","autoComplete","autoFocus","autoPlay","blocking","charSet","checked","cite","className","cols","colSpan","contentEditable","controls","controlsList","coords","crossOrigin","data","dateTime","decoding","default","defer","dir","dirName","disabled","download","draggable","encType","enterKeyHint","fetchPriority","form","formAction","formEncType","formMethod","formNoValidate","formTarget","headers","height","hidden","high","href","hrefLang","htmlFor","httpEquiv","imageSizes","imageSrcSet","inert","inputMode","integrity","is","isMap","itemId","itemProp","itemRef","itemScope","itemType","label","lang","language","list","loading","loop","low","manifest","max","maxLength","media","method","minLength","multiple","muted","nonce","noModule","noValidate","onAbort","onAfterPrint","onAuxClick","onBeforeMatch","onBeforePrint","onBeforeToggle","onBeforeUnload","onBlur","onCancel","onCanPlay","onCanPlayThrough","onChange","onClick","onClose","onContextLost","onContextMenu","onContextRestored","onCopy","onCueChange","onCut","onDblClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEnded","onError","onFocus","onFormData","onHashChange","onInput","onInvalid","onKeyDown","onKeyPress","onKeyUp","onLanguageChange","onLoad","onLoadedData","onLoadedMetadata","onLoadEnd","onLoadStart","onMessage","onMessageError","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onOffline","onOnline","onPageHide","onPageShow","onPaste","onPause","onPlay","onPlaying","onPopState","onProgress","onRateChange","onRejectionHandled","onReset","onResize","onScroll","onScrollEnd","onSecurityPolicyViolation","onSeeked","onSeeking","onSelect","onSlotChange","onStalled","onStorage","onSubmit","onSuspend","onTimeUpdate","onToggle","onUnhandledRejection","onUnload","onVolumeChange","onWaiting","onWheel","open","optimum","ping","placeholder","playsInline","popover","popoverTarget","popoverTargetAction","poster","preload","readOnly","referrerPolicy","rel","required","reversed","rows","rowSpan","sandbox","scoped","seamless","selected","shadowRootClonable","shadowRootDelegatesFocus","shadowRootMode","shape","size","sizes","slot","span","spellCheck","src","srcDoc","srcLang","srcSet","step","style","tabIndex","title","translate","typeMustMatch","useMap","width","wrap","writingSuggestions","align","aLink","archive","axis","bgColor","border","borderColor","bottomMargin","cellPadding","cellSpacing","char","charOff","classId","clear","code","codeBase","codeType","compact","declare","event","face","frameBorder","hSpace","leftMargin","link","longDesc","lowSrc","marginHeight","marginWidth","noResize","noHref","noShade","noWrap","object","profile","prompt","rev","rightMargin","scheme","scrolling","standby","summary","text","topMargin","valueType","version","vAlign","vLink","vSpace","allowTransparency","autoCorrect","autoSave","disablePictureInPicture","disableRemotePlayback","prefix","security","unselectable","svg","accentHeight","alignmentBaseline","arabicForm","baselineShift","capHeight","clipPath","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","dataType","dominantBaseline","enableBackground","fillOpacity","fillRule","floodColor","floodOpacity","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontVariant","fontWeight","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","horizAdvX","horizOriginX","horizOriginY","imageRendering","letterSpacing","lightingColor","markerEnd","markerMid","markerStart","navDown","navDownLeft","navDownRight","navLeft","navNext","navPrev","navRight","navUp","navUpLeft","navUpRight","onActivate","onBegin","onEnd","onFocusIn","onFocusOut","onMouseWheel","onRepeat","onShow","onZoom","overlinePosition","overlineThickness","paintOrder","panose1","pointerEvents","renderingIntent","shapeRendering","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","strokeDashArray","strokeDashOffset","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeOpacity","strokeWidth","textAnchor","textDecoration","textRendering","transformOrigin","typeOf","underlinePosition","underlineThickness","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","vectorEffect","vertAdvY","vertOriginX","vertOriginY","wordSpacing","writingMode","xHeight","playbackOrder","timelineBegin","about","accumulate","additive","alphabetic","amplitude","ascent","attributeName","attributeType","azimuth","bandwidth","baseFrequency","baseProfile","bbox","bias","by","calcMode","clip","clipPathUnits","contentScriptType","contentStyleType","cursor","cx","cy","d","defaultAction","descent","diffuseConstant","direction","display","dur","divisor","dx","dy","edgeMode","editable","elevation","exponent","externalResourcesRequired","fill","filter","filterRes","filterUnits","focusable","focusHighlight","format","fr","fx","fy","g2","glyphRef","gradientTransform","gradientUnits","handler","hanging","hatchContentUnits","hatchUnits","ideographic","initialVisibility","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","kerning","lengthAdjust","limitingConeAngle","local","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","mathematical","mediaCharacterEncoding","mediaContentEncodings","mediaSize","mediaTime","mode","numOctaves","observer","offset","opacity","operator","order","orient","orientation","origin","overflow","overlay","pathLength","patternContentUnits","patternTransform","patternUnits","phase","pitch","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","propagate","radius","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","requiredFonts","requiredFormats","resource","restart","rotate","rx","ry","scale","seed","side","slope","snapshotTime","specularConstant","specularExponent","spreadMethod","spacing","startOffset","stdDeviation","stemh","stemv","stitchTiles","stroke","surfaceScale","syncBehavior","syncBehaviorDefault","syncMaster","syncTolerance","syncToleranceDefault","systemLanguage","tableValues","targetX","targetY","textLength","transformBehavior","to","u1","u2","unicode","viewBox","viewTarget","visibility","widths","x","x1","x2","xChannelSelector","y","y1","y2","yChannelSelector","z","zoomAndPan","xlink","xLinkActuate","xLinkArcRole","xLinkHref","xLinkRole","xLinkShow","xLinkTitle","xLinkType","xmlns","xmlnsxlink","xmlnsXLink","xml","xmlBase","xmlLang","xmlSpace","own","defaultSubsetRegex","surrogatePairsRegex","controlCharactersRegex","regexEscapeRegex","subsetToRegexCache","WeakMap","subset","cached","groups","charactersToExpression","charactersToExpressionCached","basic","escapeOnly","pair","all","charCodeAt","character","hexadecimalRegex","decimalRegex","characterEntitiesLegacy","characterEntitiesHtml4","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","fnof","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","bull","hellip","prime","Prime","oline","frasl","weierp","image","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","rang","loz","spades","clubs","hearts","diams","quot","amp","lt","gt","OElig","oelig","Scaron","scaron","Yuml","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","permil","lsaquo","rsaquo","euro","dangerous","characters","call","notAlphanumericRegex","formatSmart","named","numeric","omit","String","fromCharCode","toHexadecimal","omitOptionalSemicolons","useNamedReferences","useShortestReferences","toNamed","decimal","toDecimal","stringifyEntities","htmlCommentRegex","bogusCommentEntitySubset","commentEntitySubset","ccount","TypeError","count","stringify","padRight","padLeft","dash","valid","kebab","$0","camelcase","re","whitespace","thing","siblingAfter","siblings","siblingBefore","emptyChildren","includeWhitespace","children","omission","handlers","tagName","closing","body","caption","headOrColgroupOrCaption","colgroup","dd","dt","Boolean","li","optgroup","option","p","rp","rubyElement","rt","tbody","td","cells","tfoot","th","thead","tr","opening","previous","seen","constants","unquoted","single","double","serializeAttribute","state","schema","Type","rest","dashes","allowParseErrors","allowDangerousCharacters","quote","isNaN","characterReferences","tightCommaSeparatedLists","collapseEmptyAttributes","preferUnquoted","quoteSmart","alternative","textEntitySubset","handle","one","parameters","invalid","unknown","zwitch","node_","comment","_1","_2","bogusComments","_3","upperDoctype","tightDoctype","omitOptionalTags","selfClosing","closeEmptyElements","voids","parts","last","tightAttributes","serializeAttributes","closeSelfClosing","tightSelfClosing","allowDangerousHtml","emptyOptions","emptyCharacterReferences","resolveColorReplacements","replacements","colorReplacements","themeName","applyColorReplacements","toArray","normalizeGetter","Promise","resolve","then","isPlainLang","isSpecialLang","isNoneTheme","isSpecialTheme","addClassToHast","class","targets","c","splitLines","preserveEnding","lines","createPositionConverter","indexToPos","posToIndex","guessEmbeddedLanguages","_lang","highlighter","langs","matchAll","fullType","bundle","getBundledLanguages","l","DEFAULT_COLOR_LIGHT_DARK","COLOR_KEYS","splitToken","offsets","lastOffset","splitTokens","breakpoints","sorted","breakpointsInToken","flatTokenVariants","merged","variantsOrder","cssVariablePrefix","defaultColor","colorsRendering","explanation","styles","t","getTokenStyleObject","variants","styleKeys","mergedStyles","varKey","keyName","cur","lightIndex","findIndex","darkIndex","lightValue","darkValue","htmlStyle","Italic","Bold","decorations","Underline","Strikethrough","stringifyTokenStyle","_grammarStateMap","setLastGrammarStateToMap","getLastGrammarStateFromMap","GrammarState","_stacks","themes","_stack","initial","fromEntries","args","stacksMap","getInternalStack","getScopes","visited","pushScope","stack2","toJSON","transformerDecorations","getContext","shiki","meta","normalizePosition","converter","JSON","items","foo","bar","isFooHasBarStart","isFooHasBarEnd","isBarHasFooStart","isBarHasFooEnd","verifyIntersections","codeEl","ctx","applyLineSection","decoration","lineEl","POSITIVE_INFINITY","alwaysWrap","wrapper","applyDecoration","splice","applyLine","lineApplies","builtInTransformers","getTransformers","transformers","pre","post","transformer","enforce","sortTransformersByEnforcement","namedColors","findSequence","position","nextEscape","nextClose","sequence","parseColor","colorMode","rgb","parseSequence","commands","codeInt","defaultNamedColorsMap","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","createColorPalette","namedColorsMap","namedColor","rgbColor","colorTable","tableColor","levels","g","level","getColorTable","defaultAnsiColors","tokenizeAnsiWithTheme","fileContents","ansiPalette","themeColor","colors","colorPalette","parser","decorations2","parse","findResult","styleToken","delete","createAnsiSequenceParser","bg","fg","hexMatch","round","cssVarMatch","dimColor","None","codeToTokensBase","internal","getLoadedThemes","resolveLangAlias","getLanguage","grammarState","tokenizeWithTheme","getLastGrammarState","_tokenizeWithTheme","stateStack","tokenizeMaxLineLength","tokenizeTimeLimit","getGrammarStack","grammarContextCode","actual","final","lineOffset","resultWithScopes","tokensWithScopes","tokensWithScopesIndex","includeExplanation","tokensLength","nextStartIndex","themeSettingsSelectors","setting","selectors","tokenWithScopes","tokenWithScopesText","explainThemeScopesNameOnly","explainThemeScopesFull","themeSelectors","themeMatches","explainThemeScope","matchesOne","matches","selectorParentIndex","parentIndex","selectorPieces","codeToTokensWithThemes","themedTokens","tokens2","outThemes","outLines","indexes","n","syncThemesTokenization","mergedTokens","lineIdx","_token","tokenIdx","mergedToken","themeIdx","__","___","mergedGrammarState","s","codeToTokens","themeTokens","themeRegs","getTheme","themesOrder","themeColorReplacements","mapThemeColors","cssVar","t2","codeToHast","transformerContext","_code","preprocess","mergeWhitespaces","mergeSameStyleTokens","newLine","firstOffset","carryOnContent","couldMerge","mergeWhitespaceTokens","leading","trailing","expanded","splitWhitespaceTokens","prevToken","prevStyle","currentStyle","isPrevDecorated","isDecorated","mergeAdjacentStyledTokens","contextSource","tokensToHast","structure","tabindex","preNode","codeNode","lineNodes","lineNode","col","tokenNode","htmlAttrs","syntheticLines","currentLine","transformedCode","hastToHtml","tree","options_","codeToHtml","postprocess","VSCODE_FALLBACK_EDITOR_FG","light","dark","VSCODE_FALLBACK_EDITOR_BG","RESOLVED_KEY","normalizeTheme","rawTheme","tokenColors","globalSetting","replacementCount","replacementMap","getReplacementColor","replaceFg","replaceBg","replacement","defineProperty","enumerable","writable","resolveLangs","flat","resolveThemes","_emitDeprecation","_emitError","enableDeprecationWarnings","emitDeprecation","emitError","warnDeprecated","trace","alias","resolved","Registry","_resolver","_themes","_langs","_alias","loadTheme","loadLanguages","_resolvedThemes","_resolvedGrammars","_langMap","_langGraph","_textmateThemeCache","_loadedThemesCache","_loadedLanguagesCache","textmateTheme","getGrammar","loadLanguage","embeddedLazilyBy","embeddedLangsLazy","addLanguage","grammarConfig","aliases","resolveEmbeddedLanguages","langsGraphArray","missingLangs","dependents","embedded","embeddedLangs","getLoadedLanguages","embeddedLang","Resolver","_scopeToLang","engine","createScanner","createString","getLangRegistration","langIdOrAlias","injectTo","scopeParts","subScopeName","instancesCount","createShikiInternalSync","warnings","warn","isDisposed","resolver","_registry","langAlias","_lastTheme","ensureNotDisposed","loadLanguageSync","langs2","loadThemeSync","themes2","createShikiInternal","createHighlighterCore","options2","getBundledThemes","getInternalContext","createHighlighterCoreSync","makeSingletonHighlighterCore","createHighlighter","_shiki","getSingletonHighlighterCore","createBundledHighlighter","bundledLanguages","bundledThemes","resolveLang","resolveTheme","core","makeSingletonHighlighter","createSingletonShorthands","config","getSingletonHighlighter","createdBundledHighlighter","createCssVariablesTheme","variablePrefix","variable","name2","variableDefaults","tokenColor","bundledThemesInfo","import","_emscripten_get_now","performance","alignUp","main","init","wasmMemory","buffer","binding","updateGlobalBufferAndViews","buf","HEAPU8","Uint8Array","HEAPU32","emscripten_realloc_buffer","grow","byteLength","UTF8Decoder","TextDecoder","UTF8ToString","ptr","maxBytesToRead","heapOrArray","endIdx","endPtr","decode","subarray","u0","UTF8ArrayToString","asmLibraryArg","emscripten_get_now","emscripten_memcpy_big","dest","num","copyWithin","emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","cutDown","overGrownHeapSize","fd_write","env","wasi_snapshot_preview1","exports$1","memory","createWasm","__defProp","__publicField","configurable","__defNormalProp","onigBinding","UtfString","utf16Length","utf8Length","_utf8ByteLength","computeIndicesMapping","utf16OffsetToUtf8","utf8OffsetToUtf16","utf8Value","i8","i16","charCode","codePoint","wasSurrogatePair","nextCharCode","utf16Value","codepoint","onigBinding2","omalloc","_OnigString","LAST_ID","_onigBinding","utfString","_sharedPtrInUse","_sharedPtr","convertUtf8OffsetToUtf16","utf8Offset","convertUtf16OffsetToUtf8","utf16Offset","ofree","initPromise","OnigString","OnigScanner","strPtrsArr","strLenArr","strPtrsPtr","strLenPtr","scannerPtr","getLastOnigError","throwLastOnigError","_ptr","freeOnigScanner","arg","_findNextMatchSync","debugCall","resultPtr","findNextOnigScannerMatch","beg","loadWasm","instance","instantiator","dataOrOptions","isInstantiatorModule","isDataOptionsObject","Response","isResponse","ArrayBuffer","isView","Buffer","isBuffer","SharedArrayBuffer","isArrayBuffer","WebAssembly","Module","_makeArrayBufferLoader","instantiateStreaming","importObject","arrayBuffer","instantiate","_makeResponseNonStreamingLoader","exports","_load","bundledLanguagesInfo","bundledLanguagesBase","bundledLanguagesAlias","createOnigurumaEngine"],"sourceRoot":""}